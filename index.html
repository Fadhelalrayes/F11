<!doctype html>

<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>الأيام الصالحة للعقد والزواج – 1447هـ (تقويم الصايغ / البحرين)</title>
  <meta name="description" content="واجهة خفيفة وأنيقة لعرض الأيام المباركة والصالحة والمكروهة للعقد والزواج لعام 1447هـ وفق تقويم الصايغ (البحرين)." />
  <style>
  :root{
    --bg:#fffdf8;         /* فاتح جدًا */
    --card:#ffffff;       /* بطاقات */
    --ink:#171513;        /* نص أساسي داكن */
    --muted:#79726a;      /* نص ثانوي */
    --line:#efe7d9;       /* حدود ناعمة */
    --gold:#c9a041;       /* لمسة ذهبية */
    --good:#0a8a61;       /* صالحة */
    --blessed:#d3b04a;    /* مباركة */
    --disliked:#c33b3b;   /* مكروهة */
  }html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:"Noto Naskh Arabic","Amiri","Scheherazade New", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;} .container{max-width:820px;margin:0 auto;padding:18px}

/* رأس بسيط وأنيق */ .header{display:flex;flex-direction:column;align-items:center;gap:6px;margin-bottom:12px} .header h1{margin:0;font-size:1.35rem;letter-spacing:.3px} .header small{color:var(--muted)} .gold-line{height:3px;width:140px;background:linear-gradient(90deg,#f5e4bd,#e9d08e,#c9a041,#f5e4bd);border-radius:999px}

/* بطاقة اليوم بدون أيقونات */ .card{background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:0 6px 14px #0000000a} .pad{padding:16px}

.today{display:grid;grid-template-columns:1fr;gap:12px} .dategrid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px} .tile{background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px} .tile h3{margin:0 0 6px;color:var(--muted);font-size:.9rem} .tile p{margin:0;font-size:1.05rem} .bigdate{font-size:1.15rem;font-weight:800}

.controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center} .btn,.input{border:1px solid var(--line);background:#fff;border-radius:10px;padding:10px 12px} .btn.primary{background:#fff7e6;border-color:#f0e2bf}

.legend{display:flex;gap:8px;flex-wrap:wrap} .badge{padding:6px 10px;border-radius:999px;border:1px solid var(--line);font-weight:700} .badge.blessed{background:#fff6dc;color:#5b4300;border-color:#f0dfa9} .badge.good{background:#edfbf4;color:#05543d;border-color:#cbeee2} .badge.disliked{background:#ffefef;color:#7a1a1a;border-color:#ffd6d6}

.details{margin-top:8px;border-top:1px dashed var(--line);padding-top:10px;color:#3a3733} .details h2{margin:0 0 6px;font-size:1.03rem}

/* تقويم شهر مبسّط */ .month{margin-top:12px} .head{display:flex;align-items:center;justify-content:space-between} .name{font-weight:800} .weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;color:#8b8b8b;text-align:center;font-size:.9rem;margin:8px 0 4px} .grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px} .cell{background:#fff;border:1px solid var(--line);border-radius:10px;min-height:50px;padding:8px;text-align:center;cursor:pointer;display:flex;flex-direction:column;justify-content:center;gap:4px} .cell .d{font-weight:800} .cell .r{font-size:.8rem} .cell[data-r="مباركة"]{outline:2px solid var(--blessed)} .cell[data-r="صالحة"]{outline:2px solid var(--good)} .cell[data-r="مكروهة"]{outline:2px solid var(--disliked)}

footer{margin:18px 0 8px;text-align:center;color:#7a746c} .sig{display:inline-flex;gap:6px;padding:6px 12px;border-radius:999px;background:#ffffffcf;border:1px solid var(--line)}

@media (max-width:560px){ .dategrid{grid-template-columns:1fr} } </style>

</head>
<body>
  <div class="container" id="app">
    <header class="header">
      <div class="title">
        <h1>الأيام الصالحة للعقد والزواج – 1447هـ</h1>
        <small>معتمد على <strong>تقويم الصايغ</strong> (البحرين) – عرض خفيف ومتناسق</small>
      </div>
    </header><section class="card today">
  <div class="pad">
    <div class="dategrid">
      <div class="tile">
        <h3>التاريخ الهجري (الصايغ)</h3>
        <p id="hijriStr">-</p>
      </div>
      <div class="tile">
        <h3>التاريخ الميلادي (البحرين)</h3>
        <p id="gregStr">-</p>
      </div>
      <div class="tile">
        <h3>اليوم</h3>
        <p id="weekday">-</p>
      </div>
      <div class="tile">
        <h3>الساعة الآن</h3>
        <p id="clock">--:--:--</p>
      </div>
    </div>
    <div class="chips" id="statusLine" style="margin-top:8px"></div>
    <div class="details">
      <h2>تفاصيل اليوم</h2>
      <div id="rulingText">اختر تاريخًا لعرض الحكم والملاحظات.</div>
      <div id="notesText"></div>
    </div>
  </div>
  <div class="pad" style="border-inline-start:1px solid var(--line)">
    <div class="controls">
      <label class="input">اختر تاريخًا ميلاديًا <input id="datePicker" type="date"></label>
      <button class="btn" id="prevDay" type="button">السابق</button>
      <button class="btn" id="nextDay" type="button">التالي</button>
      <button class="btn primary" id="goToday" type="button">اليوم</button>
    </div>
    <div class="chips" style="margin-top:10px">
      <span class="chip blessed">مباركة</span>
      <span class="chip good">صالحة</span>
      <span class="chip disliked">مكروهة</span>
    </div>
  </div>
</section>

<section class="card month" style="margin-top:14px">
  <div class="pad">
    <div class="head">
      <div class="name" id="monthTitle">تقويم الشهر الهجري</div>
      <div class="controls">
        <button class="btn" id="prevMonth" type="button">الشهر السابق</button>
        <button class="btn" id="nextMonth" type="button">الشهر التالي</button>
      </div>
    </div>
    <div class="weekdays"><div>الأحد</div><div>الإثنين</div><div>الثلاثاء</div><div>الأربعاء</div><div>الخميس</div><div>الجمعة</div><div>السبت</div></div>
    <div class="grid" id="monthGrid"></div>
  </div>
</section>

<footer>
  <div class="sig">إعداد وبرمجة: <strong>فاضل الريس</strong></div>
</footer>

  </div><script>
  // المنطقة الزمنية للبحرين
  const TZ = 'Asia/Bahrain';

  // دالة تُرجع كائن Date مطابق لتوقيت البحرين
  function nowInBahrain(){
    const fmt = new Intl.DateTimeFormat('en-CA',{timeZone:TZ,year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false});
    const parts = Object.fromEntries(fmt.formatToParts(new Date()).map(p=>[p.type,p.value]));
    return new Date(`${parts.year}-${parts.month}-${parts.day}T${parts.hour}:${parts.minute}:${parts.second}`);
  }

  function formatClock(date){
    return new Intl.DateTimeFormat('ar',{timeZone:TZ,hour:'2-digit',minute:'2-digit',second:'2-digit'}).format(date);
  }

  // استخدام تقويم أم القرى (وهو ما يعتمده تقويم الصايغ) إن توفر
  const hasUmmAlQura = (()=>{try{new Intl.DateTimeFormat('ar-SA-u-ca-islamic-umalqura').format(new Date());return true;}catch{return false;}})();

  function hijriFromIntl(date){
    const y = +new Intl.DateTimeFormat('en-u-ca-islamic-umalqura',{year:'numeric',timeZone:TZ}).format(date);
    const m = +new Intl.DateTimeFormat('en-u-ca-islamic-umalqura',{month:'numeric',timeZone:TZ}).format(date);
    const d = +new Intl.DateTimeFormat('en-u-ca-islamic-umalqura',{day:'numeric',timeZone:TZ}).format(date);
    const weekday = new Intl.DateTimeFormat('ar',{weekday:'long',timeZone:TZ}).format(date);
    const monthName = new Intl.DateTimeFormat('ar-SA-u-ca-islamic-umalqura',{month:'long',timeZone:TZ}).format(date);
    return {y,m,d,weekday,str:`${d} ${monthName} ${y}هـ`};
  }

  // احتياط تقريبي إن لم تتوفر أم القرى (نادر)
  function gregToHijriApprox(g){
    const day=g.getDate(), month=g.getMonth()+1, year=g.getFullYear();
    const jd=Math.floor((1461*(year+4800+Math.floor((month-14)/12)))/4)+Math.floor((367*(month-2-12*Math.floor((month-14)/12)))/12)-Math.floor((3*Math.floor((year+4900+Math.floor((month-14)/12))/100))/4)+day-32075;
    const l=jd-1948440+10632;const n=Math.floor((l-1)/10631);const l2=l-10631*n+354;const j1=(Math.floor((10985-l2)/5316))*(Math.floor((50*l2)/17719))+(Math.floor(l2/5670))*(Math.floor((43*l2)/15238));const j2=l2-(Math.floor((30-j1)/15))*(Math.floor((17719*j1)/50))-(Math.floor(j1/16))*(Math.floor((15238*j1)/43))+29;const mH=Math.floor((24*j2)/709);const dH=j2-Math.floor((709*mH)/24);const yH=30*n+j1-30;
    const names=['','محرم','صفر','ربيع الأول','ربيع الثاني','جمادى الأولى','جمادى الثاني','رجب','شعبان','رمضان','شوال','ذو القعدة','ذو الحجة'];
    const weekday=new Intl.DateTimeFormat('ar',{weekday:'long',timeZone:TZ}).format(g);
    return {y:yH,m:mH,d:dH,weekday,str:`${dH} ${names[mH]} ${yH}هـ`};
  }

  function getHijri(date){ return hasUmmAlQura ? hijriFromIntl(date) : gregToHijriApprox(date); }

  function formatGregorian(date){
    const df = new Intl.DateTimeFormat('ar',{timeZone:TZ,day:'numeric',month:'long',year:'numeric'});
    const weekday = new Intl.DateTimeFormat('ar',{timeZone:TZ,weekday:'long'}).format(date);
    return {str:df.format(date),weekday};
  }

  // بيانات 1447هـ (مختصرة من جدولك)
  const months1447 = {
    3:{name:'ربيع الأول',days:{1:'مباركة',2:'مباركة',3:'مكروهة',4:'مكروهة',5:'مكروهة',6:'مباركة',7:'مباركة',8:'مكروهة',9:'صالحة',10:'مكروهة',11:'صالحة',12:'مباركة',13:'مكروهة',14:'صالحة',15:'صالحة',16:'مكروهة',17:'مكروهة',18:'مباركة',19:'مباركة',20:'مباركة',21:'مكروهة',22:'صالحة',23:'مباركة',24:'مكروهة',25:'مكروهة',26:'مكروهة',27:'مباركة',28:'مباركة',29:'مكروهة',30:'مباركة'},notes:{8:'استشهاد الإمام العسكري (ع)'}},
    4:{name:'ربيع الثاني',days:{1:'مكروهة',2:'مباركة',3:'مكروهة',4:'مباركة',5:'مكروهة',6:'مباركة',7:'مباركة',8:'مكروهة',9:'صالحة',10:'صالحة',11:'صالحة',12:'مباركة',13:'مكروهة',14:'صالحة',15:'مكروهة',16:'مكروهة',17:'مباركة',18:'مكروهة',19:'مباركة',20:'مباركة',21:'مكروهة',22:'مكروهة',23:'مباركة',24:'مكروهة',25:'مكروهة',26:'مكروهة',27:'مباركة',28:'مباركة',29:'مكروهة',30:'مباركة'},notes:{13:'استشهاد السيدة فاطمة الزهراء (ع)'}},
    5:{name:'جمادى الأولى',days:{1:'مباركة',2:'مباركة',3:'مكروهة',4:'مباركة',5:'مكروهة',6:'مكروهة',7:'مباركة',8:'صالحة',9:'صالحة',10:'صالحة',11:'صالحة',12:'مباركة',13:'مكروهة',14:'صالحة',15:'صالحة',16:'مكروهة',17:'مباركة',18:'مكروهة',19:'مباركة',20:'مكروهة',21:'مكروهة',22:'صالحة',23:'مباركة',24:'مكروهة',25:'مكروهة',26:'مكروهة',27:'مكروهة',28:'مباركة',29:'مكروهة'},notes:{13:'استشهاد السيدة فاطمة الزهراء (ع)'}},
    6:{name:'جمادى الثاني',days:{1:'مباركة',2:'مباركة',3:'مكروهة',4:'مباركة',5:'مكروهة',6:'مباركة',7:'مباركة',8:'صالحة',9:'صالحة',10:'صالحة',11:'صالحة',12:'مكروهة',13:'مكروهة',14:'صالحة',15:'صالحة',16:'مكروهة',17:'مباركة',18:'مكروهة',19:'مباركة',20:'مكروهة',21:'مكروهة',22:'صالحة',23:'مباركة',24:'مكروهة',25:'مكروهة',26:'مكروهة',27:'مباركة',28:'مباركة',29:'مكروهة',30:'مباركة'},notes:{3:'استشهاد السيدة فاطمة الزهراء (ع) – الرواية الثانية',13:'وفاة السيدة أم البنين (ع)'}},
    7:{name:'رجب',days:{1:'مباركة',2:'مباركة',3:'مكروهة',4:'مباركة',5:'مكروهة',6:'مباركة',7:'مباركة',8:'صالحة',9:'صالحة',10:'مكروهة',11:'صالحة',12:'مكروهة',13:'مكروهة',14:'صالحة',15:'مكروهة',16:'مكروهة',17:'مكروهة',18:'مباركة',19:'مباركة',20:'مباركة',21:'مكروهة',22:'صالحة',23:'مباركة',24:'مكروهة',25:'مكروهة',26:'مكروهة',27:'مباركة',28:'مباركة',29:'مكروهة',30:'مباركة'},notes:{3:'استشهاد الإمام علي الهادي (ع)',12:'بداية 2026م',15:'وفاة السيدة زينب (ع)',25:'استشهاد الإمام موسى الكاظم (ع)'}},
    8:{name:'شعبان',days:{1:'مكروهة',2:'مباركة',3:'مكروهة',4:'مباركة',5:'مكروهة',6:'مباركة',7:'مباركة',8:'مكروهة',9:'صالحة',10:'صالحة',11:'صالحة',12:'مباركة',13:'مكروهة',14:'صالحة',15:'مكروهة',16:'مكروهة',17:'مباركة',18:'مباركة',19:'مباركة',20:'مباركة',21:'مكروهة',22:'مكروهة',23:'مباركة',24:'مكروهة',25:'مكروهة',26:'مكروهة',27:'مباركة',28:'مباركة',29:'مكروهة'}},
    9:{name:'شهر رمضان',days:{1:'مباركة',2:'مباركة',3:'مكروهة',4:'مباركة',5:'مكروهة',6:'مباركة',7:'مكروهة',8:'مكروهة',9:'صالحة',10:'صالحة',11:'صالحة',12:'صالحة',13:'مكروهة',14:'مكروهة',15:'صالحة',16:'مكروهة',17:'مباركة',18:'مباركة',19:'مكروهة',20:'مكروهة',21:'مكروهة',22:'صالحة',23:'صالحة',24:'مكروهة',25:'مكروهة',26:'مكروهة',27:'مباركة',28:'مكروهة',29:'مكروهة',30:'مباركة'},notes:{8:'وفاة السيدة خديجة (ع)',19:'ضربة الإمام علي (ع)',20:'مرض الإمام علي (ع)',21:'استشهاد الإمام علي (ع)'}},
    10:{name:'شوال',days:{1:'مباركة',2:'مكروهة',3:'مكروهة',4:'مباركة',5:'مكروهة',6:'مباركة',7:'مباركة',8:'صالحة',9:'صالحة',10:'صالحة',11:'صالحة',12:'مكروهة',13:'مكروهة',14:'صالحة',15:'صالحة',16:'مكروهة',17:'مباركة',18:'مباركة',19:'مكروهة',20:'مباركة',21:'مكروهة',22:'مكروهة',23:'مباركة',24:'مكروهة',25:'مكروهة',26:'مكروهة',27:'مباركة',28:'مباركة',29:'مكروهة'},notes:{25:'استشهاد الإمام جعفر الصادق (ع)'}},
    11:{name:'ذو القعدة',days:{1:'مباركة',2:'مباركة',3:'مكروهة',4:'مكروهة',5:'مكروهة',6:'مباركة',7:'مباركة',8:'صالحة',9:'صالحة',10:'صالحة',11:'مكروهة',12:'مباركة',13:'مكروهة',14:'صالحة',15:'صالحة',16:'مكروهة',17:'مباركة',18:'مكروهة',19:'مباركة',20:'مباركة',21:'مكروهة',22:'مكروهة',23:'مباركة',24:'مكروهة',25:'مكروهة',26:'مكروهة',27:'مباركة',28:'مباركة',29:'مكروهة'},notes:{29:'استشهاد الإمام محمد الجواد (ع)'}},
    12:{name:'ذو الحجة',days:{1:'مباركة',2:'مباركة',3:'مكروهة',4:'مباركة',5:'مكروهة',6:'مباركة',7:'مكروهة',8:'مكروهة',9:'صالحة',10:'مكروهة',11:'صالحة',12:'مباركة',13:'مكروهة',14:'صالحة',15:'صالحة',16:'مكروهة',17:'مكروهة',18:'مباركة',19:'مباركة',20:'مباركة',21:'مكروهة',22:'صالحة',23:'مباركة',24:'مكروهة',25:'مكروهة',26:'مكروهة',27:'مباركة',28:'مباركة',29:'مكروهة',30:'مباركة'},notes:{7:'استشهاد الإمام محمد الباقر (ع)',8:'استشهاد مسلم بن عقيل (ع)'}}
  };

  const el=id=>document.getElementById(id);
  const state={ date: nowInBahrain(), hijri:null, viewMonth:null };

  function setClock(){ el('clock').textContent = formatClock(nowInBahrain()); }

  function updateHero(){
    const d = state.date;
    const h = getHijri(d); state.hijri=h;
    const g = formatGregorian(d);
    el('hijriStr').textContent = `${h.str}`;
    el('gregStr').textContent = `${g.str}`;
    el('weekday').textContent = g.weekday;

    const mData = months1447[h.m];
    const rule = mData?.days?.[h.d];
    const status = el('statusLine'); status.innerHTML="";
    if (rule){ const s=document.createElement('span'); s.className=`chip ${rule==='مباركة'?'blessed':rule==='صالحة'?'good':'disliked'}`; s.textContent=rule; status.appendChild(s);} else { status.textContent='لا بيانات لهذا اليوم'; }
    el('rulingText').textContent = `حكم اليوم: ${rule||'غير محدد'}`;
    el('notesText').textContent = mData?.notes?.[h.d] ? `ملاحظة: ${mData.notes[h.d]}` : '';

    el('datePicker').valueAsDate = new Date(d.getFullYear(), d.getMonth(), d.getDate());
    state.viewMonth = {y:h.y,m:h.m};
    renderMonth();
  }

  function renderMonth(){
    const {m,y}=state.viewMonth||state.hijri; const mData=months1447[m];
    el('monthTitle').textContent = `${mData?.name||''} ${y}هـ`;
    const grid=el('monthGrid'); grid.innerHTML='';
    for (let i=1;i<=30;i++){
      const r=mData?.days?.[i]; if(!r) continue;
      const c=document.createElement('div'); c.className='cell'; c.dataset.r=r; c.innerHTML=`<div class="d">${i}</div><div class="r">${r}</div>`; c.title=mData?.notes?.[i]||''; c.addEventListener('click',()=>jumpToHijriDay(y,m,i)); grid.appendChild(c);
    }
  }

  function jumpToHijriDay(year,month,day){
    // نبحث في نافذة ±210 يوم حول التاريخ الحالي لإيجاد المطابقة الهجرية
    const base = nowInBahrain();
    let best=null; for(let k=-210;k<=210;k++){ const d=new Date(base); d.setDate(d.getDate()+k); const h=getHijri(d); if(h.y===year&&h.m===month&&h.d===day){best=d;break;} }
    state.date = best||base; updateHero(); document.scrollingElement.scrollTo({top:0,behavior:'smooth'});
  }

  function init(){
    setClock(); setInterval(setClock,1000);
    updateHero();
    el('goToday').addEventListener('click',()=>{ state.date = nowInBahrain(); updateHero(); });
    el('prevDay').addEventListener('click',()=>{ state.date.setDate(state.date.getDate()-1); updateHero(); });
    el('nextDay').addEventListener('click',()=>{ state.date.setDate(state.date.getDate()+1); updateHero(); });
    el('datePicker').addEventListener('change',e=>{ if(e.target.value){ state.date = new Date(e.target.value+'T12:00:00'); updateHero(); }});
    el('prevMonth').addEventListener('click',()=>{ const h=state.hijri; let m=h.m-1, y=h.y; if(m<1){m=12;y--;} state.viewMonth={m,y}; jumpToHijriDay(y,m,1); });
    el('nextMonth').addEventListener('click',()=>{ const h=state.hijri; let m=h.m+1, y=h.y; if(m>12){m=1;y++;} state.viewMonth={m,y}; jumpToHijriDay(y,m,1); });
  }

  document.addEventListener('DOMContentLoaded', init);
</script></body>
</html>
