<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <!-- ØµÙØ­Ø© Ù…ÙˆØ§Ù‚ÙŠØª ØµÙ„Ø§Ø© â€” ØªØµÙ…ÙŠÙ… Ù…ÙÙ†Ø¸Ù‘ÙÙ… ÙŠØ´Ø¨Ù‡ Ø§Ù„ØµÙˆØ±Ø©ØŒ ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙØ¬Ù„Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† ÙˆØ§Ø¬Ù‡Ø© "Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ù…Ø¤Ù…Ù†" -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© â€” Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ù…Ø¤Ù…Ù†</title>
  <meta name="description" content="ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¨ÙŠØ© Ø£Ù†ÙŠÙ‚Ø© ØªØ¹Ø±Ø¶ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† API Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ù…Ø¤Ù…Ù†ØŒ Ù…Ø¹ Ø¹Ø¯ ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ù„Ø£Ø°Ø§Ù†ØŒ ÙˆØ¯Ø¹Ù… Ø§Ù„Ù‡ÙˆØ§ØªÙ.">

  <!-- Ø³ÙŠØ§Ø³Ø© Ø£Ù…Ø§Ù† ØªØ³Ù…Ø­ Ø¨Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ hq.alkafeel.net ÙÙ‚Ø· -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 script-src 'self' 'nonce-pt123';
                 style-src 'self' 'unsafe-inline';
                 img-src 'self' data:;
                 connect-src 'self' https://hq.alkafeel.net;
                 object-src 'none';
                 base-uri 'none';
                 frame-ancestors 'none';
                 form-action 'self';
                 upgrade-insecure-requests;
                 block-all-mixed-content">

  <style>
    :root{
      --bg:#f3f3f5;          /* Ø®Ù„ÙÙŠØ© ÙØ§ØªØ­Ø© ØªØ´Ø¨Ù‡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */
      --bar:#b99f6a;         /* Ù„ÙˆÙ† Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
      --card:#ffffff;        /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… */
      --text:#191c1f;
      --muted:#6c747c;
      --accent:#00b563;
      --bd:#e8e8ea;
      --radius:14px;
      --shadow:0 6px 20px rgba(0,0,0,.06);
      --maxw: 560px;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0e1113; --bar:#8f7a4f; --card:#161a1c; --text:#e8edf0; --muted:#9aa4ad; --bd:#283036; --shadow:0 10px 26px rgba(0,0,0,.35);
      }
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Kufi Arabic", "Noto Naskh Arabic", Arial, sans-serif;
      -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
      display:grid; place-items:start center; min-height:100vh;
    }

    /* Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ */
    .appbar{
      position:sticky; top:0; z-index:10; width:100%;
      background: var(--bar); color:#fff;
      box-shadow: 0 1px 0 rgba(0,0,0,.08);
    }
    .barin{
      max-width: var(--maxw); margin:auto; padding:10px 12px; display:flex; align-items:center; gap:10px; justify-content:space-between;
    }
    .title{
      display:flex; flex-direction:column; gap:2px
    }
    .title b{font-size:1.05rem; letter-spacing:.2px}
    .title small{opacity:.9}

    .wrap{inline-size:100%; max-width: var(--maxw); padding:14px; margin:auto}

    .datecard{
      background: var(--card); border:1px solid var(--bd); border-radius: var(--radius);
      box-shadow: var(--shadow); padding:12px; display:grid; grid-template-columns: auto 1fr auto; align-items:center; gap:10px;
    }
    .arrow{
      inline-size:38px; block-size:38px; display:grid; place-items:center;
      border-radius:10px; border:1px solid var(--bd); background:#fff0; color:#fff;
      opacity:.55; cursor:not-allowed; /* ØªÙØ±ÙƒØª Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙ‚Ø· (Ù„Ø§ ØªØ§Ø±ÙŠØ® Ù…Ø®ØµÙ‘Øµ Ù…Ù† API) */
    }
    @media (prefers-color-scheme: light){ .arrow{ color:#000 } }
    .dates{
      display:flex; flex-direction:column; text-align:center;
    }
    .dates b{font-size:1rem}
    .dates small{color:var(--muted)}

    /* Ø¨Ø·Ø§Ù‚Ø© ÙƒÙ„ ØµÙ„Ø§Ø© */
    .list{
      margin-top:12px; display:flex; flex-direction:column; gap:10px;
    }
    .item{
      background: var(--card); border:1px solid var(--bd); border-radius:12px; box-shadow: var(--shadow);
      padding:12px 14px;
    }
    .row{
      display:grid; grid-template-columns: 1fr auto; align-items:center; gap:10px;
    }
    .label{ font-weight:700 }
    .time{ font-size:1.25rem; font-weight:800 }
    .sub{ margin:.5rem 0 0; color: var(--muted); font-size:.95rem }

    /* Ø£Ø²Ø±Ø§Ø± ØªØ­ÙƒÙ… Ø³ÙÙ„ÙŠØ© */
    .controls{
      margin-top:14px; display:flex; gap:8px; flex-wrap:wrap
    }
    .btn{
      border:1px solid var(--bd); border-radius:12px; padding:.7rem .9rem; background:var(--card); box-shadow: var(--shadow); cursor:pointer;
    }
    .btn.primary{ background: var(--accent); border-color: transparent; color:#fff; font-weight:800 }
    .note{ margin:10px 2px 0; color: var(--muted); font-size:.95rem }

    /* Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£/ØªÙ†Ø¨ÙŠÙ‡ */
    .alert{
      margin-top:12px; background:#ffeeee; color:#8b1c1c; border:1px solid #f3c9c9; border-radius:12px; padding:.8rem .9rem; display:none;
    }
    @media (prefers-color-scheme: dark){
      .alert{ background:#311; color:#f7bcbc; border-color:#522 }
    }
  </style>
</head>
<body>
  <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
  <div class="appbar" role="banner">
    <div class="barin">
      <button class="btn" id="geoBtn" title="Ø§Ø³ØªØ®Ø¯Ù… Ù…ÙˆÙ‚Ø¹ÙŠ">ğŸ“ Ù…ÙˆÙ‚Ø¹ÙŠ</button>
      <div class="title" aria-live="polite">
        <b id="city">Tubli â€“ Bahrain</b>
        <small id="todayTitles">Ø§Ù„Ø£Ø­Ø¯ 26 Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ 1447 Â· 19 Ø£ÙƒØªÙˆØ¨Ø± 2025</small>
      </div>
      <button class="btn" id="refreshBtn" title="ØªØ­Ø¯ÙŠØ«">â†» ØªØ­Ø¯ÙŠØ«</button>
    </div>
  </div>

  <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
  <main class="wrap" role="main" aria-labelledby="pageTitle">
    <h1 id="pageTitle" class="sr-only">Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© â€” Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ù…Ø¤Ù…Ù†</h1>

    <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® -->
    <section class="datecard" aria-label="Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®">
      <button class="arrow" aria-label="Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø§Ø¨Ù‚" title="Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø§Ø¨Ù‚">â€¹</button>
      <div class="dates">
        <b id="hijriDate">â€”</b>
        <small id="gregDate">â€”</small>
      </div>
      <button class="arrow" aria-label="Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ" title="Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ">â€º</button>
    </section>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª Ø¹Ù„Ù‰ Ø´ÙƒÙ„ Ø¨Ø·Ø§Ù‚Ø§Øª Ù…Ø«Ù„ Ø§Ù„ØµÙˆØ±Ø© -->
    <section class="list" aria-live="polite" id="timesWrap" aria-busy="false">
      <article class="item">
        <div class="row">
          <div class="label">Ø§Ù„ÙØ¬Ø±</div>
          <div class="time" id="t-fajr">â€”</div>
        </div>
        <div class="sub" id="fajrCountdown" aria-hidden="true">Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø°Ø§Ù† â€”:â€”:â€”</div>
      </article>

      <article class="item">
        <div class="row">
          <div class="label">Ø§Ù„Ø´Ø±ÙˆÙ‚</div>
          <div class="time" id="t-sunrise">â€”</div>
        </div>
      </article>

      <article class="item">
        <div class="row">
          <div class="label">Ø§Ù„Ø¸Ù‡Ø±</div>
          <div class="time" id="t-dhuhr">â€”</div>
        </div>
      </article>

      <article class="item">
        <div class="row">
          <div class="label">Ø§Ù„ØºØ±ÙˆØ¨</div>
          <div class="time" id="t-sunset">â€”</div>
        </div>
      </article>

      <article class="item">
        <div class="row">
          <div class="label">Ø§Ù„Ù…ØºØ±Ø¨</div>
          <div class="time" id="t-maghrib">â€”</div>
        </div>
      </article>

      <article class="item">
        <div class="row">
          <div class="label">Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„</div>
          <div class="time" id="t-midnight">â€”</div>
        </div>
      </article>
    </section>

    <!-- ØªØ­ÙƒÙ… ÙŠØ¯ÙˆÙŠ (Ù„Ù„Ø¶Ø¨Ø· Ø§Ù„Ø³Ø±ÙŠØ¹) -->
    <section class="controls" aria-label="Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø³Ø±ÙŠØ¹Ø©">
      <button class="btn primary" id="applyBahrain" type="button">ØªØ¹ÙŠÙŠÙ†: Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† (Tubli) +3</button>
      <button class="btn" id="customBtn" type="button">Ø¥Ø¯Ø®Ø§Ù„ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª ÙŠØ¯ÙˆÙŠÙ‹Ø§</button>
      <small class="note">Ù„Ø§ Ù†ÙØ®Ø²Ù† Ù…ÙˆÙ‚Ø¹Ùƒ. Ù†ÙØ±Ø³Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª ÙÙ‚Ø· Ù„ÙˆØ§Ø¬Ù‡Ø© Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ù…Ø¤Ù…Ù† Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª.</small>
      <div class="alert" id="errorBox" role="alert"></div>
    </section>
  </main>

  <!-- Ø³ÙƒØ±Ø¨Øª Ø¬Ù„Ø¨ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª (Nonce Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù€ CSP) -->
  <script nonce="pt123">
  (function(){
    'use strict';

    /* Ø¹Ù†Ø§ØµØ± DOM */
    const el = {
      city:   document.getElementById('city'),
      hdate:  document.getElementById('hijriDate'),
      gdate:  document.getElementById('gregDate'),
      wrap:   document.getElementById('timesWrap'),
      fajr:   document.getElementById('t-fajr'),
      sunrise:document.getElementById('t-sunrise'),
      dhuhr:  document.getElementById('t-dhuhr'),
      sunset: document.getElementById('t-sunset'),
      maghrib:document.getElementById('t-maghrib'),
      midnight:document.getElementById('t-midnight'),
      fajrCd: document.getElementById('fajrCountdown'),
      error:  document.getElementById('errorBox'),
      titles: document.getElementById('todayTitles'),
      geoBtn: document.getElementById('geoBtn'),
      refreshBtn: document.getElementById('refreshBtn'),
      applyBH: document.getElementById('applyBahrain'),
      customBtn: document.getElementById('customBtn')
    };

    /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© */
    const fmtTime = v => (v && /^\d{1,2}:\d{2}/.test(v)) ? v : 'â€”';
    const busy = b => el.wrap.setAttribute('aria-busy', b ? 'true' : 'false');

    /* Ù†ÙØ³Ù‚ Ø§ÙØªØ±Ø§Ø¶ÙŠ: Tubli â€“ Bahrain */
    let state = {
      lat: 26.2189,
      lon: 50.5903,
      tz: '+3',
      place: 'Tubli â€“ Bahrain'
    };

    /* Ø¬Ù„Ø¨ Ù…Ù† ÙˆØ§Ø¬Ù‡Ø© Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ù…Ø¤Ù…Ù† */
    async function fetchFromKafeel(lat, lon, tz){
      const url = `https://hq.alkafeel.net/Api/init/init.php?timezone=${encodeURIComponent(tz)}&long=${encodeURIComponent(lon)}&lati=${encodeURIComponent(lat)}&v=jsonPrayerTimes`;
      const res = await fetch(url, { method:'GET', mode:'cors', cache:'no-store', referrerPolicy:'no-referrer' });
      if(!res.ok) throw new Error('ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙˆØ§Ø¬Ù‡Ø© Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ù…Ø¤Ù…Ù†');
      return await res.json();
    }

    /* Ø¹Ø±Ø¶ Ø§Ù„Ù‚ÙŠÙ… Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (ÙŠØ´Ø¨Ù‡ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¨Ø·Ø§Ø¦Ù‚ ÙÙŠ Ø§Ù„ØµÙˆØ±Ø©) */
    function paint(data){
      // Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ù„ØªÙˆØ§Ø±ÙŠØ®
      el.hdate.textContent = data.date || data.hDate || 'â€”';
      const now = new Date();
      el.gdate.textContent = now.toLocaleDateString('ar', { weekday:'long', year:'numeric', month:'long', day:'numeric' });
      el.titles.textContent = `${el.hdate.textContent} Â· ${el.gdate.textContent}`;

      // Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª
      el.fajr.textContent    = fmtTime(data.fajir) || fmtTime(data.fajr);
      el.sunrise.textContent = fmtTime(data.sunrise);
      el.dhuhr.textContent   = fmtTime(data.dhuhr);
      el.sunset.textContent  = fmtTime(data.sunset);
      el.maghrib.textContent = fmtTime(data.maghrib);
      el.midnight.textContent= fmtTime(data.midnight) || fmtTime(data.midNight);

      // Ø¹Ø¯Ù‘ ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ù„ÙØ¬Ø± Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù‚Ø§Ø¯Ù…
      setupCountdown(data);
    }

    /* ØªØ­ÙˆÙŠÙ„ "HH:MM" Ù„ÙˆÙ‚Øª Ø§Ù„ÙŠÙˆÙ… */
    function todayAt(hhmm){
      if(!/^\d{1,2}:\d{2}$/.test(hhmm)) return null;
      const [h,m] = hhmm.split(':').map(Number);
      const d = new Date(); d.setSeconds(0,0); d.setHours(h, m, 0, 0);
      return d;
    }

    /* ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© ÙˆØ¨Ù†Ø§Ø¡ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ (Ù†ÙØ¸Ù‡Ø±Ù‡ ØªØ­Øª Ø§Ù„ÙØ¬Ø± Ù…Ø«Ù„ Ø§Ù„ØµÙˆØ±Ø©) */
    let cdTimer = null;
    function setupCountdown(times){
      if(cdTimer) clearInterval(cdTimer);
      el.fajrCd.setAttribute('aria-hidden','true');
      el.fajrCd.textContent = 'Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø°Ø§Ù† â€”:â€”:â€”';

      const order = [
        { id:'Ø§Ù„ÙØ¬Ø±',    t: todayAt(times.fajir || times.fajr) },
        { id:'Ø§Ù„Ø¸Ù‡Ø±',    t: todayAt(times.dhuhr) },
        { id:'Ø§Ù„Ø¹ØµØ±',    t: todayAt(times.asr) },
        { id:'Ø§Ù„Ù…ØºØ±Ø¨',   t: todayAt(times.maghrib) },
        { id:'Ø§Ù„Ø¹Ø´Ø§Ø¡',   t: todayAt(times.isha) }
      ].filter(x => x.t);

      const now = new Date();
      let next = order.find(x => x.t > now);

      // Ø¥Ù† Ù„Ù… ÙŠÙˆØ¬Ø¯ ÙˆÙ‚Øª Ù…ØªØ¨Ù‚Ù Ø§Ù„ÙŠÙˆÙ…ØŒ Ù„Ø§ Ù†Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø¯ â€” (ØªØ¨Ø³ÙŠØ·)
      if(!next) return;

      // Ù†Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø¯ ØªØ­Øª Ø£ÙˆÙ„ Ø¨Ø·Ø§Ù‚Ø© (ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„ØµÙˆØ±Ø© "Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø°Ø§Ù†")
      el.fajrCd.removeAttribute('aria-hidden');

      function tick(){
        const diff = next.t - new Date();
        if(diff <= 0){ el.fajrCd.textContent = 'Ø­Ø§Ù† ÙˆÙ‚Øª Ø§Ù„Ø£Ø°Ø§Ù†'; clearInterval(cdTimer); return; }
        const hh = Math.floor(diff/3_600_000);
        const mm = Math.floor((diff%3_600_000)/60_000);
        const ss = Math.floor((diff%60_000)/1_000);
        el.fajrCd.textContent = `Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø°Ø§Ù† ${String(hh).padStart(2,'0')}:${String(mm).padStart(2,'0')}:${String(ss).padStart(2,'0')}`;
      }
      tick();
      cdTimer = setInterval(tick, 1000);
    }

    /* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª */
    async function loadTimes(){
      try{
        busy(true);
        el.error.style.display = 'none';
        el.city.textContent = state.place;
        const data = await fetchFromKafeel(state.lat, state.lon, state.tz);
        paint(data || {});
      }catch(err){
        console.error(err);
        el.error.textContent = 'Ø­Ø¯Ø«Øª Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø£Ùˆ Ø¬Ø±Ù‘Ø¨ Ù„Ø§Ø­Ù‚Ù‹Ø§.';
        el.error.style.display = 'block';
      }finally{
        busy(false);
      }
    }

    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
    el.applyBH.addEventListener('click', ()=>{ state = { lat:26.2189, lon:50.5903, tz:'+3', place:'Tubli â€“ Bahrain' }; loadTimes(); });
    el.refreshBtn.addEventListener('click', loadTimes);
    el.geoBtn.addEventListener('click', ()=>{
      if(!('geolocation' in navigator)){ el.error.textContent = 'Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.'; el.error.style.display='block'; return; }
      navigator.geolocation.getCurrentPosition(p=>{
        const tz = (new Date().getTimezoneOffset() / -60) || +3;
        state = { lat:+p.coords.latitude.toFixed(6), lon:+p.coords.longitude.toFixed(6), tz: (tz>0?`+${tz}`:`${tz}`), place:'Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ' };
        loadTimes();
      }, e=>{
        el.error.textContent = 'ØªÙ… Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø£Ùˆ Ø­Ø¯Ø« Ø®Ø·Ø£. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø²Ø± "ØªØ¹ÙŠÙŠÙ†: Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†".';
        el.error.style.display = 'block';
      }, { enableHighAccuracy:false, timeout:10000, maximumAge:0 });
    });

    el.customBtn.addEventListener('click', ()=>{
      const lat = prompt('Ø£Ø¯Ø®Ù„ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ (lat):', state.lat);
      const lon = prompt('Ø£Ø¯Ø®Ù„ Ø®Ø· Ø§Ù„Ø·ÙˆÙ„ (lon):', state.lon);
      const tz  = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© (Ù…Ø«Ø§Ù„: +3 Ø£Ùˆ -4):', state.tz);
      if(lat && lon && tz){ state = { lat:+lat, lon:+lon, tz:tz.trim(), place:'Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ù…Ø®ØµÙ‘ØµØ©' }; loadTimes(); }
    });

    // ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ â€” Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† Tubli
    loadTimes();
  })();
  </script>
</body>
</html>
