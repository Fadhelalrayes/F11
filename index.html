<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ø®Ø· Ø§Ù„ØªÙ…Ø§Ø³ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±ÙŠ</title>

<!-- Ø®Ø·ÙˆØ· Ø¹Ø±Ø¨ÙŠØ© Ø£Ù†ÙŠÙ‚Ø© -->
<link href="https://fonts.googleapis.com/css2?family=Changa:wght@600;700;800&family=IBM+Plex+Sans+Arabic:wght@300;400;600;700&display=swap" rel="stylesheet" />

<style>
  :root{
    --bg:#f6f8fb; --card:#ffffff; --ink:#0a1020; --muted:#5a6b7d; --accent:#0aa27a;
    --ring:#e5eef6; --shadow:0 10px 25px rgba(19,52,89,.08); --chip:#eef4fb; --chip-b:#e6eef7;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--ink);
    font:16px/1.75 "IBM Plex Sans Arabic","Tajawal",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  }
  h1,h2{font-family:"Changa","IBM Plex Sans Arabic",system-ui,sans-serif}
  header{
    position:sticky; top:0; z-index:20; background:#ffffffcc; backdrop-filter:saturate(140%) blur(8px);
    border-bottom:1px solid var(--ring)
  }
  .container{max-width:1200px; margin:auto; padding:18px}
  .brand{display:flex; align-items:center; gap:14px}
  .logo{
    width:48px; height:48px; border-radius:14px; display:grid; place-items:center;
    background:radial-gradient(circle at 30% 30%, #22d5ad, #0aa27a 60%, #0a8063 100%); color:#fff; box-shadow:0 8px 18px rgba(10,162,122,.25)
  }
  .logo svg{width:26px; height:26px; fill:#fff}
  h1{margin:0; font-size:1.9rem; letter-spacing:.2px}
  .tagline{color:#486076; font-size:.95rem; margin-top:2px}
  .toolbar{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
  .chip{
    background:linear-gradient(180deg,var(--chip),var(--chip-b)); color:#214567;
    padding:8px 12px; border:1px solid var(--ring); border-radius:999px; font-size:.92rem; display:flex; align-items:center; gap:8px
  }
  .btn{
    border:1px solid var(--ring); background:#fff; color:var(--ink);
    border-radius:12px; padding:10px 14px; cursor:pointer; transition:.2s; font-weight:700
  }
  .btn:hover{transform:translateY(-1px); box-shadow:0 6px 18px rgba(12,57,95,.12)}
  .grid{display:grid; gap:16px; margin-top:14px; grid-template-columns:repeat(auto-fill,minmax(280px,1fr))}
  article.card{
    background:var(--card); border:1px solid var(--ring); border-radius:18px; padding:16px; box-shadow:var(--shadow);
    display:flex; flex-direction:column; gap:10px; position:relative; overflow:hidden
  }
  .badge{display:inline-flex; gap:8px; align-items:center; font-size:.8rem; color:#0a8063;
    background:#e8fbf5; border:1px solid #b9f0df; padding:6px 10px; border-radius:999px; width:max-content}
  .title{font-size:1.12rem; font-weight:800; margin:4px 0 0}
  .excerpt{color:#2c3e50; font-size:.97rem}
  .meta{display:flex; gap:10px; color:#5f7286; font-size:.85rem}
  .card-top{display:flex; align-items:flex-start; gap:8px}
  .more{
    margin-inline-start:auto; width:38px; height:38px; border-radius:10px; border:1px solid var(--ring);
    background:#fff; display:grid; place-items:center; cursor:pointer; transition:.2s
  }
  .more:hover{transform:translateY(-1px); box-shadow:0 6px 16px rgba(10,162,122,.18)}
  .more svg{width:18px; height:18px; color:#0b2e3f}
  details{border-top:1px dashed var(--ring); padding-top:10px}
  details[open] summary{opacity:.6}
  summary{list-style:none; cursor:pointer; display:flex; align-items:center; gap:8px}
  summary::-webkit-details-marker{display:none}
  .empty,.error{text-align:center; color:#5b6b7c; padding:50px 20px; border:1px dashed var(--ring); border-radius:18px; background:#fff}
  .pulse{display:inline-block; width:8px; height:8px; border-radius:999px; background:#0aa27a; box-shadow:0 0 0 0 rgba(10,162,122,.6); animation:pulse 2s infinite}
  @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(10,162,122,.6)}70%{box-shadow:0 0 0 12px rgba(10,162,122,0)}100%{box-shadow:0 0 0 0 rgba(10,162,122,0)}}

  /* Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© */
  .sharebar{
    display:flex; align-items:center; gap:8px; flex-wrap:wrap
  }
  .sharebtn{
    width:36px; height:36px; border-radius:10px; border:1px solid var(--ring); background:#fff; display:grid; place-items:center;
    cursor:pointer; transition:.2s
  }
  .sharebtn:hover{transform:translateY(-1px); box-shadow:0 6px 16px rgba(12,57,95,.12)}
  .sharebtn svg{width:18px; height:18px}
  .copy-toast{
    position:fixed; bottom:18px; inset-inline:0; margin:auto; width:max-content; background:#0aa27a; color:white;
    padding:10px 14px; border-radius:12px; box-shadow:0 8px 30px rgba(10,162,122,.25); font-weight:700; display:none
  }

  /* ØªØ°ÙŠÙŠÙ„ Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ */
  footer.site-footer{max-width:1200px; margin:28px auto 20px; padding:0 18px; text-align:center}
  a.credit{
    display:inline-flex; align-items:center; gap:8px; text-decoration:none;
    border:1px solid var(--ring); background:#fff; color:var(--ink);
    padding:10px 14px; border-radius:14px; font-weight:800; box-shadow:0 6px 16px rgba(12,57,95,.12); transition:.2s
  }
  a.credit:hover{transform:translateY(-1px)}
</style>
</head>
<body>
  <header>
    <div class="container" style="display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap">
      <div class="brand">
        <div class="logo" aria-hidden="true" title="Ø´Ø¹Ø§Ø± Ø®Ø· Ø§Ù„ØªÙ…Ø§Ø³">
          <svg viewBox="0 0 24 24" role="img" aria-label="ÙƒØ±Ø©"><path d="M12 2a10 10 0 1 0 10 10A10.012 10.012 0 0 0 12 2Zm0 2a8 8 0 1 1-8 8 8.009 8.009 0 0 1 8-8Zm4.5 6.75h-9a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 0-1.5Z"/></svg>
        </div>
        <div>
          <h1>Ø®Ø· Ø§Ù„ØªÙ…Ø§Ø³ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±ÙŠ</h1>
          <div class="tagline">Ø£Ø®Ø¨Ø§Ø± Ø±ÙŠØ§Ø¶ÙŠØ© Ø¹Ø±Ø¨ÙŠØ© â€” ØªØ­Ø¯ÙŠØ« Ø°ÙƒÙŠ ÙˆØ³Ø±ÙŠØ¹ ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©</div>
        </div>
      </div>

      <!-- Ø´Ø±ÙŠØ· Ù…Ø´Ø§Ø±ÙƒØ© -->
      <div class="sharebar" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØµÙØ­Ø©">
        <button class="sharebtn" data-share="whatsapp" title="Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§ØªØ³Ø§Ø¨" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§ØªØ³Ø§Ø¨">
          <!-- ÙˆØ§ØªØ³Ø§Ø¨ -->
          <svg viewBox="0 0 24 24" fill="none"><path d="M12 2a10 10 0 0 0-8.66 15.08L2 22l4.99-1.29A10 10 0 1 0 12 2Z" stroke="#25D366" /><path d="M8.5 9.5c.2 3 3.1 5.9 6.1 6.1.4 0 .8-.2 1.1-.5l.7-.7c.3-.3.3-.8 0-1.1l-1.2-1.2c-.3-.3-.8-.3-1.1 0l-.3.3c-.2.2-.5.2-.8.1-1.1-.5-2-1.4-2.5-2.5-.1-.3-.1-.6.1-.8l.3-.3c.3-.3.3-.8 0-1.1L10 6.6c-.3-.3-.8-.3-1.1 0l-.7.7c-.3.3-.5.7-.5 1.1Z" fill="#25D366"/></svg>
        </button>
        <button class="sharebtn" data-share="telegram" title="Ù…Ø´Ø§Ø±ÙƒØ© ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…">
          <!-- ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… -->
          <svg viewBox="0 0 24 24" fill="none"><path d="M21 3 9.5 13.2" stroke="#229ED9"/><path d="m21 3-3.4 18a1 1 0 0 1-1.6.6l-4.7-3.6-3 2.9a.8.8 0 0 1-1.3-.4l.9-5.6L3 12.2a1 1 0 0 1 .2-1.8L20.1 2.2A.8.8 0 0 1 21 3Z" fill="#229ED9"/></svg>
        </button>
        <button class="sharebtn" data-share="facebook" title="Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠØ³Ø¨ÙˆÙƒ" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠØ³Ø¨ÙˆÙƒ">
          <!-- ÙÙŠØ³Ø¨ÙˆÙƒ -->
          <svg viewBox="0 0 24 24" fill="none"><path d="M13 9h3V6h-3c-1.7 0-3 1.3-3 3v2H7v3h3v7h3v-7h3l1-3h-4V9Z" fill="#1877F2"/></svg>
        </button>
        <button class="sharebtn" data-share="x" title="Ù…Ø´Ø§Ø±ÙƒØ© X" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© X (ØªÙˆÙŠØªØ±)">
          <!-- X -->
          <svg viewBox="0 0 24 24" fill="none"><path d="m4 4 16 16M20 4 4 20" stroke="#111"/></svg>
        </button>
        <button class="sharebtn" data-share="linkedin" title="Ù…Ø´Ø§Ø±ÙƒØ© Ù„ÙŠÙ†ÙƒØ¯Ø¥Ù†" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© Ù„ÙŠÙ†ÙƒØ¯Ø¥Ù†">
          <!-- Ù„ÙŠÙ†ÙƒØ¯Ø¥Ù† -->
          <svg viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" rx="3" stroke="#0A66C2"/><path d="M8 17v-6M8 8.5v-.5M12 17v-3c0-1.1.9-2 2-2s2 .9 2 2v3" stroke="#0A66C2"/></svg>
        </button>
        <button class="sharebtn" data-share="copy" title="Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·" aria-label="Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·">
          <!-- Ù†Ø³Ø® -->
          <svg viewBox="0 0 24 24" fill="none"><rect x="8" y="8" width="10" height="12" rx="2" stroke="#333"/><rect x="6" y="4" width="10" height="12" rx="2" stroke="#333"/></svg>
        </button>
      </div>
    </div>
  </header>

  <main class="container">
    <section id="news" class="grid" aria-live="polite" aria-busy="true"></section>
    <div id="status" class="empty" hidden>ÙŠØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±â€¦</div>
  </main>

  <!-- ØªØ°ÙŠÙŠÙ„: Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ± â€” ÙŠÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· -->
  <footer class="site-footer">
    <a class="credit" href="https://api.whatsapp.com/send/?phone=97333375858&text&type=phone_number&app_absent=0&wame_ctl=1&fbclid=PAVERDUAMmpVFleHRuA2FlbQIxMAABpyJPbGGA99AFnmjozjUr8s9ejerL-tlDxOqcQ4PlUxZoQi3rSh4orLwyOCk1_aem_Qwij4KmGwbbQgFaNdtN4ZA"
       target="_blank" rel="noopener" aria-label="Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨">
      Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ±: <strong>ÙØ§Ø¶Ù„ Ø§Ù„Ø±ÙŠØ³</strong>
    </a>
  </footer>

  <!-- Ø¥Ø´Ø¹Ø§Ø± Ù†Ø³Ø® -->
  <div class="copy-toast" id="copyToast">ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ğŸ‘Œ</div>

<script>
(() => {
  // â€”â€” Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª â€”â€” //
  const REFRESH_MS = 30_000; // Ø£Ø³Ø±Ø¹: ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
  const FEED_TIMEOUT_MS = 6000; // Ù…Ù‡Ù„Ø© Ù„ÙƒÙ„ Ù…ØµØ¯Ø±
  const MAX_RETRIES = 1; // Ø¥Ø¹Ø§Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ø­Ø¯Ø© Ù„Ù„Ù…ØµØ¯Ø± Ø§Ù„ÙØ§Ø´Ù„
  const LIMIT = 42;

  // â€”â€” Ù…ØµØ§Ø¯Ø± Ø¹Ø±Ø¨ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© (RSS) â€”â€” //
  // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø¹Ø§Ù…Ø©Ø› Ù†Ø±Ø´Ù‘Ø­ Ø±ÙŠØ§Ø¶ÙŠÙ‹Ø§ Ø¨Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©.
  const FEEDS = [
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://www.alarabiya.net/.mrss/ar/sports.xml'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://aawsat.com/rss/section/sport'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://arabic.rt.com/rss/sport/'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://www.skynewsarabia.com/rss/sports'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://www.aljazeera.net/aljazeera/rss'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://www.almasryalyoum.com/rss'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://www.youm7.com/rss/rss'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://www.bbc.com/arabic/index.xml')
  ];

  const $grid = document.getElementById('news');
  const $status = document.getElementById('status');

  let lastTitles = new Set();

  // â€”â€”â€” Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© â€”â€”â€”
  function relativeTime(date){
    try{
      const d = (date instanceof Date) ? date : new Date(date);
      const diff = (Date.now() - d.getTime())/1000;
      const abs = Math.abs(diff);
      const rtf = new Intl.RelativeTimeFormat('ar',{numeric:'auto'});
      if(abs < 60) return 'Ø§Ù„Ø¢Ù†';
      if(abs < 3600) return rtf.format(Math.round(-diff/60),'minute');
      if(abs < 86400) return rtf.format(Math.round(-diff/3600),'hour');
      return rtf.format(Math.round(-diff/86400),'day');
    }catch{ return ''; }
  }
  function strip(html){
    const tmp = document.createElement('div');
    tmp.innerHTML = (html || '').replace(/<script[^>]*>[\s\S]*?<\/script>/gi,'');
    return (tmp.textContent || tmp.innerText || '').replace(/\s+/g,' ').trim();
  }
  function includesSportArabic(text){
    const t = (text||'').toLowerCase();
    return /Ø±ÙŠØ§Ø¶Ø©|ÙƒØ±Ø©|Ù‚Ø¯Ù…|Ø¯ÙˆØ±ÙŠ|Ù…Ø¨Ø§Ø±Ø§Ø©|Ù‡Ø¯Ø§Ù|Ù…Ù†ØªØ®Ø¨|ÙƒØ£Ø³|Ø¨Ø·ÙˆÙ„Ø©|Ù†Ø§Ø¯ÙŠ|Ù…Ø¯Ø±Ø¨|Ù„Ø§Ø¹Ø¨|ØªØµÙÙŠØ§Øª|Ø§Ù„Ù…Ù„Ø¹Ø¨|Ø§Ù„Ø´ÙˆØ·|ÙØ±ÙŠÙ‚|Ø¬ÙˆÙ„Ø©|Ù…ÙˆØ³Ù…|ÙƒÙ„Ø§Ø³ÙŠÙƒÙˆ|Ø±ÙƒÙ„Ø©/.test(t);
  }
  function escapeHTML(s){return (s||'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');}

  function card({title, excerpt, date}){
    const id = btoa(unescape(encodeURIComponent(title))).slice(0,24);
    return `
      <article class="card" data-id="${id}">
        <div class="card-top">
          <span class="badge" aria-label="ØªØµÙ†ÙŠÙ Ø§Ù„Ø®Ø¨Ø±">âš½ Ø±ÙŠØ§Ø¶Ø©</span>
          <button class="more" title="Ù…Ø²ÙŠØ¯" aria-label="Ù…Ø²ÙŠØ¯ (ÙØªØ­ Ø§Ù„Ù…Ù‚ØªØ·Ù)">
            <svg viewBox="0 0 24 24" role="img" aria-label="Ù…Ø²ÙŠØ¯">
              <path d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2Zm-4 9a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm4 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm4 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/>
            </svg>
          </button>
        </div>
        <h2 class="title">${escapeHTML(title)}</h2>
        <div class="meta">ğŸ•’ <span>${escapeHTML(relativeTime(date))}</span></div>
        <details>
          <summary>Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‚ØªØ·Ù</summary>
          <p class="excerpt">${escapeHTML(excerpt || 'â€”')}</p>
        </details>
      </article>
    `;
  }

  // â€”â€”â€” Ø¬Ù„Ø¨ Ù…Ø¹ Ù…Ù‡Ù„Ø© + Ø¥Ø¹Ø§Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø© â€”â€”â€”
  async function fetchWithTimeout(url, timeoutMs, retries=0){
    const ctrl = new AbortController();
    const t = setTimeout(()=>ctrl.abort('timeout'), timeoutMs);
    try{
      const r = await fetch(url, {cache:'no-store', signal: ctrl.signal});
      if(!r.ok) throw new Error('HTTP '+r.status);
      return await r.text();
    } catch(e){
      if(retries < MAX_RETRIES) return fetchWithTimeout(url, timeoutMs, retries+1);
      throw e;
    } finally{
      clearTimeout(t);
    }
  }

  function parseFeed(xmlText){
    const out = [];
    try{
      const xml = new DOMParser().parseFromString(xmlText, 'text/xml');
      const items = Array.from(xml.querySelectorAll('item'));
      const entries = Array.from(xml.querySelectorAll('entry'));
      const nodes = items.length ? items : entries;

      for(const n of nodes){
        const title = (n.querySelector('title')?.textContent || '').trim();
        if(!title) continue;

        const desc = n.querySelector('description, summary, content')?.textContent || '';
        const cat  = (n.querySelector('category')?.textContent || '') + ' ' + (n.querySelector('section')?.textContent || '');
        const pub  = n.querySelector('pubDate, updated, published')?.textContent || new Date().toISOString();
        const date = new Date(pub);

        const filterText = [title, desc, cat].join(' ');
        if(!includesSportArabic(filterText)) continue;

        out.push({
          title,
          excerpt: strip(desc).slice(0, 260),
          date: isNaN(date.getTime()) ? new Date() : date
        });
      }
    }catch(e){/* ØªØ¬Ø§Ù‡ÙÙ„ Ù…ØµØ¯Ø± Ù…Ø¹Ø·Ù‘Ù„ */ }
    return out;
  }

  async function load(){
    $grid.setAttribute('aria-busy','true');
    $status.hidden = false; $status.className='empty';
    $status.textContent = 'ÙŠØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±â€¦';

    try{
      // Ø­Ø¯ Ø£Ù‚ØµÙ‰ Ù„Ù„ØªÙˆØ§Ø²ÙŠ Ù„ØªÙØ§Ø¯ÙŠ Ø§Ù„Ø¶ØºØ·
      const chunks = [];
      const CONCURRENCY = 4;
      for(let i=0; i<FEEDS.length; i+=CONCURRENCY){
        chunks.push(FEEDS.slice(i, i+CONCURRENCY));
      }

      let allItems = [];
      for(const group of chunks){
        const texts = await Promise.allSettled(group.map(u => fetchWithTimeout(u, FEED_TIMEOUT_MS)));
        const items = texts.filter(x=>x.status==='fulfilled').flatMap(x=>parseFeed(x.value));
        allItems = allItems.concat(items);
      }

      // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª + Ø§Ù„ÙØ±Ø²
      const seen = new Set();
      const unique = [];
      for(const it of allItems){
        const key = it.title.trim().toLowerCase();
        if(seen.has(key)) continue;
        seen.add(key);
        unique.push(it);
      }
      unique.sort((a,b)=> b.date - a.date);

      const limited = unique.slice(0, LIMIT);
      if(!limited.length){
        $grid.innerHTML = '';
        $status.hidden = false;
        $status.className = 'empty';
        $status.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù…Ù†Ø§Ø³Ø¨Ø© Ø§Ù„Ø¢Ù†. Ø³ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.';
      } else {
        $status.hidden = true;
        $grid.innerHTML = limited.map(card).join('');
      }
    } catch(e){
      console.error(e);
      $grid.innerHTML = '';
      $status.hidden = false;
      $status.className = 'error';
      $status.textContent = 'ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¢Ù†. Ø³Ù†Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ù‹Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.';
    } finally{
      $grid.removeAttribute('aria-busy');
    }
  }

  // Ø²Ø± Â«Ù…Ø²ÙŠØ¯Â»
  document.addEventListener('click', (ev) => {
    const btn = ev.target.closest('.more');
    if(!btn) return;
    const det = btn.closest('.card')?.querySelector('details');
    if(det) det.open = !det.open;
  });

  // Ù…Ø´Ø§Ø±ÙƒØ©
  const shareText = 'ØªØ§Ø¨Ø¹ Â«Ø®Ø· Ø§Ù„ØªÙ…Ø§Ø³ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±ÙŠÂ»: Ø£Ø­Ø¯Ø« Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.';
  function openShare(url){ window.open(url, '_blank','noopener'); }
  document.querySelectorAll('.sharebtn').forEach(btn=>{
    btn.addEventListener('click', async ()=>{
      const kind = btn.dataset.share;
      const pageURL = location.href;
      if(kind==='copy'){
        try{
          await navigator.clipboard.writeText(`${shareText}\n${pageURL}`);
          const toast = document.getElementById('copyToast');
          toast.style.display='block';
          setTimeout(()=>toast.style.display='none', 1600);
        }catch{/* ØªØ¬Ø§Ù‡ÙÙ„ */}
        return;
      }
      const msg = encodeURIComponent(shareText);
      const url = encodeURIComponent(pageURL);
      // Web Share API Ø¥Ù† ØªÙˆÙÙ‘Ø±
      if(navigator.share && (kind==='x' || kind==='facebook' || kind==='linkedin')){
        try{ await navigator.share({title:document.title, text:shareText, url:pageURL}); return; }catch{/* ØªØ¬Ø§Ù‡ÙÙ„ */}
      }
      if(kind==='whatsapp')   openShare(`https://wa.me/?text=${msg}%0A${url}`);
      if(kind==='telegram')   openShare(`https://t.me/share/url?url=${url}&text=${msg}`);
      if(kind==='facebook')   openShare(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${msg}`);
      if(kind==='x')          openShare(`https://x.com/intent/tweet?text=${msg}&url=${url}`);
      if(kind==='linkedin')   openShare(`https://www.linkedin.com/sharing/share-offsite/?url=${url}`);
    });
  });

  // Ø²Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙŠØ¯ÙˆÙŠ ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ù‚Ø¯ÙŠÙ… (Ø¥Ù† ÙˆÙØ¬Ø¯)
  const refreshBtn = document.getElementById('refreshBtn');
  if(refreshBtn) refreshBtn.addEventListener('click', load);

  // ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„ÙŠ ÙˆØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø£Ø³Ø±Ø¹
  load();
  const timer = setInterval(load, REFRESH_MS);
  // ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨
  document.addEventListener('visibilitychange', ()=>{ if(!document.hidden) load(); });
})();
</script>
</body>
</html>
