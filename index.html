<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>المِسْبَحة الفاخرة</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;900&display=swap" rel="stylesheet">
<style>
:root{
  --navy1:#0a1931;
  --navy2:#102542;
  --gold1:#d4af37;
  --gold2:#f9e79f;
  --white:#fff;
}
body{
  margin:0;height:100%;
  font-family:"Cairo",sans-serif;
  background:linear-gradient(160deg,var(--navy1),var(--navy2));
  display:grid;place-items:center;color:var(--white);
}
.screen{
  width:min(440px,95vw);height:calc(100vh - 28px);
  border-radius:32px;overflow:hidden;position:relative;
  box-shadow:0 25px 70px rgba(0,0,0,.55);
  background:linear-gradient(180deg,var(--navy1),var(--navy2));
}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:14px 20px}
.title{font-weight:900;font-size:22px;background:linear-gradient(90deg,var(--gold1),var(--gold2));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent}
.icon-btn{
  width:46px;height:46px;border-radius:50%;cursor:pointer;
  background:linear-gradient(145deg,var(--navy2),#081225);
  border:2px solid var(--gold1);display:grid;place-items:center;
  box-shadow:0 0 10px rgba(212,175,55,.5),inset 0 0 12px rgba(212,175,55,.15);
}
.icon-btn svg{stroke:url(#goldGrad);stroke-width:1.8}
.tabs{display:flex;gap:12px;justify-content:center;padding:12px 16px}
.tab{
  flex:1;text-align:center;padding:12px;border-radius:16px;
  background:linear-gradient(145deg,rgba(255,255,255,.08),rgba(255,255,255,.02));
  border:2px solid rgba(212,175,55,.4);color:#d9e0ff;font-weight:800;cursor:pointer
}
.tab.active{background:linear-gradient(145deg,var(--gold1),var(--gold2));color:var(--navy1)}
.phrase{text-align:center;font-size:42px;font-weight:900;margin:16px 0}
.counter{
  width:82%;margin:12px auto;display:grid;grid-template-columns:1fr 1fr;
  border-radius:16px;overflow:hidden;
  background:linear-gradient(145deg,rgba(255,255,255,.1),rgba(255,255,255,.02));
  border:2px solid var(--gold1);
  box-shadow:inset 0 0 12px rgba(212,175,55,.2);
}
.counter div{text-align:center;padding:14px;font-size:32px;font-weight:900;
  background:linear-gradient(145deg,var(--navy2),#0a1835);color:var(--gold2)}
.counter div+div{border-right:2px solid var(--gold1)}
.ring-wrap{width:82%;aspect-ratio:1/1;margin:18px auto;position:relative}
.ring{
  --p:0;position:absolute;inset:0;border-radius:50%;
  background:conic-gradient(var(--gold1) calc(var(--p)*1turn),rgba(255,255,255,.15) 0);
  display:grid;place-items:center;padding:20px;
  box-shadow:0 0 30px rgba(212,175,55,.25),inset 0 0 20px rgba(0,0,0,.6);
}
.press{
  width:72%;height:72%;display:grid;place-items:center;
  background:linear-gradient(160deg,var(--gold2),var(--gold1));
  border:2px solid var(--gold1);border-radius:50%;
  font-weight:900;font-size:36px;color:var(--navy1);cursor:pointer;
  box-shadow:0 0 25px rgba(212,175,55,.55),inset 0 0 12px rgba(255,255,255,.4);
  transition:transform .1s,box-shadow .3s;
}
.press:active{transform:scale(.96);box-shadow:0 0 40px rgba(212,175,55,.9)}
.glow{box-shadow:0 0 50px 20px rgba(212,175,55,.75)!important}
.footer{position:absolute;bottom:12px;inset-inline:0;text-align:center;color:#ccc;font-weight:700}
.footer b{color:var(--gold1)}
</style>
</head>
<body>
<svg width="0" height="0">
  <defs>
    <linearGradient id="goldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#d4af37"/>
      <stop offset="100%" stop-color="#f9e79f"/>
    </linearGradient>
  </defs>
</svg>
<div class="screen">
  <div class="topbar">
    <button class="icon-btn" id="btn-reset">
      <svg width="24" height="24" fill="none"><path d="M3 12a9 9 0 1 0 3-6.708"/><path d="M3 4v4h4"/></svg>
    </button>
    <div class="title">المسبحة</div>
    <button class="icon-btn" id="btn-next">
      <svg width="24" height="24" fill="none"><path d="M9 6l6 6-6 6"/></svg>
    </button>
  </div>
  <div class="tabs">
    <button id="tabZ" class="tab active">تسبيح الزهراء</button>
    <button id="tabO" class="tab">التسبيح المفتوح</button>
  </div>
  <div class="phrase" id="phrase">الله أكبر</div>
  <div class="counter"><div id="leftNum">34</div><div id="rightNum">0</div></div>
  <div class="ring-wrap">
    <div class="ring" id="ring" style="--p:0">
      <button class="press" id="press">إضغط</button>
    </div>
  </div>
  <div class="footer">برمجة وتطوير : <b>فاضل الريس</b></div>
</div>
<script>
const SEQ=[{text:"الله أكبر",max:34},{text:"الحمد لله",max:33},{text:"سبحان الله",max:33}];
let mode=localStorage.getItem('mode')||'zahra';
let zh=JSON.parse(localStorage.getItem('zh')||'{"step":0,"count":0}');
let op=JSON.parse(localStorage.getItem('op')||'{"text":"سبحان الله","count":0,"target":0}');
const phrase=document.getElementById('phrase'),left=document.getElementById('leftNum'),
      right=document.getElementById('rightNum'),ring=document.getElementById('ring'),
      press=document.getElementById('press');
const tabZ=document.getElementById('tabZ'),tabO=document.getElementById('tabO');
function vibrate(ms){try{navigator.vibrate(ms);}catch{}}
function render(){
  if(mode==='zahra'){const cur=SEQ[zh.step]||{text:'تم التسبيح',max:1};phrase.textContent=cur.text;left.textContent=cur.max;right.textContent=zh.count;ring.style.setProperty('--p',zh.count/cur.max);}
  else{phrase.textContent=op.text;left.textContent=op.target>0?op.target:'∞';right.textContent=op.count;ring.style.setProperty('--p',op.target?op.count/op.target:0);}
}
function tick(){
  if(mode==='zahra'){
    const cur=SEQ[zh.step];if(!cur){zh={step:0,count:0};}
    else{zh.count++;if(zh.count>=cur.max){zh.step++;zh.count=0;vibrate([100,50,100]);press.classList.add("glow");setTimeout(()=>press.classList.remove("glow"),800);}}
    if(zh.step>=SEQ.length){phrase.textContent="تم التسبيح ✔";left.textContent="0";right.textContent="0";ring.style.setProperty("--p",1);vibrate([200,100,200]);press.classList.add("glow");setTimeout(()=>press.classList.remove("glow"),1500);}
    localStorage.setItem('zh',JSON.stringify(zh));
  }else{
    op.count++;if(op.target>0 && op.count>=op.target){vibrate([200,100,200]);press.classList.add("glow");setTimeout(()=>press.classList.remove("glow"),1500);}
    localStorage.setItem('op',JSON.stringify(op));
  }
  render();
}
press.onclick=tick;
document.getElementById('btn-next').onclick=()=>{mode=mode==='zahra'?'open':'zahra';localStorage.setItem('mode',mode);tabZ.classList.toggle('active',mode==='zahra');tabO.classList.toggle('active',mode==='open');render();}
document.getElementById('btn-reset').onclick=()=>{zh={step:0,count:0};op={text:'سبحان الله',count:0,target:0};localStorage.setItem('zh',JSON.stringify(zh));localStorage.setItem('op',JSON.stringify(op));render();}
tabZ.onclick=()=>{mode='zahra';localStorage.setItem('mode',mode);tabZ.classList.add('active');tabO.classList.remove('active');render();}
tabO.onclick=()=>{mode='open';localStorage.setItem('mode',mode);tabO.classList.add('active');tabZ.classList.remove('active');render();}
render();
</script>
</body>
</html>
