ØªÙ…Ø§Ù… ÙŠØ§ íšŒì¥ë‹˜â€”ØºÙŠÙ‘Ø±ØªÙ Ø§Ù„ØªØµÙ…ÙŠÙ… ÙƒÙ„ÙŠÙ‹Ø§: Ù‡ÙˆÙŠØ© Ù„ÙˆÙ†ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© (ØªØ±ÙƒÙˆØ§Ø²/Ø±Ù…Ù„ÙŠ/ÙØ­Ù…ÙŠ)ØŒ ØªØ®Ø·ÙŠØ· Ù…Ø®ØªÙ„Ù ØªÙ…Ø§Ù…Ù‹Ø§ (Ø¨Ø·Ø§Ù‚Ø§Øª ÙƒØ¨ÙŠØ±Ø© Ù…Ø±ØªÙ‘Ø¨Ø© ÙÙŠ Ø´Ø¨ÙƒØ©ØŒ ØªÙ…ÙŠÙŠØ² Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù‚Ø§Ø¯Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§)ØŒ Ø±Ø£Ø³ ØµÙØ­Ø© Ù†Ø¸ÙŠÙ Ù…Ø¹ Ø³Ø§Ø¹Ø© Ø­ÙŠÙ‘Ø© 12hØŒ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠÙ† Ø§Ù„Ù‡Ø¬Ø±ÙŠ ÙˆØ§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠØŒ Ù…ÙØ­Ø¯Ù‘ÙØ¯ Ø¯ÙˆÙ„Ø© (Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†) Ø¨ÙŠÙ†: Ù„Ø¨Ù†Ø§Ù†ØŒ Ø§Ù„Ø¹Ø±Ø§Ù‚ØŒ Ø¥ÙŠØ±Ø§Ù†ØŒ Ø§Ù„ÙƒÙˆÙŠØªØŒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©.
Ù„Ø§ Ø£Ø¹Ø±Ø¶ ÙƒÙ„Ù…Ø© Ø¬Ø¹ÙØ±ÙŠ ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©ØŒ Ù„ÙƒÙ† Ø§Ù„Ø­Ø³Ø§Ø¨ ÙŠØªÙ… Ø¹Ø¨Ø± Ø·Ø±ÙŠÙ‚Ø© 0 ÙÙŠ API (Ø§Ù„Ù…Ø°Ù‡Ø¨ Ø§Ù„Ø¬Ø¹ÙØ±ÙŠ).

Ø§Ù†Ø³Ø® Ø§Ù„Ù…Ù„Ù Ø§Ù„ØªØ§Ù„ÙŠ ÙƒÙ…Ø§ Ù‡Ùˆ ÙˆØ§ÙØªØ­Ù‡:

<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    /* Ù„ÙˆØ­Ø© Ø¬Ø¯ÙŠØ¯Ø© ØªÙ…Ø§Ù…Ù‹Ø§: ØªØ±ÙƒÙˆØ§Ø²/Ø±Ù…Ù„ÙŠ/ÙØ­Ù…ÙŠ */
    --bg:#f9fafb;
    --ink:#0f172a;
    --muted:#64748b;
    --card:#ffffff;
    --sand:#f6eee3;
    --teal:#0ea5a6;
    --teal-2:#14b8a6;
    --char:#101828;
    --border:#e6e7ea;
    --shadow:0 18px 45px rgba(2,6,23,.08);
    --radius:22px;
    --pill:#eef7f6;
    --warn:#d97706;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:"Tajawal", system-ui, -apple-system, Segoe UI, "Noto Kufi Arabic", sans-serif;
    color:var(--ink); background:
      radial-gradient(900px 600px at 10% 0%, #eaf7f6 0%, transparent 60%),
      radial-gradient(700px 500px at 95% 10%, #f3efe8 0%, transparent 55%),
      var(--bg);
    min-height:100svh; padding:24px;
  }

  .shell{width:min(1200px,100%); margin-inline:auto; display:flex; flex-direction:column; gap:18px; animation:fade .6s ease both}
  @keyframes fade{from{opacity:0; transform:translateY(8px)}to{opacity:1; transform:translateY(0)}}

  /* Ø±Ø£Ø³ Ù…Ø®ØªÙ„Ù Ø¬Ø°Ø±ÙŠÙ‹Ø§ */
  .header{
    display:grid; grid-template-columns: 1.2fr .8fr; gap:16px;
  }
  @media (max-width: 900px){ .header{grid-template-columns:1fr} }

  .hero{
    background:linear-gradient(160deg,#ffffff, #fcfdfc);
    border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
    padding:22px 22px; display:flex; flex-direction:column; gap:10px;
  }
  .hero h1{margin:0; font-size:clamp(1.1rem,2.2vw,1.5rem); font-weight:800; letter-spacing:.2px}
  .sub{
    display:flex; flex-wrap:wrap; gap:10px; align-items:center; color:var(--muted); font-weight:500;
  }
  .pill{
    background:var(--pill); border:1px solid #d9f0ee; color:#075e5a; padding:.35rem .6rem; border-radius:999px; font-size:.86rem; font-weight:700;
  }
  .clock{
    font-variant-numeric:tabular-nums; font-weight:800; font-size:clamp(1rem,3.2vw,1.25rem);
    padding:.5rem .8rem; border:1px dashed #dde8e7; border-radius:14px; background:#fff; color:#083a38;
  }

  .controls{
    background:linear-gradient(145deg,#ffffff,#fffdf9);
    border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
    padding:16px 18px; display:flex; flex-direction:column; gap:12px;
  }
  .controls .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
  label{color:var(--muted); font-weight:600}
  select{
    appearance:none; padding:12px 44px 12px 14px; border-radius:14px; border:1px solid var(--border); background:
      #fff url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 20 20" fill="none"><path d="M5 7l5 6 5-6" stroke="%2364748b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>') no-repeat left 12px center/12px;
    color:#0b132b; font-weight:700; box-shadow:0 1px 0 #00000008;
  }

  /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª: ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯ ØªÙ…Ø§Ù…Ù‹Ø§ */
  .grid{
    display:grid; grid-template-columns: repeat(3, 1fr); gap:16px;
  }
  @media (max-width: 1000px){ .grid{grid-template-columns: repeat(2,1fr)} }
  @media (max-width: 640px){ .grid{grid-template-columns:1fr} }

  .card{
    position:relative; overflow:hidden;
    background:var(--card); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
    padding:18px; display:flex; flex-direction:column; gap:8px; transition:.2s transform;
  }
  .card:hover{ transform: translateY(-2px) }
  .accent{
    position:absolute; inset-inline-start:0; top:0; width:8px; height:100%;
    background:linear-gradient(180deg, var(--teal), var(--teal-2));
  }
  .name{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.1px}
  .name .dot{
    width:28px; height:28px; border-radius:10px; display:grid; place-items:center;
    background:linear-gradient(135deg,#e6fffb,#ffffff); border:1px solid #d7eeec; color:#075e5a; font-size:1rem;
  }
  .time{
    font-variant-numeric:tabular-nums; font-weight:800; font-size:1.35rem; color:var(--char);
  }
  .hint{color:var(--muted); font-size:.9rem}

  /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø­Ø¯ÙŠØ«: Ø³ØªØ§ÙŠÙ„ Ù…Ø®ØªÙ„Ù */
  .hadith{
    background:linear-gradient(180deg,#ffffff,#fefcf8);
    border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
    padding:18px; display:flex; flex-direction:column; gap:8px;
  }
  .hadith .tag{align-self:flex-start; background:#fff3cd; color:#8a5a00; border:1px solid #ffe5a3; border-radius:999px; padding:.3rem .6rem; font-size:.82rem; font-weight:700}
  .hadith p{margin:0; line-height:1.95; font-size:1.02rem}
  .hadith small{color:var(--muted)}

  footer{ text-align:center; color:var(--muted); margin-top:6px; font-weight:700 }
  .brand{ color:var(--teal); }
  .nextBadge{
    position:absolute; top:12px; inset-inline-end:12px; background:#ecfeff; color:#0c4a6e;
    border:1px solid #c7f3f6; border-radius:999px; padding:.25rem .55rem; font-size:.78rem; font-weight:800;
  }
</style>
</head>
<body>
  <div class="shell">
    <!-- Ø±Ø£Ø³ Ø¬Ø¯ÙŠØ¯ ÙƒÙ„ÙŠÙ‹Ø§ -->
    <section class="header" aria-live="polite">
      <div class="hero">
        <h1>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</h1>
        <div class="sub">
          <span id="placeLabel" class="pill">Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† â€“ Ø§Ù„Ù…Ù†Ø§Ù…Ø©</span>
          <span id="hijri" class="pill">--</span>
          <span id="greg" class="pill">--</span>
        </div>
      </div>
      <div class="controls">
        <div class="row">
          <label for="country">Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
          <select id="country" aria-label="Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©">
            <option value="Bahrain" selected>Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</option>
            <option value="Lebanon">Ù„Ø¨Ù†Ø§Ù†</option>
            <option value="Iraq">Ø§Ù„Ø¹Ø±Ø§Ù‚</option>
            <option value="Iran">Ø¥ÙŠØ±Ø§Ù†</option>
            <option value="Kuwait">Ø§Ù„ÙƒÙˆÙŠØª</option>
            <option value="Saudi Arabia">Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option>
          </select>
        </div>
        <div class="row">
          <span class="clock" id="clock">--:-- --</span>
        </div>
      </div>
    </section>

    <!-- Ø´Ø¨ÙƒØ© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª (ØªØµÙ…ÙŠÙ… Ù…Ø®ØªÙ„Ù Ø¬Ø°Ø±ÙŠÙ‹Ø§) -->
    <section class="grid" id="cards">
      <!-- ÙŠÙÙ†Ø´Ø£ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§ -->
    </section>

    <!-- Ø­Ø¯ÙŠØ« Ø§Ù„ÙŠÙˆÙ… -->
    <section class="hadith">
      <span class="tag">ğŸ“– Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ø­ÙƒÙ…Ø©</span>
      <p id="hadithText"></p>
      <small id="hadithSource"></small>
    </section>

    <footer>Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ± <span class="brand">ÙØ§Ø¶Ù„ Ø§Ù„Ø±ÙŠØ³</span></footer>
  </div>

<script>
  /* Ø®Ø±Ø§Ø¦Ø· Ø§Ù„Ø¹ÙˆØ§ØµÙ… ÙˆØ§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© */
  const COUNTRY = {
    "Bahrain":      { city:"Manama",      tz:"Asia/Bahrain",    label:"Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† â€“ Ø§Ù„Ù…Ù†Ø§Ù…Ø©" },
    "Lebanon":      { city:"Beirut",      tz:"Asia/Beirut",     label:"Ù„Ø¨Ù†Ø§Ù† â€“ Ø¨ÙŠØ±ÙˆØª" },
    "Iraq":         { city:"Baghdad",     tz:"Asia/Baghdad",    label:"Ø§Ù„Ø¹Ø±Ø§Ù‚ â€“ Ø¨ØºØ¯Ø§Ø¯" },
    "Iran":         { city:"Tehran",      tz:"Asia/Tehran",     label:"Ø¥ÙŠØ±Ø§Ù† â€“ Ø·Ù‡Ø±Ø§Ù†" },
    "Kuwait":       { city:"Kuwait City", tz:"Asia/Kuwait",     label:"Ø§Ù„ÙƒÙˆÙŠØª â€“ Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„ÙƒÙˆÙŠØª" },
    "Saudi Arabia": { city:"Riyadh",      tz:"Asia/Riyadh",     label:"Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© â€“ Ø§Ù„Ø±ÙŠØ§Ø¶" }
  };

  /* Ø£Ø­Ø§Ø¯ÙŠØ« */
  const HADITHS = [
    { text:"Ù‚Ø§Ù„ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø¨Ø§Ù‚Ø± (Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…): Ø¥Ø°Ø§ Ø§Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù…ØµÙ„ÙŠ Ø§Ù„Ù‚Ø¨Ù„Ø© Ø§Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø±Ø­Ù…Ù† Ø¨ÙˆØ¬Ù‡Ù‡ Ù„Ø§ Ø¥Ù„Ù‡ ØºÙŠØ±Ù‡.", src:"Ø§Ù„Ù…ØµØ¯Ø±: Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ø­ÙƒÙ…Ø©" },
    { text:"Ù‚Ø§Ù„ Ø§Ù„Ø¥Ù…Ø§Ù… Ø¹Ù„ÙŠ (Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…): Ø¥Ø°Ø§ Ù‚Ø§Ù… Ø§Ù„Ø±Ø¬Ù„ Ø¥Ù„Ù‰ Ø§Ù„ØµÙ„Ø§Ø© Ø£Ù‚Ø¨Ù„ Ø¥Ø¨Ù„ÙŠØ³ ÙŠÙ†Ø¸Ø± Ø¥Ù„ÙŠÙ‡ Ø­Ø³Ø¯Ø§Ù‹ Ù„Ù…Ø§ ÙŠØ±Ù‰ Ù…Ù† Ø±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ Ø§Ù„ØªÙŠ ØªØºØ´Ø§Ù‡.", src:"Ø§Ù„Ù…ØµØ¯Ø±: Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ø­ÙƒÙ…Ø©" },
    { text:"Ù‚Ø§Ù„ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø±Ø¶Ø§ (Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…): Ø§Ù„ØµÙ„Ø§Ø© Ù„Ù‡Ø§ Ø£Ø±Ø¨Ø¹Ø© Ø¢Ù„Ø§Ù Ø¨Ø§Ø¨.", src:"Ø§Ù„Ù…ØµØ¯Ø±: Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ø­ÙƒÙ…Ø©" },
    { text:"Ù‚Ø§Ù„ Ø§Ù„Ø¥Ù…Ø§Ù… Ø¹Ù„ÙŠ (Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…): ÙŠØ§ ÙƒÙ…ÙŠÙ„! Ù„ÙŠØ³ Ø§Ù„Ø´Ø£Ù† Ø£Ù† ØªØµÙ„ÙŠ ÙˆØªØµÙˆÙ… ÙˆØªØªØµØ¯Ù‚ØŒ Ø¥Ù†Ù…Ø§ Ø§Ù„Ø´Ø£Ù† Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„ØµÙ„Ø§Ø© ÙØ¹Ù„Øª Ø¨Ù‚Ù„Ø¨ Ù†Ù‚ÙŠØŒ ÙˆØ¹Ù…Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ù„Ù‡ Ù…Ø±Ø¶ÙŠØŒ ÙˆØ®Ø´ÙˆØ¹ Ø³ÙˆÙŠ.", src:"Ø§Ù„Ù…ØµØ¯Ø±: Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ø­ÙƒÙ…Ø©" }
  ];
  function setRandomHadith(){
    const h = HADITHS[Math.floor(Math.random()*HADITHS.length)];
    document.getElementById('hadithText').textContent = h.text;
    document.getElementById('hadithSource').textContent = h.src;
  }

  /* ØªÙ†Ø³ÙŠÙ‚ 12 Ø³Ø§Ø¹Ø© */
  function to12h(t){
    if(!t) return "--:-- --";
    const pure = t.replace(/\s*\(.*?\)\s*/g, "");
    const [H,M] = pure.split(":").map(Number);
    if(Number.isNaN(H)||Number.isNaN(M)) return t;
    let h = H % 12; if(h===0) h = 12;
    const ampm = H < 12 ? "AM" : "PM";
    return `${String(h).padStart(2,"0")}:${String(M).padStart(2,"0")} ${ampm}`;
  }

  /* Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªÙˆØ§Ø±ÙŠØ® */
  function fmtClock(tz){
    return new Intl.DateTimeFormat('en-GB', {timeZone:tz, hour:'2-digit', minute:'2-digit', hour12:true}).format(new Date());
  }
  function fmtGreg(tz){
    return new Intl.DateTimeFormat('ar', {timeZone:tz, weekday:'long', year:'numeric', month:'long', day:'numeric'}).format(new Date());
  }
  function fmtHijri(tz){
    try{
      return new Intl.DateTimeFormat('ar-SA-u-ca-islamic', {timeZone:tz, weekday:'long', year:'numeric', month:'long', day:'numeric'}).format(new Date());
    }catch{ return "Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ (Ù‚Ø¯ Ù„Ø§ ÙŠÙƒÙˆÙ† Ù…Ø¯Ø¹ÙˆÙ…Ù‹Ø§)"; }
  }

  /* Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© ÙˆÙ‚Øª ØµÙ„Ø§Ø© */
  function makeCard({label, icon, time, isNext}){
    const wrap = document.createElement('div');
    wrap.className = 'card';
    wrap.innerHTML = `
      <span class="accent" aria-hidden="true"></span>
      ${isNext ? `<span class="nextBadge">Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</span>` : ``}
      <div class="name"><span class="dot">${icon}</span> <span>${label}</span></div>
      <div class="time">${to12h(time)}</div>
      <div class="hint"></div>
    `;
    return wrap;
  }

  /* ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£Ù‚Ø±Ø¨ */
  function pickNextPrayer(timings, tz){
    const order = ["Imsak","Fajr","Dhuhr","Asr","Maghrib","Isha","Midnight"];
    const now = new Date();
    // Ø­ÙˆÙ‘Ù„ ÙƒÙ„ ÙˆÙ‚Øª Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ… ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
    const nowStr = new Intl.DateTimeFormat('en-CA', {timeZone:tz, year:'numeric', month:'2-digit', day:'2-digit'}).format(now);
    const [Y,M,D] = nowStr.split('-').map(Number);
    const candidates = order.map(k=>{
      const raw = (timings[k]||"").replace(/\s*\(.*?\)\s*/g,"");
      if(!raw.includes(":")) return {k, t:null, diff:Infinity};
      const [HH,MM] = raw.split(':').map(Number);
      const dt = new Date(Date.UTC(Y, M-1, D, HH, MM, 0));
      // Ø¹Ø¯Ù‘Ù„ Ø¥Ù„Ù‰ TZ Ø¹Ø¨Ø± offset ÙØ±Ù‚ Ø¨Ø³ÙŠØ·: Ù†Ø³ØªØ®Ø¯Ù… Intl Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ù„ÙŠ ÙÙ‚Ø· Ù„Ù„ÙØ±Ø²
      const local = new Date(new Date(dt).toLocaleString('en-US', {timeZone: tz}));
      const diff = local - new Date(new Date().toLocaleString('en-US', {timeZone: tz}));
      return {k, t:raw, diff};
    }).filter(x=>x.t);

    // Ø§Ù„ØªØ§Ù„ÙŠ = Ø£Ù‚Ø±Ø¨ ÙØ±Ù‚ ØºÙŠØ± Ø³Ø§Ù„Ø¨ØŒ ÙˆØ¥Ù† Ù„Ù… ÙŠÙˆØ¬Ø¯ ÙØ§Ù„Ø£ÙˆÙ„ ÙÙŠ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ (Ù†Ø®ØªØ§Ø± Ø£ØµØºØ± Ù…Ø·Ù„Ù‚)
    let next = candidates.filter(x=>x.diff>=0).sort((a,b)=>a.diff-b.diff)[0];
    if(!next) next = candidates.sort((a,b)=>Math.abs(a.diff)-Math.abs(b.diff))[0];
    return next ? next.k : null;
  }

  /* Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª (Ø·Ø±ÙŠÙ‚Ø© 0 = Ø¬Ø¹ÙØ±ÙŠ) */
  async function fetchTimings(country){
    const meta = COUNTRY[country] || COUNTRY["Bahrain"];
    const url = `https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(meta.city)}&country=${encodeURIComponent(country)}&method=0`;
    const res = await fetch(url);
    if(!res.ok) throw new Error("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù…Ø²ÙˆØ¯ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª");
    const json = await res.json();
    return {timings: json.data.timings, tz: meta.tz, label: meta.label};
  }

  /* Ø±Ø³Ù… Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯ */
  function renderCards(timings, tz){
    const grid = document.getElementById('cards');
    grid.innerHTML = "";
    const rows = [
      {label:"Ø§Ù„Ø¥Ù…Ø³Ø§Ùƒ",    key:"Imsak",   icon:"ğŸŒ™"},
      {label:"Ø£Ø°Ø§Ù† Ø§Ù„ÙØ¬Ø±", key:"Fajr",    icon:"ğŸ•Œ"},
      {label:"Ø£Ø°Ø§Ù† Ø§Ù„Ø¸Ù‡Ø±", key:"Dhuhr",   icon:"â˜€ï¸"},
      {label:"Ø£Ø°Ø§Ù† Ø§Ù„Ø¹ØµØ±", key:"Asr",     icon:"ğŸŒ¤ï¸"},
      {label:"Ø£Ø°Ø§Ù† Ø§Ù„Ù…ØºØ±Ø¨",key:"Maghrib", icon:"ğŸŒ†"},
      {label:"Ø£Ø°Ø§Ù† Ø§Ù„Ø¹Ø´Ø§Ø¡",key:"Isha",    icon:"ğŸŒ™"},
      {label:"Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„",key:"Midnight",icon:"ğŸŒŒ"}
    ];

    // ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ø¥Ù…Ø³Ø§Ùƒ Ø¹Ù†Ø¯ ØºÙŠØ§Ø¨Ù‡: 10 Ø¯Ù‚Ø§Ø¦Ù‚ Ù‚Ø¨Ù„ Ø§Ù„ÙØ¬Ø±
    if(!timings.Imsak && timings.Fajr){
      const pure = timings.Fajr.replace(/\s*\(.*?\)\s*/g,"");
      const [H,M] = pure.split(":").map(Number);
      const d = new Date(); d.setHours(H, M-10, 0, 0);
      const hh = String(d.getHours()).padStart(2,"0");
      const mm = String(d.getMinutes()).padStart(2,"0");
      timings.Imsak = `${hh}:${mm}`;
    }

    const nextKey = pickNextPrayer(timings, tz);

    rows.forEach(r=>{
      const c = makeCard({label:r.label, icon:r.icon, time:timings[r.key]||"", isNext: r.key===nextKey});
      grid.appendChild(c);
    });
  }

  /* ØªØ­Ø¯ÙŠØ« Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© */
  function updateHeader(tz, label){
    document.getElementById('placeLabel').textContent = label;
    document.getElementById('clock').textContent = fmtClock(tz);
    document.getElementById('greg').textContent = fmtGreg(tz);
    document.getElementById('hijri').textContent = fmtHijri(tz);
  }

  /* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© */
  async function load(country){
    const loadingHTML = `
      <div class="card"><span class="accent"></span><div class="name"><span class="dot">â³</span> ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØªâ€¦</div></div>
      <div class="card"><span class="accent"></span></div>
      <div class="card"><span class="accent"></span></div>`;
    document.getElementById('cards').innerHTML = loadingHTML;

    try{
      const {timings, tz, label} = await fetchTimings(country);
      renderCards(timings, tz);
      updateHeader(tz, label);

      clearInterval(window._clk);
      window._clk = setInterval(()=> {
        document.getElementById('clock').textContent = fmtClock(tz);
      }, 1000);
    }catch(e){
      console.error(e);
      document.getElementById('cards').innerHTML = `<div class="card"><span class="accent"></span>ØªØ¹Ø°Ù‘Ø± Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§.</div>`;
    }
  }

  /* ØªÙ‡ÙŠØ¦Ø© ÙƒØ§Ù…Ù„Ø© */
  function init(){
    setRandomHadith();
    const sel = document.getElementById('country');
    sel.addEventListener('change', ()=> load(sel.value));
    load(sel.value); // Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†
  }
  init();
</script>
</body>
</html>

Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¶Ø§ÙØ© Ø¹Ø¯Ø§Ø¯ ØªÙ†Ø§Ø²Ù„ÙŠ Ø£Ø³ÙÙ„ Â«Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©Â»ØŒ Ø£Ùˆ ØµÙˆØª ØªÙ†Ø¨ÙŠÙ‡ Ø®ÙÙŠÙ Ù‚Ø¨Ù„ Ø§Ù„Ø£Ø°Ø§Ù† Ø¨Ø¯Ù‚Ø§Ø¦Ù‚ØŸ Ø£Ø¶ÙŠÙÙ‡Ø§ ÙÙˆØ±Ù‹Ø§ Ø¹Ù„Ù‰ Ù†ÙØ³ Ø§Ù„ØªØµÙ…ÙŠÙ….

