<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ø³ÙŠØ±Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© â€” Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† (+973 Ø«Ø§Ø¨ØªØŒ Ù‚ÙˆØ§Ø¦Ù… Ù…Ù†Ø³Ø¯Ù„Ø©)</title>
<style>
  :root{
    --bg:#ffffff; --fg:#0f172a; --muted:#475569;
    --accent:#C7A046; --accent-weak:#EAD9A2; --border:#e5e7eb;
    --chip:#f8fafc; --radius:14px; --shadow:0 8px 28px rgba(15,23,42,.06);
  }
  html,body{background:var(--bg);color:var(--fg);font-family:"Cairo","Noto Naskh Arabic",system-ui,Arial;line-height:1.5}
  *{box-sizing:border-box}
  .wrap{max-width:940px;margin:20px auto;padding:0 14px}
  .stepper{position:sticky;top:0;z-index:5;background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:10px 12px;margin-bottom:14px}
  .steps{display:flex;align-items:center;gap:8px;justify-content:space-between}
  .step{display:flex;gap:8px;align-items:center;opacity:.6}.step.active{opacity:1}
  .dot{width:26px;height:26px;border-radius:999px;background:var(--accent-weak);display:inline-flex;align-items:center;justify-content:center;font-weight:800;color:#7a5a16}
  .bar{height:3px;background:var(--accent-weak);border-radius:99px;flex:1}
  .card{background:#fff;border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:12px}
  .card-h{padding:14px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
  .card-h h2{margin:0;font-size:16px}
  .toggle{width:34px;height:34px;border-radius:10px;border:1px solid var(--border);background:#fff;cursor:pointer;font-weight:800}
  .card-b{padding:14px 16px}
  .row{display:grid;gap:10px}
  .two{grid-template-columns:1fr}
  @media(min-width:640px){.two{grid-template-columns:1fr 1fr}}
  label{font-size:13px;color:var(--muted);font-weight:700}
  input[type="text"],input[type="email"],input[type="url"],textarea,select{
    width:100%;border:1px solid var(--border);border-radius:10px;padding:10px 12px;background:#fff;outline:none
  }
  textarea{min-height:90px;resize:vertical}
  input:focus,textarea:focus,select:focus{border-color:var(--accent)}
  .hint{font-size:12px;color:var(--muted)}
  .chipline{display:flex;flex-wrap:wrap;gap:8px}
  .chip{padding:6px 10px;border:1px solid var(--border);background:var(--chip);border-radius:999px;font-size:12px}

  /* Phone group (+973 fixed) */
  .phone-group{display:flex;align-items:center;border:1px solid var(--border);border-radius:10px;overflow:hidden;background:#fff}
  .prefix{background:#fafaf9;color:#7a5a16;border-inline-end:1px solid var(--border);padding:10px 12px;font-weight:800;white-space:nowrap}
  .phone-input{border:none;flex:1;padding:10px 12px;outline:none}
  .phone-input:focus{box-shadow:inset 0 0 0 2px var(--accent-weak)}

  /* Preview */
  .cv{border:1px solid var(--border);border-radius:12px;padding:22px}
  .cv h1{font-size:22px;margin:0 0 4px;font-weight:900}
  .cv .sub{color:var(--muted);margin:0 0 10px}
  .cv .barline{height:2px;background:var(--accent);margin:8px 0 14px}
  .cv .sec{margin-bottom:14px}
  .cv .sec h3{font-size:14px;margin:0 0 6px;position:relative;padding-bottom:5px}
  .cv .sec h3:after{content:"";position:absolute;inset-inline:0;bottom:0;height:2px;background:var(--accent-weak)}
  .cv .meta{font-size:12px;color:var(--muted)}
  .cv ul{margin:6px 0 0 18px} .cv li{margin:4px 0}
  .cv .chipline .chip{font-size:11px}

  /* Bottom bar */
  .bottom-bar{position:sticky;bottom:0;background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);margin:14px 0;padding:10px 12px;display:flex;gap:8px;justify-content:center;align-items:center}
  .btn{border:1px solid var(--accent);background:var(--accent);color:#fff;padding:9px 12px;border-radius:10px;cursor:pointer;font-weight:700}
  .btn.ghost{background:#fff;color:var(--accent)}
  .btn[disabled]{opacity:.5;cursor:not-allowed}
  .hide{display:none}
  @page{size:A4;margin:18mm}
  @media print{.no-print{display:none!important}.cv{border:none;padding:0}}
</style>
</head>
<body>
<div class="wrap">

  <!-- Stepper -->
  <div class="stepper no-print">
    <div class="steps">
      <div class="step active"><span class="dot">1</span><strong>Ø´Ø®ØµÙŠ</strong></div>
      <div class="bar"></div>
      <div class="step"><span class="dot">2</span><strong>Ø®Ø¨Ø±Ø§Øª/ØªØ¹Ù„ÙŠÙ…/Ù…Ù‡Ø§Ø±Ø§Øª</strong></div>
      <div class="bar"></div>
      <div class="step"><span class="dot">3</span><strong>Ù…Ø¹Ø§ÙŠÙ†Ø©</strong></div>
    </div>
  </div>

  <!-- Ø´Ø®ØµÙŠ -->
  <section class="card">
    <div class="card-h"><h2>Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø®ØµÙŠØ©</h2><button class="toggle" aria-expanded="true">+</button></div>
    <div class="card-b">
      <div class="row two">
        <div><label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *</label><input id="fullName" type="text" required placeholder="Ù…Ø«Ø§Ù„: Ø¹Ù„ÙŠ Ø­Ø³Ù† Ù…Ø­Ù…Ø¯"></div>
        <div><label>Ø§Ù„Ù…Ø³Ù…Ù‘Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù *</label><input id="title" type="text" required placeholder="Ù…Ø«Ø§Ù„: Ù…Ø·ÙˆÙ‘Ø± Ø¨Ø±Ù…Ø¬ÙŠØ§Øª"></div>
        <div><label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *</label><input id="email" type="email" required placeholder="name@example.com"></div>
        <div>
          <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†) *</label>
          <div class="phone-group">
            <span class="prefix">+973</span>
            <input id="phoneDigits" class="phone-input" type="text" inputmode="numeric" pattern="\\d{8}" maxlength="8" placeholder="Ø£Ø¯Ø®Ù„ 8 Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·">
          </div>
          <div class="hint">Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø© +973 Ø«Ø§Ø¨ØªØ© â€” Ø§ÙƒØªØ¨ Ø§Ù„Ø«Ù…Ø§Ù†ÙŠØ© Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·.</div>
        </div>
        <div><label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© / Ø§Ù„Ø¯ÙˆÙ„Ø© *</label><input id="location" type="text" value="Ø§Ù„Ù…Ù†Ø§Ù…Ø©ØŒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†" required></div>
        <div>
          <label>Ø§Ù„Ø¬Ù†Ø³ÙŠØ© *</label>
          <select id="nationality" required>
            <option value="">Ø§Ø®ØªØ±â€¦</option>
            <option>Ø¨Ø­Ø±ÙŠÙ†ÙŠØ©</option><option>Ø³Ø¹ÙˆØ¯ÙŠØ©</option><option>Ø¥Ù…Ø§Ø±Ø§ØªÙŠØ©</option><option>ÙƒÙˆÙŠØªÙŠØ©</option><option>Ø¹ÙÙ…Ø§Ù†ÙŠØ©</option>
            <option>Ø£Ø±Ø¯Ù†ÙŠØ©</option><option>Ù…ØµØ±ÙŠØ©</option><option>Ø³ÙˆØ±ÙŠØ©</option><option>Ù„Ø¨Ù†Ø§Ù†ÙŠØ©</option><option>ÙÙ„Ø³Ø·ÙŠÙ†ÙŠØ©</option>
            <option>ÙŠÙ…Ù†ÙŠØ©</option><option>Ø³ÙˆØ¯Ø§Ù†ÙŠØ©</option><option>Ù…ØºØ±Ø¨ÙŠØ©</option><option>Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©</option><option>ØªÙˆÙ†Ø³ÙŠØ©</option>
            <option>Ù‡Ù†Ø¯ÙŠØ©</option><option>Ø¨Ø§ÙƒØ³ØªØ§Ù†ÙŠØ©</option><option>Ø¨Ù†ØºÙ„Ø§Ø¯ÙŠØ´ÙŠØ©</option><option>ÙÙ„Ø¨ÙŠÙ†ÙŠØ©</option>
            <option>Ø£Ø®Ø±Ù‰</option>
          </select>
        </div>
      </div>

      <div class="row two">
        <div>
          <label>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¹Ù„Ù…ÙŠ *</label>
          <select id="eduLevel" required>
            <option value="">Ø§Ø®ØªØ±â€¦</option>
            <option>Ø«Ø§Ù†ÙˆÙŠ</option><option>Ø¯Ø¨Ù„ÙˆÙ…</option><option>Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠÙˆØ³</option><option>Ù…Ø§Ø¬Ø³ØªÙŠØ±</option><option>Ø¯ÙƒØªÙˆØ±Ø§Ù‡</option><option>Ø£Ø®Ø±Ù‰</option>
          </select>
        </div>
        <div>
          <label>Ù„Ø¯ÙŠÙƒ Ø±Ø®ØµØ© Ù‚ÙŠØ§Ø¯Ø©ØŸ *</label>
          <select id="hasLicense" required>
            <option value="">Ø§Ø®ØªØ±â€¦</option><option>Ù†Ø¹Ù…</option><option>Ù„Ø§</option>
          </select>
        </div>
        <div>
          <label>Ù„Ø¯ÙŠÙƒ Ù…ÙˆØ§ØµÙ„Ø§ØªØŸ *</label>
          <select id="hasTransport" required>
            <option value="">Ø§Ø®ØªØ±â€¦</option><option>Ù†Ø¹Ù…</option><option>Ù„Ø§</option>
          </select>
        </div>
        <div>
          <label>Ø§Ù„ØªØ®ØµØµ (Ù‚Ø§Ø¦Ù…Ø©) *</label>
          <select id="majorList" required>
            <option value="">Ø§Ø®ØªØ±â€¦</option>
            <option>Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³Ø¨</option><option>Ù‡Ù†Ø¯Ø³Ø© Ø¨Ø±Ù…Ø¬ÙŠØ§Øª</option><option>Ù†Ø¸Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</option>
            <option>Ù…Ø­Ø§Ø³Ø¨Ø©</option><option>Ø¥Ø¯Ø§Ø±Ø© Ø£Ø¹Ù…Ø§Ù„</option><option>Ù…Ø§Ù„ÙŠØ©</option><option>ØªØ³ÙˆÙŠÙ‚</option><option>Ù…ÙˆØ§Ø±Ø¯ Ø¨Ø´Ø±ÙŠØ©</option>
            <option>Ù‡Ù†Ø¯Ø³Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©</option><option>Ù‡Ù†Ø¯Ø³Ø© Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠØ©</option><option>Ù‡Ù†Ø¯Ø³Ø© Ù…Ø¯Ù†ÙŠØ©</option>
            <option>ØªÙ…Ø±ÙŠØ¶</option><option>ØµÙŠØ¯Ù„Ø©</option><option>Ù‚Ø§Ù†ÙˆÙ†</option><option>Ø¢Ø¯Ø§Ø¨ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</option>
            <option>ØªØµÙ…ÙŠÙ… Ø¬Ø±Ø§ÙÙŠÙƒ</option><option>Ø¹Ù…Ø§Ø±Ø©</option><option>ØªØ¹Ù„ÙŠÙ…</option>
            <option value="other">Ø£Ø®Ø±Ù‰ (Ø³Ø£ÙƒØªØ¨Ù‡Ø§)</option>
          </select>
        </div>
      </div>

      <div id="majorCustomBox" class="row hide">
        <div><label>Ø§ÙƒØªØ¨ ØªØ®ØµØµÙƒ</label><input id="majorCustom" type="text" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ù„ÙˆÙ… Ø¨ÙŠØ§Ù†Ø§Øª"></div>
      </div>

      <div style="margin-top:6px">
        <label>Ø§Ù„Ù„ØºØ§Øª (Ø¶Ø¹ âœ”ï¸ Ø¹Ù„Ù‰ Ù…Ø§ ØªØ¹Ø±ÙÙ‡)</label>
        <div class="chipline" id="langChecks" role="group" aria-label="Ø§Ù„Ù„ØºØ§Øª">
          <label class="chip"><input type="checkbox" value="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"> Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</label>
          <label class="chip"><input type="checkbox" value="Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"> Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</label>
          <label class="chip"><input type="checkbox" value="Ø§Ù„Ù‡Ù†Ø¯ÙŠØ©"> Ø§Ù„Ù‡Ù†Ø¯ÙŠØ©</label>
          <label class="chip"><input type="checkbox" value="Ø§Ù„Ø£ÙˆØ±Ø¯Ùˆ"> Ø§Ù„Ø£ÙˆØ±Ø¯Ùˆ</label>
          <label class="chip"><input type="checkbox" value="Ø§Ù„Ø¨Ù†ØºØ§Ù„ÙŠØ©"> Ø§Ù„Ø¨Ù†ØºØ§Ù„ÙŠØ©</label>
          <label class="chip"><input type="checkbox" value="Ø§Ù„ÙÙ„Ø¨ÙŠÙ†ÙŠØ©"> Ø§Ù„ÙÙ„Ø¨ÙŠÙ†ÙŠØ©</label>
          <label class="chip"><input type="checkbox" value="Ø£Ø®Ø±Ù‰"> Ø£Ø®Ø±Ù‰</label>
        </div>
      </div>

      <div style="margin-top:6px">
        <label>Ù…Ù„Ø®Ù‘Øµ Ù…Ù‡Ù†ÙŠ (3â€“4 Ø¬Ù…Ù„)</label>
        <textarea id="summary" maxlength="450" placeholder="Ù…Ø®ØªØµØ± Ù‚ÙˆÙŠ ÙŠØ¨Ø±Ø² Ø§Ù„Ù‚ÙŠÙ…Ø© ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù…"></textarea>
        <div class="hint"><span id="sumCount">0</span> / 450</div>
      </div>
    </div>
  </section>

  <!-- ØªØ¹Ù„ÙŠÙ…: Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©/Ø§Ù„Ù…Ø¹Ù‡Ø¯ -->
  <section class="card">
    <div class="card-h"><h2>Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</h2><button class="toggle" aria-expanded="true">+</button></div>
    <div class="card-b">
      <div class="row two">
        <div>
          <label>Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©/Ø§Ù„Ù…Ø¹Ù‡Ø¯ (Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†)</label>
          <select id="bhInstitution">
            <option value="">Ø§Ø®ØªØ±â€¦</option>
            <option>Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</option>
            <option>Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø®Ù„ÙŠØ¬ Ø§Ù„Ø¹Ø±Ø¨ÙŠ</option>
            <option>Ø¬Ø§Ù…Ø¹Ø© Ø¨ÙˆÙ„ÙŠØªÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</option>
            <option>Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ©</option>
            <option>Ø¬Ø§Ù…Ø¹Ø© Ø£Ù‡Ù„ÙŠØ©</option>
            <option>Ø¬Ø§Ù…Ø¹Ø© AMA Ø§Ù„Ø¯ÙˆÙ„ÙŠØ© Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</option>
            <option>Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø®Ù„ÙŠØ¬ (Gulf University)</option>
            <option>Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…Ù…Ù„ÙƒØ©</option>
            <option>RCSI Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† (Ø§Ù„ÙƒÙ„ÙŠØ© Ø§Ù„Ù…Ù„ÙƒÙŠØ© Ù„Ù„Ø¬Ø±Ø§Ø­ÙŠÙ†)</option>
            <option>Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ© Ù„Ù„Ø¨Ù†Ø§Øª</option>
            <option>BIBF Ù…Ø¹Ù‡Ø¯ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† Ù„Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ù…ØµØ±ÙÙŠØ© ÙˆØ§Ù„Ù…Ø§Ù„ÙŠØ©</option>
            <option>Ù…Ø¹Ù‡Ø¯ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† Ù„Ù„ØªØ¯Ø±ÙŠØ¨ BTI</option>
            <option value="abroad">Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</option>
          </select>
        </div>
        <div>
          <label>Ø³Ù†Ø©/Ø´Ù‡Ø± Ø§Ù„ØªØ®Ø±Ø¬</label>
          <input id="gradDate" type="text" placeholder="YYYY-MM">
        </div>
      </div>

      <!-- Ø¥Ø°Ø§ ÙƒØ§Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† -->
      <div id="abroadBox" class="row hide">
        <div>
          <label>Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
          <select id="country">
            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©â€¦</option>
            <option>Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option><option>Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</option><option>Ø§Ù„ÙƒÙˆÙŠØª</option><option>Ø¹ÙÙ…Ø§Ù†</option><option>Ù‚Ø·Ø±</option>
            <option>Ø§Ù„Ø£Ø±Ø¯Ù†</option><option>Ù…ØµØ±</option><option>Ø§Ù„Ø¹Ø±Ø§Ù‚</option><option>Ø§Ù„Ù…ØºØ±Ø¨</option><option>ØªÙˆÙ†Ø³</option><option>Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</option><option>Ø§Ù„Ø³ÙˆØ¯Ø§Ù†</option><option>Ø§Ù„ÙŠÙ…Ù†</option><option>Ù„Ø¨Ù†Ø§Ù†</option><option>Ø³ÙˆØ±ÙŠØ©</option>
            <option>Ø§Ù„Ù‡Ù†Ø¯</option><option>Ø¨Ø§ÙƒØ³ØªØ§Ù†</option><option>Ø¨Ù†ØºÙ„Ø§Ø¯ÙŠØ´</option><option>Ø§Ù„ÙÙ„Ø¨ÙŠÙ†</option><option>Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©</option><option>Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©</option><option>ÙƒÙ†Ø¯Ø§</option><option>Ø£Ù„Ù…Ø§Ù†ÙŠØ§</option><option>ÙØ±Ù†Ø³Ø§</option><option>ØªØ±ÙƒÙŠØ§</option>
            <option>Ø£Ø®Ø±Ù‰</option>
          </select>
        </div>
        <div><label>Ø§Ø³Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©</label><input id="uniName" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©"></div>
        <div><label>Ø§Ù„ØªØ®ØµØµ</label><input id="uniMajor" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ØªØ®ØµØµ"></div>
      </div>
    </div>
  </section>

  <!-- Ø®Ø¨Ø±Ø© Ù…Ø®ØªØµØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) -->
  <section class="card">
    <div class="card-h"><h2>Ø®Ø¨Ø±Ø© Ø¹Ù…Ù„ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</h2><button class="toggle" aria-expanded="false">+</button></div>
    <div class="card-b hide" id="expWrap">
      <div id="expList"></div>
      <button class="btn" id="addExp">+ Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø±Ø©</button>
    </div>
  </section>

  <!-- Ù…Ù‡Ø§Ø±Ø§Øª (ÙƒÙˆØ³ÙˆÙ… ØªÙØ³ØªØ®Ø±Ø¬ Ù…Ù† Ø§Ù„Ù„ØºØ§Øª/Ø§Ù„ØªØ®ØµØµ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¥Ø°Ø§ Ø±ØºØ¨Øª) -->

  <!-- Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© -->
  <section class="card">
    <div class="card-h"><h2>Ù…Ø¹Ø§ÙŠÙ†Ø©</h2><button class="toggle" aria-expanded="true">+</button></div>
    <div class="card-b">
      <article id="cv" class="cv">
        <h1 id="v_name">Ø§Ø³Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù‘Ù…</h1>
        <p class="sub" id="v_title">Ø§Ù„Ù…Ø³Ù…Ù‘Ù‰ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù</p>
        <div class="meta" id="v_contacts">email@example.com Â· +973 3xxxxxxx Â· Ø§Ù„Ù…Ù†Ø§Ù…Ø©ØŒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</div>
        <div class="barline"></div>

        <section class="sec" id="sec_summary" hidden>
          <h3>Ø§Ù„Ù…Ù„Ø®Ù‘Øµ</h3><p id="v_summary"></p>
        </section>

        <section class="sec" id="sec_edu" hidden>
          <h3>Ø§Ù„ØªØ¹Ù„ÙŠÙ…</h3>
          <div id="v_edu"></div>
        </section>

        <section class="sec" id="sec_langs" hidden>
          <h3>Ø§Ù„Ù„ØºØ§Øª</h3>
          <div id="v_langs"></div>
        </section>

        <section class="sec" id="sec_exp" hidden>
          <h3>Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</h3>
          <div id="v_exp"></div>
        </section>
      </article>
    </div>
  </section>

  <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙÙ„ÙŠ -->
  <div class="bottom-bar no-print">
    <span id="readyMsg" class="hint">Ø£ÙƒÙ…Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø«Ù… Ø§Ø®ØªØ± Ø§Ù„ØªÙ†Ø²ÙŠÙ„:</span>
    <button class="btn" id="btnPdf" disabled>ğŸ–¨ï¸ PDF</button>
    <button class="btn ghost" id="btnDoc" disabled>â¬‡ï¸ Word</button>
    <button class="btn ghost" id="btnSave" disabled>ğŸ’¾ JSON</button>
  </div>

</div>

<script>
(()=> {
  const $=(s,r=document)=>r.querySelector(s), $$=(s,r=document)=>Array.from(r.querySelectorAll(s));
  // Accordion
  $$('.toggle').forEach(btn=>{
    const body=btn.parentElement.nextElementSibling;
    btn.addEventListener('click', ()=>{ body.classList.toggle('hide'); btn.setAttribute('aria-expanded', String(!body.classList.contains('hide'))); });
  });

  // Basic refs
  const fullName=$('#fullName'), title=$('#title'), email=$('#email'),
        phoneDigits=$('#phoneDigits'), locationInput=$('#location'),
        nationality=$('#nationality'), eduLevel=$('#eduLevel'),
        hasLicense=$('#hasLicense'), hasTransport=$('#hasTransport'),
        majorList=$('#majorList'), majorCustomBox=$('#majorCustomBox'), majorCustom=$('#majorCustom'),
        summary=$('#summary'), sumCount=$('#sumCount');

  // Bahrain phone: +973 fixed
  function sanitize(s){return (s||'').toString().replace(/\s+/g,' ').trim();}
  function bhPhone(){ const d=(phoneDigits.value||'').replace(/\D/g,'').slice(0,8); phoneDigits.value=d; return d?`+973${d}`:''; }

  // Major custom toggle
  majorList.addEventListener('change', ()=>{
    const isOther = majorList.value==='other';
    majorCustomBox.classList.toggle('hide', !isOther);
    if(!isOther) majorCustom.value='';
    renderEducation();
  });

  // Institution logic
  const bhInstitution=$('#bhInstitution'), abroadBox=$('#abroadBox'),
        country=$('#country'), uniName=$('#uniName'), uniMajor=$('#uniMajor'), gradDate=$('#gradDate');
  bhInstitution.addEventListener('change', ()=>{
    const abroad = bhInstitution.value==='abroad';
    abroadBox.classList.toggle('hide', !abroad);
    renderEducation();
  });

  // Languages (checkboxes)
  const langChecks=$$('#langChecks input[type="checkbox"]');
  langChecks.forEach(cb=>cb.addEventListener('change', renderLangs));

  // Experience (simple bullets)
  const expList=$('#expList'); $('#addExp').addEventListener('click', ()=>{ if($$('#expList .rep').length<3) expList.appendChild(expItem()); renderExp(); });
  function expItem(d={}){ d=Object.assign({role:'',company:'',loc:'Ø§Ù„Ù…Ù†Ø§Ù…Ø©ØŒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†',start:'',end:'',b1:'',b2:''},d);
    const w=document.createElement('div'); w.className='rep';
    w.innerHTML=`
      <div class="row two">
        <div><label>Ø§Ù„Ù…Ø³Ù…Ù‘Ù‰</label><input class="role" type="text" value="${d.role}" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ø§Ø³Ø¨"></div>
        <div><label>Ø§Ù„Ø´Ø±ÙƒØ©</label><input class="company" type="text" value="${d.company}" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©"></div>
        <div><label>Ø§Ù„Ù…ÙˆÙ‚Ø¹</label><input class="loc" type="text" value="${d.loc}"></div>
        <div><label>Ø§Ù„ÙØªØ±Ø©</label><div style="display:flex;gap:8px"><input class="start" type="text" placeholder="YYYY-MM" value="${d.start}" style="flex:1"><input class="end" type="text" placeholder="YYYY-MM Ø£Ùˆ Ø­Ø§Ø¶Ø±" value="${d.end}" style="flex:1"></div></div>
        <div><label>Ø¥Ù†Ø¬Ø§Ø² #1</label><input class="b1" type="text" value="${d.b1}" placeholder="Ù…Ø«Ø§Ù„: Ø­Ø³Ù‘Ù†Øª Ø§Ù„ØªØ­ØµÙŠÙ„ 18%"></div>
        <div><label>Ø¥Ù†Ø¬Ø§Ø² #2</label><input class="b2" type="text" value="${d.b2}" placeholder="Ù…Ø«Ø§Ù„: Ø®ÙÙ‘Ø¶Øª Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ 30%"></div>
      </div>`;
    w.addEventListener('input', renderExp);
    return w;
  }

  // Preview header
  function updateHeader(){
    $('#v_name').textContent = sanitize(fullName.value) || 'Ø§Ø³Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù‘Ù…';
    $('#v_title').textContent = sanitize(title.value) || 'Ø§Ù„Ù…Ø³Ù…Ù‘Ù‰ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù';
    const contacts = [
      sanitize(email.value),
      bhPhone() || '',
      sanitize(locationInput.value||'Ø§Ù„Ù…Ù†Ø§Ù…Ø©ØŒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†')
    ].filter(Boolean).join(' Â· ');
    $('#v_contacts').textContent = contacts || 'email@example.com Â· +973 3xxxxxxx Â· Ø§Ù„Ù…Ù†Ø§Ù…Ø©ØŒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†';
    checkReady();
  }
  [fullName,title,email,phoneDigits,locationInput].forEach(el=>el.addEventListener('input', updateHeader));
  [nationality,eduLevel,hasLicense,hasTransport].forEach(el=>el.addEventListener('change', checkReady));

  // Summary
  summary.addEventListener('input', e=>{
    sumCount.textContent=e.target.value.length;
    const v=sanitize(e.target.value); $('#v_summary').textContent=v; $('#sec_summary').hidden=!v;
  });

  // Education render
  function currentMajor(){
    return majorList.value==='other' ? sanitize(majorCustom.value) : (majorList.value||'');
  }
  function renderEducation(){
    const v=$('#v_edu'); v.innerHTML='';
    let line='';
    const m=currentMajor();
    if(bhInstitution.value && bhInstitution.value!=='abroad'){
      line = [bhInstitution.value, m].filter(Boolean).join(' â€” ');
    }else if(bhInstitution.value==='abroad'){
      const parts=[sanitize(uniName.value), sanitize(country.value), m].filter(Boolean);
      line = parts.join(' â€” ');
    }
    if(!line && !gradDate.value){ $('#sec_edu').hidden=true; return; }
    const div=document.createElement('div'); div.className='item';
    div.innerHTML = `<div><strong>${line||'Ù…Ø¤Ø³Ø³Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©'}</strong></div><div class="meta">${gradDate.value||''} Â· ${eduLevel.value||''}</div>`;
    v.appendChild(div); $('#sec_edu').hidden=false;
    checkReady();
  }
  [bhInstitution,gradDate,country,uniName,uniMajor,majorCustom,majorList].forEach(el=>el.addEventListener('input', renderEducation));
  [eduLevel].forEach(el=>el.addEventListener('change', renderEducation));

  // Languages render
  function renderLangs(){
    const v=$('#v_langs'); v.innerHTML='';
    const chosen = langChecks.filter(cb=>cb.checked).map(cb=>cb.value);
    chosen.forEach(t=>{ const p=document.createElement('p'); p.className='meta'; p.textContent='â€¢ '+t; v.appendChild(p); });
    $('#sec_langs').hidden = chosen.length===0;
  }

  // Experience render
  function renderExp(){
    const v=$('#v_exp'); v.innerHTML='';
    $$('#expList .rep').forEach(rep=>{
      const role=sanitize($('.role',rep).value), company=sanitize($('.company',rep).value),
            loc=sanitize($('.loc',rep).value), st=sanitize($('.start',rep).value), en=sanitize($('.end',rep).value),
            b1=sanitize($('.b1',rep).value), b2=sanitize($('.b2',rep).value);
      if(!(role||company||b1||b2)) return;
      const it=document.createElement('div'); it.className='item';
      it.innerHTML = `<div><strong>${role}</strong><span class="meta"> ${company?(' â€” '+company):''}</span></div>
                      <div class="meta">${[loc,[st,en].filter(Boolean).join(' â€“ ')].filter(Boolean).join(' Â· ')}</div>`;
      const ul=document.createElement('ul'); [b1,b2].filter(Boolean).forEach(t=>{const li=document.createElement('li'); li.textContent=t; ul.appendChild(li);});
      it.appendChild(ul); v.appendChild(it);
    });
    $('#sec_exp').hidden = v.children.length===0;
  }

  // Ready / buttons
  const btnPdf=$('#btnPdf'), btnDoc=$('#btnDoc'), btnSave=$('#btnSave'), readyMsg=$('#readyMsg');
  function isReady(){
    const okName=!!sanitize(fullName.value);
    const okTitle=!!sanitize(title.value);
    const okEmail=!!sanitize(email.value);
    const okPhone=(phoneDigits.value||'').replace(/\D/g,'').length===8;
    const okLoc=!!sanitize(locationInput.value);
    const okNat=!!nationality.value;
    const okLevel=!!eduLevel.value;
    const okLicense=!!hasLicense.value;
    const okTransport=!!hasTransport.value;
    const okMajor = majorList.value ? (majorList.value==='other' ? !!sanitize(majorCustom.value) : true) : false;
    return okName&&okTitle&&okEmail&&okPhone&&okLoc&&okNat&&okLevel&&okLicense&&okTransport&&okMajor;
  }
  function checkReady(){
    const ready=isReady();
    [btnPdf,btnDoc,btnSave].forEach(b=>b.disabled=!ready);
    readyMsg.textContent = ready ? 'Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙ†Ø²ÙŠÙ„. Ø§Ø®ØªØ± Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ù…ÙØ¶Ù„Ø©:' : 'Ø£ÙƒÙ…Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø«Ù… Ø§Ø®ØªØ± Ø§Ù„ØªÙ†Ø²ÙŠÙ„:';
  }

  // Export
  btnPdf.addEventListener('click', ()=>{ if(isReady()) window.print(); });
  btnDoc.addEventListener('click', ()=>{
    if(!isReady()) return;
    const dir=document.documentElement.getAttribute('dir')||'rtl';
    const cv=$('#cv').cloneNode(true);
    const styles=`<style>
      body{font-family:"Cairo","Noto Naskh Arabic",Arial;direction:${dir};color:#0F172A}
      h1{margin:0 0 4px;font-size:22px} h3{margin:10px 0 6px;font-size:14px}
      .meta{color:#475569;font-size:12px} .barline{height:2px;background:#C7A046;margin:8px 0 14px}
      .chip{display:inline-block;margin:2px 4px;padding:3px 8px;border:1px solid #E5E7EB;border-radius:999px;font-size:11px;background:#F8FAFC}
      ul{margin:6px 0 0 18px} li{margin:4px 0}
    </style>`;
    const html=`<!DOCTYPE html><html><head><meta charset="utf-8"><title>CV</title>${styles}</head><body>${cv.outerHTML}</body></html>`;
    const blob=new Blob([html],{type:'application/msword'});
    const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='CV-Bahrain.doc'; a.click();
    setTimeout(()=>URL.revokeObjectURL(url),200);
  });
  btnSave.addEventListener('click', ()=>{
    if(!isReady()) return;
    const langs = $$('#langChecks input:checked').map(cb=>cb.value);
    const data={
      basics:{
        name:sanitize(fullName.value), title:sanitize(title.value), email:sanitize(email.value),
        phone: bhPhone(), location:sanitize(locationInput.value), nationality:nationality.value,
        eduLevel: eduLevel.value, hasLicense: hasLicense.value, hasTransport: hasTransport.value,
        major: currentMajor(), summary:sanitize(summary.value)
      },
      education: (()=>{
        if(bhInstitution.value==='abroad'){
          return {type:'abroad', country:country.value, university:sanitize(uniName.value), major:sanitize(uniMajor.value), grad:gradDate.value};
        }else{
          return {type:'bahrain', institution:bhInstitution.value, grad:gradDate.value};
        }
      })(),
      languages: langs
    };
    const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
    const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='cv-bahrain.json'; a.click();
    setTimeout(()=>URL.revokeObjectURL(url),200);
  });

  // Live bindings
  [nationality,eduLevel,hasLicense,hasTransport].forEach(el=>el.addEventListener('change', checkReady));
  [fullName,title,email,phoneDigits,locationInput,majorCustom].forEach(el=>el.addEventListener('input', checkReady));
  summary.addEventListener('input', ()=>{}); // counter Ø£Ø¹Ù„Ø§Ù‡

  // Initial render
  updateHeader(); renderEducation(); renderLangs(); renderExp(); checkReady();
})();
</script>
</body>
</html>
