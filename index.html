<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø®Ø³ÙˆÙ ÙˆØ§Ù„ÙƒØ³ÙˆÙ â€¢ ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª</title>
<meta name="description" content="Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø®Ø³ÙˆÙ ÙˆØ§Ù„ÙƒØ³ÙˆÙ Ø¨Ø¯Ù‚Ø© Ù…Ù† Ù…ØµØ§Ø¯Ø± ÙÙ„ÙƒÙŠØ© Ù…Ø¹ØªÙ…Ø¯Ø© (Ù†Ø§Ø³Ø§ ÙˆØºÙŠØ±Ù‡Ø§) Ù…Ø¹ ØªØ­ÙˆÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…ØªØµÙØ­ØŒ ÙˆØ¹Ø¯Ù‘Ø§Ø¯ Ù„Ù„Ø­Ø¯Ø« Ø§Ù„Ù‚Ø§Ø¯Ù…ØŒ ÙˆØ£Ø­ÙƒØ§Ù… ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª Ù…Ø®ØªØµØ±Ø©.">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Noto+Kufi+Arabic:wght@600;700&display=swap" rel="stylesheet">

<!-- Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù†Ø¸Ù…Ø© (SEO) ØªÙØ­Ø¯Ù‘Ø« Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ù‚Ø§Ø¯Ù… -->
<script id="ld-json" type="application/ld+json">{}</script>

<style>
  :root{
    --bg:#f8f7f4;
    --card:#ffffff;
    --ink:#0b1220;
    --muted:#5f6368;
    --border:#e6e1d5;
    --accent:#0b5e3c;   /* Ø²Ù…Ø±Ø¯ÙŠ Ø¯Ø§ÙƒÙ† */
    --gold:#c7a415;     /* Ø°Ù‡Ø¨ÙŠ Ø±Ø§Ù‚Ù */
    --shadow:0 10px 24px rgba(0,0,0,.06);
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:"Cairo",system-ui,sans-serif;line-height:1.7}
  .container{width:min(1100px,100%);margin:auto;padding:18px;display:flex;flex-direction:column;gap:16px}
  .topbar{display:flex;justify-content:space-between;align-items:center;font-weight:700;color:var(--accent)}
  .hero{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);padding:20px;text-align:center}
  .heroTitle{margin:0;font-family:"Noto Kufi Arabic",sans-serif;font-weight:700;letter-spacing:.2px}
  .sub{margin-top:6px;color:var(--muted);font-size:.98rem}

  /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ù‚Ø§Ø¯Ù… */
  .nextBox{background:var(--card);border:2px solid var(--gold);border-radius:16px;box-shadow:var(--shadow);padding:16px;display:grid;gap:10px}
  .nextHead{display:flex;justify-content:space-between;align-items:baseline}
  .nextTitle{font-weight:900;color:var(--accent);font-size:1.15rem}
  .nextDate{color:#8c7a2b;font-weight:800}
  .nextBig{display:grid;grid-template-columns:1fr auto;gap:10px;align-items:center}
  .nextName{font-weight:900;font-size:1.1rem}
  .nextWhen{display:flex;gap:14px;font-weight:800}
  .tag{padding:4px 10px;border:1px solid var(--border);border-radius:10px;background:#faf9f5}
  .countdown{display:flex;justify-content:center;gap:10px;font-weight:900;font-size:1.6rem;letter-spacing:.5px;direction:ltr}
  .cd{min-width:2ch;text-align:center;padding:.25rem .6rem;border:1px solid var(--border);border-radius:10px;background:#f6f5f1}
  .note{font-size:.9rem;color:var(--muted);text-align:center}
  .ruling{font-weight:800;color:#7a6720;text-align:center}

  /* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø© */
  .row{display:grid;grid-template-columns:1fr 1fr;gap:14px}
  @media(max-width:760px){.row{grid-template-columns:1fr}}
  .chip{background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:12px;display:flex;align-items:center;gap:10px}
  .ico{width:36px;height:36px;display:grid;place-items:center;border-radius:10px;background:#f4f1e6}
  .stack{display:flex;flex-direction:column}
  .label{font-size:.86rem;color:var(--muted);font-weight:700}
  .value{font-weight:900}

  /* Ø¬Ø¯ÙˆÙ„ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø­Ø¯Ø« */
  .card{background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:14px}
  .card h3{margin:0 0 10px;font-size:1.05rem;font-weight:900;text-align:center}
  table{width:100%;border-collapse:collapse}
  th,td{padding:12px;border-bottom:1px solid #f0ede4;font-size:1rem}
  th{background:#fbfaf7;font-weight:900}
  td.name{font-weight:800}
  td.time{font-variant-numeric:tabular-nums;font-weight:800}
  tr.highlight td{background:#fcfbf7}
  .small{font-size:.9rem;color:var(--muted);margin-top:6px;text-align:center}

  /* Ø£Ø­ÙƒØ§Ù… */
  .ahkam{background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:16px}
  .ahkam h3{margin:0 0 8px;text-align:center;font-weight:900}
  .ahkam p{margin:.4rem 0;text-align:justify}

  /* Ù…ØµØ§Ø¯Ø± */
  details.sources{background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:12px}
  details.sources summary{cursor:pointer;font-weight:900;color:var(--accent)}
  .srcList{margin:.5rem 0 0;padding:0 1rem}
  .srcList li{margin:.45rem 0}

  /* Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†Ø·Ù‚Ø© */
  .bar{display:flex;justify-content:space-between;align-items:center;gap:10px}
  .place{font-weight:900}
  .btn{border:1px solid var(--border);border-radius:10px;padding:.5rem .9rem;font-weight:800;background:#fff;cursor:pointer}
  .btn.primary{background:#f5f2e6;border-color:#e6d89b}

  .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(15,23,42,.28);z-index:60}
  .modal.open{display:grid}
  .box{width:min(520px,96%);background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);padding:16px}
  .rowCtrl{display:flex;gap:10px;align-items:center;margin:8px 0}
  .rowCtrl label{width:130px;color:var(--muted);font-weight:800}
  select{flex:1;padding:12px;border-radius:12px;border:1px solid var(--border);font-weight:800}
  .actions{display:flex;gap:10px;margin-top:12px;justify-content:flex-end}

  footer{text-align:center;margin-top:6px}
  .credit{color:var(--accent);font-weight:900}
</style>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <div id="topClock">--:--</div>
      <div class="bar">
        <span class="place" id="place">Ù…Ù†Ø·Ù‚ØªÙƒ Ø§Ù„Ø²Ù…Ù†ÙŠØ©: â€”</span>
        <button class="btn" id="useAuto" type="button">Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…ØªØµÙØ­</button>
        <button class="btn primary" id="openTZ" type="button">ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</button>
      </div>
    </div>

    <section class="hero">
      <h1 class="heroTitle">ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø®Ø³ÙˆÙ ÙˆØ§Ù„ÙƒØ³ÙˆÙ â€¢ ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª</h1>
      <div class="sub">Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø¯Ù‚ÙŠÙ‚Ø© Ù…Ù† Ù…ØµØ§Ø¯Ø± ÙÙ„ÙƒÙŠØ© Ù…Ø¹ØªÙ…Ø¯Ø©ØŒ ØªÙØ­ÙˆÙ‘ÙÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ù„Ù…Ù†Ø·Ù‚ØªÙƒ.</div>
    </section>

    <!-- Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ù‚Ø§Ø¯Ù… -->
    <section class="nextBox" id="nextBox" aria-live="polite">
      <div class="nextHead">
        <div class="nextTitle">Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ù‚Ø§Ø¯Ù…</div>
        <div class="nextDate" id="nextDate">â€”</div>
      </div>
      <div class="nextBig">
        <div class="nextName" id="nextName">â€”</div>
        <div class="nextWhen" id="nextWhen">
          <span class="tag" id="tStart">ÙŠØ¨Ø¯Ø£: â€”:â€”</span>
          <span class="tag" id="tMax">Ø§Ù„Ø£Ø¹Ø¸Ù…: â€”:â€”</span>
          <span class="tag" id="tEnd">ÙŠÙ†ØªÙ‡ÙŠ: â€”:â€”</span>
        </div>
      </div>
      <div class="countdown">
        <span class="cd" id="cdH">00</span>:
        <span class="cd" id="cdM">00</span>:
        <span class="cd" id="cdS">00</span>
      </div>
      <div class="note" id="nextNote">Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯ Ù†Ø­Ùˆ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</div>
      <div class="ruling" id="nextRuling">Ø§Ù„Ø­ÙƒÙ…: ÙˆØ§Ø¬Ø¨</div>
    </section>

    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙŠÙˆÙ… -->
    <section class="row">
      <div class="chip">
        <div class="ico">ğŸ“…</div>
        <div class="stack">
          <div class="label">Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ</div>
          <div class="value" id="greg">â€”</div>
        </div>
      </div>
      <div class="chip">
        <div class="ico">ğŸ•’</div>
        <div class="stack">
          <div class="label">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©</div>
          <div class="value" id="tzLabel">â€”</div>
        </div>
      </div>
    </section>

    <!-- Ø¬Ø¯ÙˆÙ„ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø¬Ø§Ø±ÙŠ/Ø§Ù„Ù…Ø­Ø¯Ø¯ -->
    <section class="card">
      <h3>Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø­Ø¯Ø« (Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ)</h3>
      <table>
        <thead><tr><th>Ø§Ù„Ù…Ø³Ù…Ù‰</th><th>Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù…Ø­Ù„ÙŠ</th><th>Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ UTC</th></tr></thead>
        <tbody id="phases"><tr><td colspan="3">â€”</td></tr></tbody>
      </table>
      <div class="small" id="windowNote">â€”</div>
    </section>

    <!-- Ø£Ø­ÙƒØ§Ù… Ù…Ø®ØªØµØ±Ø© -->
    <section class="ahkam">
      <h3>Ø§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù…Ø®ØªØµØ±Ø© Ù„ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª</h3>
      <p><strong>Ù¡) Ù…ØªÙ‰ ØªØ¬Ø¨ØŸ</strong> ØªØ¬Ø¨ Ø¹Ù†Ø¯ <em>Ø§Ù„ÙƒØ³ÙˆÙ Ø§Ù„Ø´Ù…Ø³ÙŠ</em> Ùˆ<em>Ø§Ù„Ø®Ø³ÙˆÙ Ø§Ù„Ù‚Ù…Ø±ÙŠ</em> Ù…Ø·Ù„Ù‚Ù‹Ø§ (ÙƒÙ„ÙŠÙ‹Ø§ Ø£Ùˆ Ø¬Ø²Ø¦ÙŠÙ‹Ø§) Ø¥Ø°Ø§ Ø­ØµÙ„Øª Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©ØŒ ÙˆÙˆÙ‚ØªÙ‡Ø§ Ù…Ù† <strong>Ø§Ø¨ØªØ¯Ø§Ø¡</strong> Ø§Ù„Ø¸Ø§Ù‡Ø±Ø© Ø¥Ù„Ù‰ <strong>ØªÙ…Ø§Ù… Ø§Ù„Ø§Ù†Ø¬Ù„Ø§Ø¡</strong>. Ø¥Ø°Ø§ ØµÙ„Ù‘Ù‰ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø«Ù… Ø§Ù†Ø¬Ù„Øª ÙÙ‚Ø¯ Ø£Ø¯Ù‘Ù‰ Ø§Ù„ÙˆØ§Ø¬Ø¨ ÙÙŠ ÙˆÙ‚ØªÙ‡.</p>
      <p><strong>Ù¢) Ù…Ù† ÙØ§ØªØªÙ‡:</strong> Ù…Ù† ÙƒØ§Ù† <em>Ø¹Ø§Ù„ÙÙ…Ù‹Ø§</em> Ø¨Ø§Ù„Ø¸Ø§Ù‡Ø±Ø© ÙˆÙ„Ù… ÙŠÙØµÙ„Ù‘Ù Ø­ØªÙ‰ Ø§Ù†Ø¬Ù„ØªØŒ <strong>ÙŠÙ‚Ø¶ÙŠ</strong> Ø§Ù„ØµÙ„Ø§Ø© (ÙÙŠ Ø§Ù„ÙƒÙ„ÙŠ ÙˆØ§Ù„Ø¬Ø²Ø¦ÙŠ). Ø£Ù…Ù‘Ø§ Ù…Ù† <em>Ù„Ù… ÙŠØ¹Ù„Ù…</em> Ø¨Ù‡Ø§ Ø­ØªÙ‰ Ø§Ù†Ø¬Ù„Øª: ÙØ¥Ù† ÙƒØ§Ù† <strong>ÙƒÙ„ÙŠÙ‹Ø§</strong> ÙˆØ¬Ø¨ Ø§Ù„Ù‚Ø¶Ø§Ø¡ØŒ ÙˆØ¥Ù„Ø§Ù‘ (ÙÙŠ Ø§Ù„Ø¬Ø²Ø¦ÙŠ) ÙÙ„Ø§ Ù‚Ø¶Ø§Ø¡.</p>
      <p><strong>Ù£) Ø°ÙˆØ§Øª Ø§Ù„Ø£Ø¹Ø°Ø§Ø± (Ø§Ù„Ø­ÙŠØ¶ ÙˆØ§Ù„Ù†ÙØ§Ø³):</strong> Ù„Ø§ ØªØµØ­Ù‘ Ù…Ù†Ù‡Ù†Ù‘ Ø§Ù„ØµÙ„Ø§Ø© Ø­ÙŠÙ† Ø§Ù„Ø¹Ø°Ø±ØŒ <strong>ÙˆÙ„Ø§ ÙŠØ¬Ø¨ Ø§Ù„Ù‚Ø¶Ø§Ø¡</strong> Ù„Ù…Ø§ ÙŠÙÙˆØªÙ‡Ù†Ù‘ØŒ ÙˆØ§Ù„Ø£Ø­ÙˆØ· Ø§Ø³ØªØ­Ø¨Ø§Ø¨Ù‹Ø§ Ø§Ù„Ø¥ØªÙŠØ§Ù† Ø¨Ù‡Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø·Ù‡Ø±.</p>
      <p><strong>Ù¤) Ø§Ù„ÙƒÙŠÙÙŠØ© Ø¨Ø¥ÙŠØ¬Ø§Ø²:</strong> Ø±ÙƒØ¹ØªØ§Ù†ØŒ ÙÙŠ ÙƒÙ„ Ø±ÙƒØ¹Ø© Ø®Ù…Ø³Ø© Ø±ÙƒÙˆØ¹Ø§ØªØŒ ØªÙÙ‚Ø±Ø£ Ø§Ù„ÙØ§ØªØ­Ø© ÙˆØ³ÙˆØ±Ø© Ù‚Ø¨Ù„ ÙƒÙ„ Ø±ÙƒÙˆØ¹ØŒ Ø«Ù… ØªØ³Ø¬Ø¯ Ø³Ø¬Ø¯ØªÙŠÙ†ØŒ ÙˆØªÙØ¹Ù„ ÙÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ù…Ø«Ù„ Ø§Ù„Ø£ÙˆÙ„Ù‰ØŒ Ø«Ù… Ø§Ù„ØªØ´Ù‡Ù‘Ø¯ ÙˆØ§Ù„ØªØ³Ù„ÙŠÙ….</p>
    </section>

    <!-- Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø© -->
    <details class="sources">
      <summary>Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø© (Ø§Ù†Ù‚Ø± Ù„Ù„Ø¹Ø±Ø¶)</summary>
      <ul class="srcList">
        <li>NASA GSFC â€“ Ø®Ø±Ø§Ø¦Ø· ÙˆØ§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ø®Ø³ÙˆÙ Ø§Ù„Ù‚Ù…Ø±ÙŠ 14 Ù…Ø§Ø±Ø³ 2025 Ùˆ7 Ø³Ø¨ØªÙ…Ø¨Ø± 2025 (Ù…Ù„ÙØ§Øª PDF Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ).</li>
        <li>NASA SVS/Science (ØµÙØ­Ø§Øª Ø§Ù„Ø­Ø¯Ø«)ØŒ ÙˆEclipseWise/Timeanddate Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ù„Ù„ÙƒØ³ÙˆÙ Ø§Ù„Ø¬Ø²Ø¦ÙŠ 2025-03-29 ÙˆØ§Ù„Ø­Ù„Ù‚ÙŠ 2026-02-17.</li>
        <li>Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„ÙÙ‚Ù‡ÙŠØ© Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ù„Ù‚Ø³Ù… ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª ÙˆØ£Ø­ÙƒØ§Ù… Ø§Ù„Ø£Ø¹Ø°Ø§Ø±/Ø§Ù„Ù‚Ø¶Ø§Ø¡.</li>
      </ul>
    </details>

    <footer><span class="credit">Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ± ÙØ§Ø¶Ù„ Ø§Ù„Ø±ÙŠØ³</span></footer>
  </div>

  <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†Ø·Ù‚Ø© -->
  <div class="modal" id="modal">
    <div class="box">
      <div class="rowCtrl"><label>Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©</label>
        <select id="tzSel"></select>
      </div>
      <div class="actions">
        <button class="btn" id="cancelTZ" type="button">Ø¥Ù„ØºØ§Ø¡</button>
        <button class="btn primary" id="saveTZ" type="button">Ø­ÙØ¸</button>
      </div>
    </div>
  </div>

<script>
/* ============================ Ø¥Ø¹Ø¯Ø§Ø¯ Ø¹Ø§Ù… ============================ */
const fmtHMS = (d)=> new Intl.DateTimeFormat('en-GB',{hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false}).format(d);
const fmtHM  = (d)=> new Intl.DateTimeFormat('en-GB',{hour:'2-digit',minute:'2-digit',hour12:false}).format(d);
const fmtDate= (d,tz)=> new Intl.DateTimeFormat('ar',{timeZone:tz,weekday:'long',year:'numeric',month:'long',day:'numeric'}).format(d);

const SYSTEM_TZ = Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC';
let tz = localStorage.getItem('eclipse_tz') || SYSTEM_TZ;

function updateClock(){
  const now = new Date();
  topClock.textContent = new Intl.DateTimeFormat('en-GB',{timeZone:tz,hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false}).format(now);
}
setInterval(updateClock,1000); updateClock();

/* ======================== Ø¨ÙŠØ§Ù†Ø§Øª ÙÙ„ÙƒÙŠØ© Ø¯Ù‚ÙŠÙ‚Ø© (UTC) ======================== */
/* Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø£Ø¯Ù†Ø§Ù‡ Ù…Ø£Ø®ÙˆØ°Ø© Ø¨Ø¯Ù‚Ø© Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø©. */
const ECLIPSES_UTC = [
  /* 2025 */
  {
    id:"LE-2025-03-14", kind:"Ø®Ø³ÙˆÙ Ù‚Ù…Ø±ÙŠ ÙƒÙ„ÙŠ",
    p1:"2025-03-14T03:57:24Z", u1:"2025-03-14T05:09:33Z", u2:"2025-03-14T06:25:59Z",
    greatest:"2025-03-14T06:58:41Z", u3:"2025-03-14T07:31:23Z", u4:"2025-03-14T08:47:48Z", p4:"2025-03-14T10:00:01Z",
    src:["NASA GSFC LE2025Mar14T.pdf"]
  },
  {
    id:"SE-2025-03-29", kind:"ÙƒØ³ÙˆÙ Ø´Ù…Ø³ÙŠ Ø¬Ø²Ø¦ÙŠ",
    p1:"2025-03-29T08:51:52Z", greatest:"2025-03-29T10:48:36Z", p4:"2025-03-29T12:44:54Z",
    src:["Eclipse global times (NASA/Timeanddate)"]
  },
  {
    id:"LE-2025-09-07", kind:"Ø®Ø³ÙˆÙ Ù‚Ù…Ø±ÙŠ ÙƒÙ„ÙŠ",
    p1:"2025-09-07T15:28:21Z", u1:"2025-09-07T16:27:02Z", u2:"2025-09-07T17:30:41Z",
    greatest:"2025-09-07T18:11:43Z", u3:"2025-09-07T18:52:47Z", u4:"2025-09-07T19:56:26Z", p4:"2025-09-07T20:55:00Z",
    src:["NASA GSFC LE2025Sep07T.pdf"]
  },
  {
    id:"SE-2025-09-21", kind:"ÙƒØ³ÙˆÙ Ø´Ù…Ø³ÙŠ Ø¬Ø²Ø¦ÙŠ",
    p1:"2025-09-21T17:30:51Z", greatest:"2025-09-21T19:43:04Z", p4:"2025-09-21T21:54:55Z",
    src:["EclipseWise global contacts"]
  },
  /* 2026 */
  {
    id:"SE-2026-02-17", kind:"ÙƒØ³ÙˆÙ Ø´Ù…Ø³ÙŠ Ø­Ù„Ù‚ÙŠ",
    p1:"2026-02-17T09:57:35Z", greatest:"2026-02-17T12:13:06Z", p4:"2026-02-17T14:28:51Z",
    src:["EclipseWise prime figure"]
  },
  {
    id:"LE-2026-03-03", kind:"Ø®Ø³ÙˆÙ Ù‚Ù…Ø±ÙŠ ÙƒÙ„ÙŠ",
    p1:"2026-03-03T08:44:22Z", u1:"2026-03-03T09:50:00Z", u2:"2026-03-03T11:04:26Z",
    greatest:"2026-03-03T11:33:37Z", u3:"2026-03-03T12:02:45Z", u4:"2026-03-03T13:17:10Z", p4:"2026-03-03T14:22:59Z",
    src:["NASA GSFC LE2026Mar03T.pdf"]
  }
];

/* =========================== Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… =========================== */
function setPlace(){
  place.textContent = `Ù…Ù†Ø·Ù‚ØªÙƒ Ø§Ù„Ø²Ù…Ù†ÙŠØ©: ${tz}`;
  tzLabel.textContent = tz;
  greg.textContent = fmtDate(new Date(), tz);
}
setPlace();
useAuto.addEventListener('click', ()=>{
  tz = SYSTEM_TZ; localStorage.setItem('eclipse_tz', tz); setPlace(); renderAll();
});

/* Ø§Ø®ØªÙŠØ§Ø± TZ ÙŠØ¯ÙˆÙŠ */
const TZ_LIST = [
  "UTC","Asia/Riyadh","Asia/Bahrain","Asia/Kuwait","Asia/Baghdad","Asia/Tehran",
  "Asia/Beirut","Asia/Jerusalem","Asia/Dubai","Asia/Qatar","Asia/Muscat",
  "Africa/Cairo","Africa/Casablanca","Europe/Istanbul","Europe/Athens","Europe/Paris",
  "Europe/London","America/New_York","America/Toronto","America/Sao_Paulo",
  "Asia/Karachi","Asia/Kolkata","Asia/Dhaka","Asia/Jakarta","Asia/Tokyo","Australia/Sydney","Pacific/Auckland"
];
function openModal(){
  tzSel.innerHTML = TZ_LIST.map(z=>`<option value="${z}">${z}</option>`).join("");
  tzSel.value = tz;
  modal.classList.add('open'); document.body.style.overflow='hidden';
}
function closeModal(){ modal.classList.remove('open'); document.body.style.overflow=''; }
openTZ.addEventListener('click', openModal);
cancelTZ.addEventListener('click', closeModal);
saveTZ.addEventListener('click', ()=>{
  tz = tzSel.value || SYSTEM_TZ;
  localStorage.setItem('eclipse_tz', tz);
  closeModal(); setPlace(); renderAll();
});
modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });

/* ======================== ØªØ­ÙˆÙŠÙ„ UTC -> Ù…Ù†Ø·Ù‚Ø© ======================== */
function toTZ(iso, zone){
  const d = new Date(iso); // ISO UTC
  const parts = new Intl.DateTimeFormat('en-CA',{timeZone:zone,year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit',second:'2-digit'}).formatToParts(d);
  const get=(t)=>+(parts.find(x=>x.type===t).value);
  return new Date(get('year'), get('month')-1, get('day'), get('hour'), get('minute'), get('second'));
}

/* ======================= Ø¥ÙŠØ¬Ø§Ø¯ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ù‚Ø§Ø¯Ù…/Ø§Ù„Ø¬Ø§Ø±ÙŠ ======================= */
function nextOrCurrentEvent(){
  const nowUTC = new Date();
  // Ø±ØªÙ‘Ø¨ Ø­Ø³Ø¨ P1 (Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©)
  const sorted = [...ECLIPSES_UTC].sort((a,b)=> new Date(a.p1) - new Date(b.p1));
  for(const ev of sorted){
    const start = new Date(ev.p1);
    const end   = new Date(ev.p4 || ev.greatest || ev.u4 || ev.u3 || start);
    if(nowUTC < start) return {ev, state:'upcoming'};
    if(nowUTC >= start && nowUTC <= end) return {ev, state:'ongoing'};
  }
  // Ù„Ùˆ Ø¬Ù…ÙŠØ¹Ù‡Ø§ Ù…Ø¶ØªØŒ Ø®Ø° Ø£Ø¨Ø¹Ø¯ ÙˆØ§Ø­Ø¯ Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ (Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ…ØªØ¯ Ù„Ø³Ù†ÙˆØ§Øª)
  return {ev: sorted[sorted.length-1], state:'past'};
}

/* ============================== Ø§Ù„Ø¹Ø±Ø¶ ============================== */
let cdTimer=null;

function renderPhases(ev){
  const map = [];
  if(ev.p1) map.push({n:"Ø¨Ø¯Ø§ÙŠØ© Ø´Ø¨Ù‡ Ø§Ù„Ø¸Ù„ (P1)", u:ev.p1});
  if(ev.u1) map.push({n:"Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¸Ù„ (U1)", u:ev.u1});
  if(ev.u2) map.push({n:"Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙƒÙ„Ù‘ÙŠØ©/Ø§Ù„Ø­Ù„Ù‚ÙŠÙ‘Ø© (U2)", u:ev.u2});
  if(ev.greatest) map.push({n:"Ø£Ø¹Ø¸Ù… Ø§Ù„Ø®Ø³ÙˆÙ/Ø§Ù„ÙƒØ³ÙˆÙ", u:ev.greatest});
  if(ev.u3) map.push({n:"Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ÙƒÙ„Ù‘ÙŠØ©/Ø§Ù„Ø­Ù„Ù‚ÙŠÙ‘Ø© (U3)", u:ev.u3});
  if(ev.u4) map.push({n:"Ø®Ø±ÙˆØ¬ Ø§Ù„Ø¸Ù„ (U4)", u:ev.u4});
  if(ev.p4) map.push({n:"Ù†Ù‡Ø§ÙŠØ© Ø´Ø¨Ù‡ Ø§Ù„Ø¸Ù„ (P4)", u:ev.p4});

  const rows = map.map((r,i)=>{
    const local = toTZ(r.u, tz);
    const utc   = new Date(r.u);
    return `<tr class="${(r.u===ev.greatest)?'highlight':''}">
      <td class="name">${r.n}</td>
      <td class="time">${fmtHMS(local)}</td>
      <td class="time">${fmtHMS(utc)}</td>
    </tr>`;
  }).join("");
  phases.innerHTML = rows || `<tr><td colspan="3">â€”</td></tr>`;

  // Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø´Ø±Ø¹ÙŠ Ù„Ù„ØµÙ„Ø§Ø©
  const startLocal = ev.p1 ? fmtHMS(toTZ(ev.p1, tz)) : 'â€”';
  const endLocal   = (ev.p4 || ev.u4 || ev.greatest) ? fmtHMS(toTZ(ev.p4 || ev.u4 || ev.greatest, tz)) : 'â€”';
  windowNote.textContent = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø´Ø±Ø¹ÙŠ Ù„ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª: Ù…Ù† Ø¨Ø¯Ø¡ Ø§Ù„Ø¸Ø§Ù‡Ø±Ø© (${startLocal}) Ø­ØªÙ‰ ØªÙ…Ø§Ù… Ø§Ù„Ø§Ù†Ø¬Ù„Ø§Ø¡ (${endLocal}).`;
}

function updateLDJson(ev){
  // Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù†Ø¸Ù…Ø© Ù„Ù„Ù€ SEO Ù„Ù†ÙØ³ Ø§Ù„Ø­Ø¯Ø«
  const dStart = ev.p1 || ev.greatest;
  const dEnd   = ev.p4 || ev.u4 || ev.greatest;
  const obj = {
    "@context":"https://schema.org",
    "@type":"Event",
    "name": ev.kind,
    "eventAttendanceMode": "https://schema.org/OnlineEventAttendanceMode",
    "startDate": dStart,
    "endDate": dEnd,
    "description":"Ø®Ø³ÙˆÙ/ÙƒØ³ÙˆÙ Ù…Ø¹ Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø¯Ù‚ÙŠÙ‚Ø© Ù…Ø¹Ø±ÙˆØ¶Ø© Ø­Ø³Ø¨ Ù…Ù†Ø·Ù‚ØªÙƒ Ø§Ù„Ø²Ù…Ù†ÙŠØ©. ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª ÙˆØ§Ø¬Ø¨Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¯Ø«.",
    "inLanguage":"ar",
    "location": {"@type":"VirtualLocation","url": location.href}
  };
  document.getElementById('ld-json').textContent = JSON.stringify(obj);
}

function renderNextBox(ctx){
  const {ev, state} = ctx;
  // Ø¹Ù†ÙˆØ§Ù† Ùˆ ØªØ§Ø±ÙŠØ®
  nextName.textContent = ev.kind;
  const localStart = toTZ(ev.p1 || ev.greatest, tz);
  nextDate.textContent = fmtDate(localStart, tz);

  // ÙŠØ¨Ø¯Ø£/Ø§Ù„Ø£Ø¹Ø¸Ù…/ÙŠÙ†ØªÙ‡ÙŠ (Ø³Ø§Ø¹Ø§Øª/Ø¯Ù‚Ø§Ø¦Ù‚ ÙÙ‚Ø·)
  const tStart = ev.p1 ? fmtHM(toTZ(ev.p1, tz)) : 'â€”:â€”';
  const tMax   = ev.greatest ? fmtHM(toTZ(ev.greatest, tz)) : 'â€”:â€”';
  const tEnd   = (ev.p4 || ev.u4 || ev.greatest) ? fmtHM(toTZ(ev.p4 || ev.u4 || ev.greatest, tz)) : 'â€”:â€”';
  tStart && (document.getElementById('tStart').textContent = `ÙŠØ¨Ø¯Ø£: ${tStart}`);
  tMax && (document.getElementById('tMax').textContent = `Ø§Ù„Ø£Ø¹Ø¸Ù…: ${tMax}`);
  tEnd && (document.getElementById('tEnd').textContent = `ÙŠÙ†ØªÙ‡ÙŠ: ${tEnd}`);

  // Ø§Ù„Ø­ÙƒÙ… (ÙˆØ§Ø¬Ø¨)
  nextRuling.textContent = "Ø§Ù„Ø­ÙƒÙ…: ÙˆØ§Ø¬Ø¨";

  // Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯
  nextNote.textContent = (state==='upcoming') ? "Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯ Ù†Ø­Ùˆ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©" :
                         (state==='ongoing')  ? "Ø§Ù„Ø¸Ø§Ù‡Ø±Ø© Ø¬Ø§Ø±ÙŠØ© â€” Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯ Ù†Ø­Ùˆ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡" :
                         "Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¸Ø§Ù‡Ø±Ø© â€” ÙŠÙØ¹Ø±Ø¶ Ø£Ù‚Ø±Ø¨ Ø­Ø¯Ø« ØªØ§Ù„ÙŠ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©";

  // Ø¹Ø¯Ù‘Ø§Ø¯
  if(cdTimer) clearInterval(cdTimer);
  const target = (state==='upcoming') ? new Date(ev.p1 || ev.greatest) : new Date(ev.p4 || ev.u4 || ev.greatest);
  function tick(){
    const now = new Date();
    let ms = target - now; ms = Math.max(0, ms);
    let s = Math.floor(ms/1000), h = Math.floor(s/3600); s%=3600; const m = Math.floor(s/60); s%=60;
    cdH.textContent = String(h).padStart(2,'0');
    cdM.textContent = String(m).padStart(2,'0');
    cdS.textContent = String(s).padStart(2,'0');
    if(ms<=0){ clearInterval(cdTimer); renderAll(); }
  }
  tick(); cdTimer = setInterval(tick,1000);
}

function renderAll(){
  setPlace();
  const ctx = nextOrCurrentEvent();
  renderNextBox(ctx);
  renderPhases(ctx.ev);
  updateLDJson(ctx.ev);
}
renderAll();
</script>
</body>
</html>
