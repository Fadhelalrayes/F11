<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ุงูุงุณุชุจุตุงุฑ</title>

<!-- ุฎุทูุท ุงุญุชุฑุงููุฉ -->
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#0e0f12; --fg:#f7f7f7; --muted:#bdbdbd;
    --brand:#ffd54a; --card:#16181f; --stroke:#2a2e38;
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:var(--bg); color:var(--fg);
    font-family:"Tajawal","Cairo",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
    -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  }
  header{
    position:sticky; top:0; z-index:10; background:rgba(14,15,18,.9);
    backdrop-filter:saturate(140%) blur(6px);
    border-bottom:1px solid var(--stroke); padding:14px 16px;
    display:flex; align-items:center; justify-content:space-between
  }
  .brand{display:flex; align-items:center; gap:14px}
  .logo{width:44px;height:44px;border-radius:50%;border:2px solid var(--brand);display:grid;place-items:center}
  .logo span{width:12px;height:12px;border-radius:50%;border:2px solid var(--brand)}
  .title{
    font-weight:800; letter-spacing:.3px; line-height:1;
    font-size: clamp(30px, 5vw, 46px); color:var(--brand)
  }
  .container{max-width:900px;margin:0 auto;padding:18px 16px}
  .card{
    background:var(--card); border:1px solid var(--stroke); border-radius:18px; padding:18px; margin:14px 0;
    box-shadow:0 10px 30px rgba(0,0,0,.2)
  }
  h1,h2{color:var(--brand); margin:10px 0 8px}
  .muted{color:var(--muted)}
  label{display:block; margin:10px 0 6px; color:#eaeaea; font-size:14px}
  input,select,button{
    width:100%; padding:12px 14px; border-radius:12px; border:1px solid var(--stroke);
    background:#0f1117; color:var(--fg); font-size:16px; outline:none
  }
  input:focus, select:focus{border-color:var(--brand); box-shadow:0 0 0 3px rgba(255,213,74,.15)}
  .grid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
  @media (max-width:640px){ .grid{grid-template-columns:1fr} }
  .btn{
    border:0; background:linear-gradient(135deg, var(--brand), #ffb300);
    color:#221; font-weight:800; cursor:pointer; transition:transform .08s ease, filter .2s ease; letter-spacing:.2px
  }
  .btn:active{transform:scale(.99)}
  .ghost{background:transparent; border:1px solid var(--brand); color:var(--brand)}
  .danger{background:#1b0f0f;border:1px solid #6a2e2e;color:#ffb9b9}
  .center{display:grid; place-items:center}
  .hidden{display:none !important}
  .topic-grid{display:grid; grid-template-columns:repeat(2,1fr); gap:14px}
  .topic{padding:18px; border:1px dashed var(--brand); border-radius:14px; background:#0f1117; cursor:pointer}
  .topic:hover{background:#121520}
  .topic span{display:block; color:var(--muted); font-size:14px; margin-top:4px}
  .result{line-height:1.95}
  .tag{display:inline-block; padding:4px 10px; border-radius:999px; border:1px solid var(--stroke); color:var(--muted); font-size:13px}
  footer{padding:26px 16px; text-align:center; color:var(--muted); border-top:1px solid var(--stroke)}
  /* Loading ring */
  .ring-wrap{height:240px; display:grid; place-items:center}
  .ring{
    width:130px; height:130px; border-radius:50%;
    border:6px solid rgba(255,255,255,.08); border-top-color:var(--brand);
    animation:spin 1.2s linear infinite; position:relative
  }
  .ring:after{
    content:""; position:absolute; inset:16px; border-radius:50%;
    border:4px dashed rgba(255,255,255,.12)
  }
  @keyframes spin{to{transform:rotate(360deg)}}
  ul{margin:8px 0 0 0; padding:0 18px}
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="logo" aria-hidden="true"><span></span></div>
    <div class="title">ุงูุงุณุชุจุตุงุฑ</div>
  </div>
  <button class="danger" id="clearBtn" title="ุญุฐู ูู ุงูุจูุงูุงุช ุงููุญููุฉ">ุญุฐู ุจูุงูุงุชู</button>
</header>

<main class="container">

  <!-- ุงูุฎุทูุฉ 1: ุฅุฏุฎุงู ุงูุจูุงูุงุช -->
  <section id="step1" class="card">
    <h1>ุงุจุฏุฃ ูุฑุงุกุชู</h1>
    <p class="muted">ุจูุงูุงุชู ุชูุญููุธ ูุญููููุง ุนูู ุฌูุงุฒู ููุท.</p>
    <div class="grid">
      <div>
        <label>ุงูุนูุฑ</label>
        <input id="age" type="number" min="5" max="120" placeholder="ูุซุงู: 43">
      </div>
      <div>
        <label>ุงูุฌูุณ</label>
        <select id="gender">
          <option value="">ุงุฎุชุฑ</option>
          <option>ุฐูุฑ</option>
          <option>ุฃูุซู</option>
        </select>
      </div>
      <div>
        <label>ุงูุญุงูุฉ ุงูุงุฌุชูุงุนูุฉ</label>
        <select id="status">
          <option value="">ุงุฎุชุฑ</option>
          <option>ุฃุนุฒุจ/ุนุฒุจุงุก</option>
          <option>ูุชุฒูุฌ/ูุชุฒูุฌุฉ</option>
          <option>ูููุตู/ูููุตูุฉ</option>
          <option>ูุฎุทูุจ/ูุฎุทูุจุฉ</option>
        </select>
      </div>
      <div>
        <label>ุชุงุฑูุฎ ุงููููุงุฏ</label>
        <input id="birthdate" type="date">
      </div>
    </div>
    <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap">
      <button class="btn" id="startBtn">ุงุจุฏุฃ ุงููุฑุงุกุฉ</button>
      <button class="ghost" id="shuffleDemo">ูุฑุงุกุฉ ููุฑูุฉ ุชุฌุฑูุจูุฉ</button>
    </div>
  </section>

  <!-- ุงูุฎุทูุฉ 2: ุดุงุดุฉ ุงูุชุธุงุฑ -->
  <section id="stepLoading" class="card hidden center">
    <div>
      <div class="ring-wrap"><div class="ring" aria-hidden="true"></div></div>
      <h2>ุฌุงุฑู ุงูุงุณุชุจุตุงุฑโฆ</h2>
      <p class="muted">ูุญุธุงุช ููููุฉ ูุจู ุธููุฑ ุงูุฅุดุงุฑุงุช.</p>
    </div>
  </section>

  <!-- ุงูุฎุทูุฉ 3: ุงุฎุชูุงุฑ ุงูููุถูุน -->
  <section id="stepTopics" class="card hidden">
    <h2>ุงุฎุชุฑ ููุถูุน ูุฑุงุกุชู</h2>
    <div class="topic-grid">
      <button class="topic" data-topic="love">ุงูุญุจ โค๏ธ<span>ุงูุนูุงูุงุชุ ุงูุงูุฌุฐุงุจุ ุงููุตุงูุญุงุช</span></button>
      <button class="topic" data-topic="health">ุงูุตุญุฉ ๐<span>ุงูุทุงูุฉุ ุงูุนุงุฏุงุชุ ุงูุชูุงุฒู</span></button>
      <button class="topic" data-topic="career">ุงููููุฉ/ุงูุซุฑูุฉ ๐ผ<span>ุงููุฑุตุ ุงููุฑุงุฑุงุชุ ุงูุงุณุชุซูุงุฑุงุช</span></button>
      <button class="topic" data-topic="general">ุนุงู โจ<span>ุฑุคูุฉ ุดุงููุฉ ููุฃูุงู ุงูููุจูุฉ</span></button>
    </div>
  </section>

  <!-- ุงูุฎุทูุฉ 4: ุงููุชูุฌุฉ -->
  <section id="stepResult" class="card hidden">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap">
      <h2 style="margin:0">ุงูุฅุดุงุฑุงุช ุงูุธุงูุฑุฉ</h2>
      <div class="tag" id="userEcho"></div>
    </div>

    <div id="resultText" class="result" style="margin-top:10px"></div>
    <div id="omen" class="muted" style="margin-top:12px; font-size:15px"></div>

    <div style="display:flex; gap:10px; margin-top:16px; flex-wrap:wrap">
      <button class="btn" id="againBtn">ุฅุดุงุฑุฉ ุฌุฏูุฏุฉ (ููุณ ุงูููุถูุน)</button>
      <button class="ghost" id="topicsBtn">ุงุฎุชูุงุฑ ููุถูุน ุขุฎุฑ</button>
      <button class="ghost" id="restartBtn">ุฅุนุงุฏุฉ ุงูุจุฏุก</button>
    </div>
  </section>

</main>

<footer>
  ยฉ <span id="year"></span> ุงูุงุณุชุจุตุงุฑ
</footer>

<script>
  // ========= ููุงุฆู ุจุฃุณููุจ ุชูุจุคู ูุชุญุฐูุฑู (ูุฎุงุทุจุฉ ูุจุงุดุฑุฉ) =========
  // ููุงุญุธุฉ: ุชูุช ุตูุงุบุชูุง ุจุฑูุญ ุชููุนุงุช ูููุฉ ูุชุญุฐูุฑุงุช ููุฌุฒุฉ.
  const LOVE_P = [
    "ุชููุญ ุนูุฏู ูุตุงุฏูุฉ ุชุบููุฑ ุงุชุฌุงู ุงูููุจ. ูุฌูู ูุฃููู ูุนูุฏ ูุฌุฃุฉุ ููููุฉ ูุงุญุฏุฉ ุชุนูุฏ ุญุฑุงุฑุฉ ูุฏููุฉ.",
    "ุฃูุช ุนูู ููุนุฏ ูุน ุงูุฌุฐุงุจ ุบูุฑ ูุฎุทุทุ ููุชุฑุจ ููู ุดุฎุต ููุฑุฃ ุตูุชู ุฃูุซุฑ ูู ููุงูู.",
    "ุจูุงุจุฉ ูุตุงูุญุฉ ุชููุชุญ ูู ุงูุชูุงุตูู ุงูุตุบูุฑุฉ: ุงุจุชุณุงูุฉุ ุงุนุชุฐุงุฑุ ุฃู ููุงุก ูุตูุฑ ูุจุฏุฏ ุถุจุงุจูุง ุทูููุงู.",
    "ุนูุงูุฉ ุชูุงูู ูููุฉ ุชุธูุฑ ุญูู ุชุชุฎูู ุนู ุงูุชุฑุฏุฏุ ุงูููุจ ูููู ููู ูููุญู ุฑุงุญุฉ ูุง ุถุฌูุฌูุง."
  ];
  const LOVE_W = [
    "ุงุญุฐุฑ ูู ูุนุฏู ุณุฑูุน ูุง ูุญูู ุฌุฐูุฑูุงุ ุถูุกู ูุงูุน ูุฏ ูุฎุจู ุจุนุฏ ุฃูุงู.",
    "ุฑุณุงูุฉ ุบุงูุถุฉ ูุฏ ุชูุดุนู ุธูููุงุ ูุง ุชุชุจุน ุฅุดุงุนุงุชุ ูุจุฑูููุง ูุตูุฑ.",
    "ูุงุถู ูุญุงูู ุฃู ูุณุชุนูุฏ ููุงูู ูู ูุญุธุฉ ุถุนูุ ูุง ุชุชุฑู ุงูุญููู ูููุฏู ุฅูู ุฏูุฑุฉ ููููููุฉ.",
    "ุบูุฑุฉ ุนุงุจุฑุฉ ุญููู ุชุชุญููู ุฅูู ุงุฎุชุจุงุฑ ููุงุกุ ูุง ุชุณูุญ ููุขุฎุฑูู ุจูุชุงุจุฉ ูุตุชู."
  ];

  const HEALTH_P = [
    "ุทุงูุฉ ูุงุฏุฆุฉ ุชุชุณูู ุฅูู ุฌุณุฏู ูุฐุง ุงูุฃุณุจูุนุ ุงูููู ุงูุนููู ูุนูุฏ ุชุฑุชูุจ ุงูุฏุงุฎู.",
    "ููุธุฉ ุฌุณุฏูุฉ ููุงุฌุฆุฉ: ุชุณุชุนูุฏ ุฎูุฉ ุงูุญุฑูุฉุ ููุฃู ุซูููููุง ุทูููุงู ุชูุงุดู.",
    "ุฑูุงุญ ุฎูููุฉ ูู ุงูุชูุงุฒู ุชุณุฑู ูููุ ุชุชุตุงูุญ ูุน ุฌุณุฏู ูุชุณูุน ููุณู ุฌูุฏูุง.",
    "ุชุจุฏููู ูู ุงูุฅููุงุน ูููุญู ุตูุงุกู ุฐููููุง ูุงุฏุฑูุงุ ูุชุฎู ูุทุฃุฉ ุงูุชูุชุฑ."
  ];
  const HEALTH_W = [
    "ุชุญุฐูุฑ ูุตูุฑ ุงููุฏู: ุฅุฌูุงุฏ ุบูุฑ ูุฑุฆู ูุชุฑุงูู ุฅู ุชุฌุงููุช ุฅุดุงุฑุงุช ุงูุฅุฑูุงู.",
    "ุตุฏุงุน ูุชูุฑุฑ ูููุณ ุจุฃู ุงูุดุงุดุฉ ุณุฑูุช ูู ุนูููู ููุฑูุง ุฒุงุฆุฏูุงุ ุฎููู ุญุฏุชู.",
    "ุฅููุงุน ูุชุณุฑูุน ูุฑูู ุงูููุณุ ุฅู ุณูุนุช ุฏููุงุช ููุจู ุฃุณุฑุน ูู ุงูุนุงุฏุฉุ ูุฏูุฆ ุงูุณูุฑ.",
    "ุนูููู ุชุทูุจ ุงุณุชุฑุงุญุฉุ ูุฅู ุฃููุฑูุช. ุชุฌุงููู ุงูููุณ ุงูููู ูุตูุฑ ุตุฑุงุฎูุง ุบุฏูุง."
  ];

  const CAREER_P = [
    "ูุฑุตุฉ ุชุชุณูู ูู ูุงูุด ุจุฑูุฏูุ ุชุญูู ุชูููุนูุง ุตุบูุฑูุง ูุชุฃุซูุฑูุง ูุจูุฑูุง.",
    "ุฃูุช ุนูู ุนุชุจุฉ ุงูุนุทุงูุฉ ููููุฉุ ุงูุจุงุจ ุงูุฐู ุธููุชู ูุบูููุง ูุชุญุฑู ูุฌุฃุฉ.",
    "ุฃุซุฑ ูุงุฏุฆ ูุนููู ุงูุณุงุจู ูุธูุฑ ุงูุขู: ุฅุดุงุฏุฉุ ุชุฑุดูุญุ ุฃู ุงูุชุฑุงุญ ููุงุฌุฆ.",
    "ุจูุตูุฉ ุงููุงู ุชููู ุฅูู ุงูุงุณุชูุฑุงุฑ ุจุนุฏ ุชุฐุจุฐุจุ ูุฅุดุงุฑุฉ ุฑุจุญ ุฎุงูุชุฉ ุชููุถ."
  ];
  const CAREER_W = [
    "ุชุญุฐูุฑ ูู ุจูุฏู ูุฎููู ูู ุงุชูุงู ููุบุฑูุ ุณุทุฑ ูุงุญุฏ ูุฏ ูููุจ ุงูููุฒุงู.",
    "ุถุฌูุฌ ุงูุณูู ููููู ุจุฐูุจู ุณุฑูุนุ ุงูููุนุงู ููุณ ุฏุงุฆููุง ุซุฑุงุกู.",
    "ุญุฑูุฉ ูุชุนุฌูุฉ ูุฏ ุชููุช ููู ูุฑุตุฉ ูุงูุช ุชุญุชุงุฌ ุตุจุฑ ุณุงุนุฉ ุฅุถุงููุฉ.",
    "ูุงูุฐุฉ ุฅููุงู ุทุงุฆุด ุชููุชุญ ูุซูุงููุ ุฅู ูุฑุฑุชู ูููุงุ ูุชุฃุฎุฑ ุงูุชุนุงูู."
  ];

  const GENERAL_P = [
    "ุฎุจุฑู ููุณุฑููู ูุตู ูู ุฌูุฉ ุจุนูุฏุฉุ ูุฃูู ูุฏูุฉ ุฃูุฑุณูุช ูุจู ุฒูู ููุตูุช ุงูุขู.",
    "ุนูุงูุงุช ุทุฑูู ุฌุฏูุฏุฉ ุชุธูุฑ ูู ุงูุฃููุ ูุณุงุฑู ูู ุชููุฑ ุจู ูุจุฏุฃ ุจุฅุดุงุฑุฉ ุตุบูุฑุฉ.",
    "ุงูุจูุช ูุณุชุฑุฏ ุณูููุชูุ ูุชูุงุตูู ูููู ุชูุตูููุ ุชุดุนุฑ ุฃู ุงูููุงุก ุฃุฎู.",
    "ูุฌู ูุฏูู ูุฒูุฑู ูู ุงูุญูู ูุจู ุฃู ุชูุงุจูู ููุธุฉูุ ุงููุตุงุฏูุงุช ุชูุญุณู ุงูุชูููุช."
  ];
  const GENERAL_W = [
    "ุชุฐุจุฐุจ ูุตูุฑ ูู ูุญูุทู ูุฎุชุจุฑ ุซุจุงุชูุ ุฅู ุงูุดุบูุช ุจุงูุถุฌูุฌุ ุถุงุนุช ุงูุฅุดุงุฑุฉ.",
    "ูุนูููุฉ ูุจุชูุฑุฉ ูุฏ ุชููุฏู ูุงุชุฌุงู ุฎุงุทุฆุ ุฌุฒุก ููููุฏ ููุบูููุฑ ุงููุฑุงุกุฉ.",
    "ุธูุงู ุบูุฑุฉ ุฃู ุชูุงูุณ ุชุธูุฑ ูู ุฏุงุฆุฑุฉ ูุฑูุจุฉุ ูุง ุชููุญูุง ุฃูุซุฑ ูู ุญุฌููุง.",
    "ุณุญุงุจุฉ ุทุงุฑุฆุฉ ุชูุฑ ุณุฑูุนูุงุ ููููุง ุชูุนูููู ููุถุน ุงูุณูู ุงููุงุทุฆ ูู ุงูุจูุช."
  ];

  // ููุถุงุช ูุณุชูุจููุฉ (ุทุงุจุน ูุจูุฆู ุนุงู)
  const OMENS = [
    "ููุถุฉ ูุณุชูุจููุฉ: ุงูุชุฒุงุฒุงุช ุนูู ูุณุงูุฉ ูุฑูุจุฉ ุซู ุณูููุ ูุจุนุฏ ุงูุณููู ุชุจุฏูู ูู ุงููุฌูู.",
    "ููุถุฉ ูุณุชูุจููุฉ: ุจุงุจ ููุชุญ ูุฑุชููุ ุงูุฃููู ููุงูุชุญุงู ูุงูุซุงููุฉ ูููุฑุฌ.",
    "ููุถุฉ ูุณุชูุจููุฉ: ุฑุณุงูุฉ ูุตูุฑุฉ ุชุบููุฑ ุงุชุฌุงู ุฃุณุจูุนู ูุฃููุง ุฅุดุงุฑุฉ ูู ุจุนูุฏ.",
    "ููุถุฉ ูุณุชูุจููุฉ: ููุงุก ุนุงุจุฑ ูุญูู ุฃุซุฑูุง ุฃุทูู ูู ุฒูููุ ูุง ุชุณุชููู ุจู."
  ];

  // ========= ุฃุฏูุงุช ูุณุงุนุฏุฉ ูุญูุธ ุงูุจูุงูุงุช =========
  const $ = sel => document.querySelector(sel);
  const step1 = $("#step1"), stepLoading = $("#stepLoading"), stepTopics = $("#stepTopics"), stepResult = $("#stepResult");
  const userEcho = $("#userEcho"), resultText = $("#resultText"), omenEl = $("#omen");
  const startBtn = $("#startBtn"), shuffleDemo = $("#shuffleDemo");
  const againBtn = $("#againBtn"), topicsBtn = $("#topicsBtn"), restartBtn = $("#restartBtn");
  const clearBtn = $("#clearBtn");
  const yearEl = $("#year"); yearEl.textContent = new Date().getFullYear();

  function saveForm(){
    const data = {
      age: $("#age").value || "",
      gender: $("#gender").value || "",
      status: $("#status").value || "",
      birthdate: $("#birthdate").value || ""
    };
    localStorage.setItem("istibsar_form", JSON.stringify(data));
  }
  function loadForm(){
    try{
      const data = JSON.parse(localStorage.getItem("istibsar_form")||"{}");
      if(data.age) $("#age").value = data.age;
      if(data.gender) $("#gender").value = data.gender;
      if(data.status) $("#status").value = data.status;
      if(data.birthdate) $("#birthdate").value = data.birthdate;
    }catch(e){}
  }
  function clearForm(){
    localStorage.removeItem("istibsar_form");
    $("#age").value = ""; $("#gender").value=""; $("#status").value=""; $("#birthdate").value="";
  }
  ["age","gender","status","birthdate"].forEach(id=>{
    document.getElementById(id).addEventListener("input", saveForm);
    document.getElementById(id).addEventListener("change", saveForm);
  });
  clearBtn.addEventListener("click", ()=>{ clearForm(); alert("ุชู ุญุฐู ุจูุงูุงุชู ูู ูุฐุง ุงููุชุตูุญ."); });

  // ุนุดูุงุฆูุฉ ูุงุจูุฉ ููุชูุฑุงุฑ + ุงุฎุชูุงู ุฏุงุฆู
  function seeded(seed){ let x = seed ^ Date.now(); return function(){ x ^= x<<13; x ^= x>>>17; x ^= x<<5; return ((x>>>0)/4294967296); } }
  function strHash(s){ let h=2166136261>>>0; for(let i=0;i<s.length;i++){ h^=s.charCodeAt(i); h=Math.imul(h,16777619);} return h>>>0; }
  function pick(rand, arr){ return arr[Math.floor(rand()*arr.length)] }

  let currentTopic = "general";
  let currentRand = seeded(123);

  function formSeed(){
    const age = $("#age").value || "";
    const gender = $("#gender").value || "";
    const status = $("#status").value || "";
    const birth = $("#birthdate").value || "";
    const key = `${age}|${gender}|${status}|${birth}`;
    return key ? strHash(key) : Math.floor(Math.random()*1e9);
  }

  function echoUser(){
    const a = $("#age").value ? `ุนูุฑ ${$("#age").value}` : "ุนูุฑ ุบูุฑ ูุญุฏุฏ";
    const g = $("#gender").value || "ุฌูุณ ุบูุฑ ูุญุฏุฏ";
    const s = $("#status").value || "ุญุงูุฉ ุบูุฑ ูุญุฏุฏุฉ";
    const b = $("#birthdate").value || "ูููุงุฏ ุบูุฑ ูุนุฑูู";
    userEcho.textContent = `${g} โข ${s} โข ${a} โข ${b}`;
  }

  function show(el){ el.classList.remove("hidden") }
  function hide(el){ el.classList.add("hidden") }

  function startFlow(){
    hide(step1); show(stepLoading);
    setTimeout(()=>{ hide(stepLoading); show(stepTopics); }, 1200);
  }

  function buildBlock(title, items){
    return `<h3>${title}</h3><ul>${items.map(i=>`<li>${i}</li>`).join("")}</ul>`;
  }

  function buildReport(topic){
    const bank = {
      love:   {pos:LOVE_P,   warn:LOVE_W,   title:"ุงูุญุจ"},
      health: {pos:HEALTH_P, warn:HEALTH_W, title:"ุงูุตุญุฉ"},
      career: {pos:CAREER_P, warn:CAREER_W, title:"ุงููููุฉ/ุงูุซุฑูุฉ"},
      general:{pos:GENERAL_P,warn:GENERAL_W,title:"ุนุงู"}
    }[topic];

    const intro = `<p><strong>${bank.title}:</strong> ุฃูุช ุฏุงุฎู ูุณุงุฑ ุชุชูุงุซุฑ ููู ุงูุฅุดุงุฑุงุช. ูุง ูุธูุฑ ุงูุขู ููุณ ุญูููุง ููุงุฆููุง ุจู ููุงูุญ ูุฑูุจุฉ.</p>`;
    // ุงุฎุชูุงุฑ ููุฑุชูู ุชููุนุงุช ูููุฑุชูู ุชุญุฐูุฑ
    const r = seeded(Math.floor(currentRand()*1e9));
    const ps = [...bank.pos].sort(()=>r()-0.5).slice(0,2);
    const ws = [...bank.warn].sort(()=>r()-0.5).slice(0,2);

    const positives = buildBlock("ุชููุนุงุช", ps);
    const warnings  = buildBlock("ุชุญุฐูุฑุงุช", ws);

    return `${intro}${positives}${warnings}`;
  }

  function genReading(topic){
    const html = buildReport(topic);
    resultText.innerHTML = html;
    omenEl.textContent = pick(currentRand, OMENS);
  }

  // ุงูุฃุญุฏุงุซ
  document.getElementById("startBtn").addEventListener("click", ()=>{
    currentRand = seeded(formSeed()); saveForm(); startFlow();
  });
  document.getElementById("shuffleDemo").addEventListener("click", ()=>{
    currentRand = seeded(Math.floor(Math.random()*1e9)); startFlow();
  });

  document.querySelectorAll(".topic").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      currentTopic = btn.dataset.topic;
      hide(stepTopics); show(stepResult);
      echoUser(); genReading(currentTopic);
    });
  });

  document.getElementById("againBtn").addEventListener("click", ()=>{
    currentRand = seeded(formSeed()); genReading(currentTopic);
  });
  document.getElementById("topicsBtn").addEventListener("click", ()=>{
    hide(stepResult); show(stepTopics);
  });
  document.getElementById("restartBtn").addEventListener("click", ()=>{
    hide(stepResult); hide(stepTopics); show(step1); window.scrollTo({top:0, behavior:"smooth"});
  });

  // ุชุญููู ุจูุงูุงุช ูุญููุธุฉ
  loadForm();
</script>
</body>
</html>
