<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>حساب التكليف الشرعي (فقه شيعي)</title>
<style>
  :root{
    --bg:#0f172a;        /* كحلي داكن مائل للأخضر */
    --card:#ffffff;
    --ink:#0b132b;
    --muted:#6b7280;
    --brand:#0ea5a2;     /* أخضر مزرق هادئ */
    --accent:#b58900;    /* ذهبي */
    --ring:#10b981;      /* أخضر */
    --danger:#ef4444;    /* أحمر */
    --warn:#f59e0b;      /* برتقالي */
    --info:#3b82f6;      /* أزرق */
    --ok:#16a34a;        /* أخضر واجب */
    --surface:#f8fafc;
    --chip:#eef2ff;
    --radius:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: "Cairo", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background:
      radial-gradient(1200px 600px at 120% -10%, rgba(186,153,56,0.25), transparent 60%),
      radial-gradient(1200px 600px at -20% 110%, rgba(16,185,129,0.15), transparent 60%),
      var(--bg);
    color:#0b1b2b;
  }
  header{
    padding:28px 18px; color:#fff; text-align:center;
    background: linear-gradient(135deg, rgba(14,165,162,.25), rgba(181,137,0,.15));
    border-bottom:1px solid rgba(255,255,255,.08);
  }
  .title{font-weight:800; font-size:clamp(22px,3.6vw,34px); letter-spacing:.3px}
  .subtitle{color:#e5e7eb; margin-top:6px; font-size:14px}
  .shell{max-width:1000px; margin:22px auto; padding:0 14px}
  .panel{
    background:var(--card); border-radius:var(--radius);
    box-shadow: 0 10px 30px rgba(0,0,0,.08);
    padding:16px; margin-bottom:16px;
    border:1px solid #e5e7eb;
  }
  .row{display:grid; gap:14px}
  @media(min-width:860px){ .row{grid-template-columns:1fr 1fr} }
  .panel h3{margin:0 0 6px; font-size:18px}
  .muted{color:var(--muted); font-size:13px}
  label{font-size:14px; color:#1f2937}
  input[type="number"], select{
    width:100%; padding:12px 12px; border-radius:12px; border:1px solid #d1d5db; outline:none;
    background:var(--surface);
  }
  input:focus, select:focus{border-color:var(--ring); box-shadow:0 0 0 3px rgba(16,185,129,.15)}
  .tabs{display:flex; gap:8px; margin:10px 0 6px}
  .tab{
    padding:10px 14px; border-radius:999px; border:1px solid #d1d5db; background:#fff; cursor:pointer;
    font-size:14px
  }
  .tab.on{background:var(--brand); color:#fff; border-color:var(--brand)}
  .status{
    padding:10px 12px; border-radius:12px; background:#f0fdf4; color:#065f46; border:1px solid #bbf7d0;
    font-size:14px; display:flex; align-items:center; gap:8px; margin-top:10px
  }
  .status.off{background:#fef2f2; color:#7f1d1d; border-color:#fecaca}
  .chips{display:flex; flex-wrap:wrap; gap:8px; margin:8px 0}
  .chip{
    padding:6px 10px; border-radius:999px; font-size:12px; border:1px solid #e5e7eb; background:var(--chip)
  }
  .chip.ok{background:#ecfdf5; border-color:#a7f3d0; color:#065f46}
  .chip.bad{background:#fef2f2; border-color:#fecaca; color:#7f1d1d}
  .chip.info{background:#eff6ff; border-color:#bfdbfe; color:#1e40af}
  .chip.warn{background:#fffbeb; border-color:#fde68a; color:#92400e}
  details{border:1px dashed #e5e7eb; padding:10px 12px; border-radius:12px; background:#fff}
  details>summary{cursor:pointer; font-weight:700; list-style:none}
  .grid{display:grid; gap:12px}
  @media(min-width:720px){ .grid.two{grid-template-columns:1fr 1fr} }
  .card{
    border:1px solid #e5e7eb; border-radius:14px; padding:12px; background:#fff
  }
  .card h4{margin:0 0 6px}
  .badges{display:flex; gap:6px; flex-wrap:wrap}
  .badge{font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid transparent}
  .b-واجـب{background:#ecfdf5; color:#065f46; border-color:#a7f3d0}
  .b-مستحب{background:#eff6ff; color:#1e40af; border-color:#bfdbfe}
  .b-محرم{background:#fef2f2; color:#7f1d1d; border-color:#fecaca}
  .b-مكروه{background:#fffbeb; color:#92400e; border-color:#fde68a}
  .b-مباح{background:#f3f4f6; color:#111827; border-color:#e5e7eb}
  ul.check{margin:6px 0 0 0; padding:0 0 0 18px}
  .btn{
    display:inline-block; margin-top:10px; padding:10px 14px; border-radius:10px; border:1px solid #d1d5db; background:#fff;
    cursor:pointer; font-size:14px
  }
  .btn.gold{background:linear-gradient(90deg, #b58900, #eab308); color:#111827; border:none}
  .hint{
    padding:10px 12px; border-radius:12px; background:rgba(253,230,138,.25); border:1px solid #fde68a; color:#7a5a00; font-size:13px
  }
  footer{
    text-align:center; color:#e5e7eb; padding:24px 14px; margin-top:24px;
    border-top:1px solid rgba(255,255,255,.08)
  }
  .small{font-size:12px; color:#9ca3af}
  dialog{
    border:none; border-radius:16px; padding:0; max-width:560px; width:calc(100% - 24px);
    box-shadow:0 30px 80px rgba(0,0,0,.4)
  }
  .modal-head{padding:16px; background:#0ea5a2; color:#fff; border-radius:16px 16px 0 0}
  .modal-body{padding:14px; background:#fff}
  .close{all:unset; float:left; cursor:pointer; padding:6px 8px; background:#fff2; border-radius:8px}
</style>
</head>
<body>
<header>
  <div class="title">حِساب التكلِيف الشرعي — الفقه الإمامي (الجعفري)</div>
  <div class="subtitle">واجهة مبسّطة للفروق بين الفتاة والصبي، مع قوائم تحقق وتعريفات قصيرة. <span class="small">⚠️ الأحكام تختلف باختلاف فتوى المرجع—ارجع دائمًا لمرجع تقليدك.</span></div>
</header>

<div class="shell">
  <!-- اختيار النوع والعمر -->
  <div class="panel">
    <h3>البدء</h3>
    <div class="tabs" id="genderTabs">
      <button class="tab on" data-g="girl">فتاة</button>
      <button class="tab" data-g="boy">صبي</button>
    </div>
    <div class="row">
      <div>
        <label>العمر (سنوات شمسية تقريبية)</label>
        <input id="age" type="number" min="1" max="30" value="12" inputmode="numeric" />
        <div class="muted">ملاحظة: السنّ في الفقه يعتمد على <b>السنوات القمرية</b>، وهذا الحساب تقريبي.</div>
      </div>
      <div>
        <label>تحويل تقريبي إلى قَمري</label>
        <input id="ageHijri" type="number" readonly />
        <div id="status" class="status" role="status">سيتم تحديد حالة التكليف تلقائيًا…</div>
      </div>
    </div>
    <div class="chips">
      <span class="chip info" title="تعريف سريع">التقليد = اتباع فتوى المرجع الأعلم لديك.</span>
      <span class="chip warn">البلوغ: 9 قمرية للفتاة، 15 قمرية للصبي (مع علامات البلوغ).</span>
      <button class="chip" id="openDisclaimer">تنبيه فقهي</button>
    </div>
  </div>

  <!-- بطاقتا المحتوى -->
  <div class="row">
    <!-- بطاقة الفتاة -->
    <section class="panel" id="girlCard">
      <h3>الفتاة</h3>
      <div class="muted">ستظهر الواجبات عند تحقق سنّ التكليف.</div>

      <details open>
        <summary>الطهارة</summary>
        <div class="grid two">
          <div class="card">
            <h4>ملخص سريع</h4>
            <div class="badges">
              <span class="badge b-واجـب">واجـب</span><span class="badge b-مستحب">مستحب</span>
            </div>
            <p>الطهارة شرط لصحة الصلاة. يشملها الوضوء/الغسل وأحكام النجاسة والطهارة.</p>
            <ul class="check">
              <li><input type="checkbox"> أتوضأ للصلاة</li>
              <li><input type="checkbox"> أتحقق من طهارة الثوب والبدن</li>
            </ul>
            <button class="btn" data-more="tahara">تفاصيل مختصرة</button>
          </div>
          <div class="card">
            <h4>مصطلحات</h4>
            <p class="hint"><b>وضوء:</b> غسل الوجه واليدين ومسح الرأس والقدمين على ترتيب مخصوص.</p>
            <p class="hint"><b>غسل:</b> تعميم الماء على البدن بنية رفع الحدث الأكبر.</p>
          </div>
        </div>
      </details>

      <details>
        <summary>الصلاة</summary>
        <div class="grid two">
          <div class="card">
            <h4>ملخص سريع</h4>
            <div class="badges"><span class="badge b-واجـب">واجـب</span></div>
            <p>الصلاة عمود الدين. خمس صلوات يوميًا بشروط الوقت والطهارة والقبلة والستر.</p>
            <ul class="check">
              <li><input type="checkbox"> أديتُ الفجر اليوم</li>
              <li><input type="checkbox"> أديتُ الظهرين</li>
              <li><input type="checkbox"> أديتُ العشاءين</li>
            </ul>
            <button class="btn" data-more="salah">تفاصيل مختصرة</button>
          </div>
          <div class="card">
            <h4>الستر والحجاب أثناء الصلاة</h4>
            <p class="hint">ستر الشعر وسائر البدن ما عدا الوجه والكفين والقدمين حسب فتوى المرجع.</p>
          </div>
        </div>
      </details>

      <details>
        <summary>الصيام</summary>
        <div class="grid two">
          <div class="card">
            <h4>ملخص سريع</h4>
            <div class="badges"><span class="badge b-واجـب">واجـب</span></div>
            <p>صوم شهر رمضان من الفجر حتى المغرب مع النية واجتناب المفطرات.</p>
            <ul class="check">
              <li><input type="checkbox"> نويتُ الصوم قبل الفجر</li>
              <li><input type="checkbox"> اجتنبتُ المفطرات</li>
            </ul>
            <button class="btn" data-more="siyam">تفاصيل مختصرة</button>
          </div>
          <div class="card">
            <h4>تنبيه صحي</h4>
            <p class="hint">أحكام الإفطار للمرض أو المشقة تختلف حسب الفتوى—استفتي مرجعك.</p>
          </div>
        </div>
      </details>

      <details>
        <summary>الحجاب</summary>
        <div class="grid two">
          <div class="card">
            <h4>ملخص سريع</h4>
            <div class="badges"><span class="badge b-واجـب">واجـب</span></div>
            <p>الحجاب واجب بعد التكليف وفق ضوابط الستر والعفة وحدود النظر والاختلاط.</p>
            <ul class="check">
              <li><input type="checkbox"> ألتزم بضوابط الستر</li>
              <li><input type="checkbox"> أتحقق من اللباس غير الشفاف والضيق</li>
            </ul>
            <button class="btn" data-more="hijab">تفاصيل مختصرة</button>
          </div>
          <div class="card">
            <h4>شارات سريعة</h4>
            <div class="chips">
              <span class="chip ok">واجب: الستر</span>
              <span class="chip bad">محرم: إظهار الزينة للأجانب</span>
              <span class="chip info">تفصيلها عند المرجع</span>
            </div>
          </div>
        </div>
      </details>

      <details>
        <summary>التقليد والخمس</summary>
        <div class="grid two">
          <div class="card">
            <h4>التقليد</h4>
            <div class="badges"><span class="badge b-واجـب">واجـب</span></div>
            <p>يجب اتباع فتوى المرجع الأعلم في العبادات والمعاملات.</p>
            <button class="btn" data-more="taqlid">تفاصيل مختصرة</button>
          </div>
          <div class="card">
            <h4>الخمس</h4>
            <div class="badges"><span class="badge b-واجـب">واجـب</span></div>
            <p>واجب في فاضل المؤونة ونحوها بنهاية السنة الخمسية—التفاصيل تختلف بالفتوى.</p>
            <button class="btn" data-more="khums">تفاصيل مختصرة</button>
          </div>
        </div>
      </details>
    </section>

    <!-- بطاقة الصبي -->
    <section class="panel" id="boyCard" style="display:none">
      <h3>الصبي</h3>
      <div class="muted">ستظهر الواجبات عند تحقق سنّ التكليف.</div>

      <details open>
        <summary>الطهارة</summary>
        <div class="grid two">
          <div class="card">
            <h4>ملخص سريع</h4>
            <div class="badges"><span class="badge b-واجـب">واجـب</span></div>
            <p>شرط لصحة الصلاة؛ يشمل الوضوء والغسل وأحكام النجاسة.</p>
            <ul class="check">
              <li><input type="checkbox"> أتوضأ للصلاة</li>
              <li><input type="checkbox"> أتحقق من طهارة الثوب</li>
            </ul>
            <button class="btn" data-more="tahara">تفاصيل مختصرة</button>
          </div>
          <div class="card">
            <h4>مصطلحات</h4>
            <p class="hint"><b>جنابة:</b> حدث أكبر يوجب الغسل قبل الصلاة.</p>
          </div>
        </div>
      </details>

      <details>
        <summary>الصلاة</summary>
        <div class="grid two">
          <div class="card">
            <h4>ملخص سريع</h4>
            <div class="badges"><span class="badge b-واجـب">واجـب</span></div>
            <p>خمس صلوات يوميًا مع الشروط. التزام الوقت والقبلة أساس.</p>
            <ul class="check">
              <li><input type="checkbox"> الفجر</li>
              <li><input type="checkbox"> الظهرين</li>
              <li><input type="checkbox"> العشاءين</li>
            </ul>
            <button class="btn" data-more="salah">تفاصيل مختصرة</button>
          </div>
          <div class="card">
            <h4>اللباس</h4>
            <p class="hint">يشترط للرجال ستر العورة في الصلاة—التفصيل باختلاف الفتوى.</p>
          </div>
        </div>
      </details>

      <details>
        <summary>الصيام</summary>
        <div class="grid two">
          <div class="card">
            <h4>ملخص سريع</h4>
            <div class="badges"><span class="badge b-واجـب">واجـب</span></div>
            <p>صوم رمضان بنية وترك المفطرات من الفجر إلى المغرب.</p>
            <ul class="check">
              <li><input type="checkbox"> نية الصوم</li>
              <li><input type="checkbox"> تجنب المفطرات</li>
            </ul>
            <button class="btn" data-more="siyam">تفاصيل مختصرة</button>
          </div>
          <div class="card">
            <h4>رحمة وتيسير</h4>
            <p class="hint">المرض والمشقّة لهما أحكام—تُراجع فتوى المرجع.</p>
          </div>
        </div>
      </details>

      <details>
        <summary>التقليد والخمس</summary>
        <div class="grid two">
          <div class="card">
            <h4>التقليد</h4>
            <div class="badges"><span class="badge b-واجـب">واجـب</span></div>
            <p>اتباع فتوى المرجع الأعلم في أحكام الدين.</p>
            <button class="btn" data-more="taqlid">تفاصيل مختصرة</button>
          </div>
          <div class="card">
            <h4>الخمس</h4>
            <div class="badges"><span class="badge b-واجـب">واجـب</span></div>
            <p>تفاصيل الخمس تعتمد على نوع المال وسنته الخمسية—استفْتِ مرجعك.</p>
            <button class="btn" data-more="khums">تفاصيل مختصرة</button>
          </div>
        </div>
      </details>
    </section>
  </div>

  <!-- تنبيهات عامة -->
  <div class="panel">
    <h3>أسئلة سريعة</h3>
    <details>
      <summary>متى يبدأ التكليف الشرعي؟</summary>
      <p>وفقًا للمشهور: الفتاة عند <b>تمام 9 سنوات قمرية</b>، والصبي عند <b>تمام 15 سنة قمرية</b>، مع اعتبار علامات البلوغ الجسدية. وقد تختلف التفاصيل باختلاف المرجع.</p>
    </details>
    <details>
      <summary>هل تختلف الأحكام باختلاف المرجع؟</summary>
      <p>نعم، لذلك هذه الصفحة للتثقيف العام فقط، ويجب الرجوع إلى فتوى مرجع التقليد في الحالات التفصيلية.</p>
    </details>
  </div>
</div>

<footer>
  <div>اللهم وفّق أبناءنا وبناتنا لما تحب وترضى.</div>
  <div class="small">تصميم واجهة — قابل للتوسعة بمحتوى فتواك المعتمدة.</div>
</footer>

<!-- نافذة التنبيه -->
<dialog id="disclaimer">
  <div class="modal-head">
    <button class="close" onclick="document.getElementById('disclaimer').close()">✕</button>
    <h3>تنبيه فقهي</h3>
  </div>
  <div class="modal-body">
    <p>هذه الواجهة للشرح المبسّط فقط، ولا تُغني عن الرجوع إلى <b>فتوى مرجع التقليد</b>. قد تختلف بعض التفاصيل (سنّ البلوغ، حدود الستر، المفطرات، الخمس…). التزم بفتوى مرجعك.</p>
    <button class="btn gold" onclick="document.getElementById('disclaimer').close()">مفهوم</button>
  </div>
</dialog>

<!-- نوافذ “تفاصيل مختصرة” -->
<dialog id="modal-details">
  <div class="modal-head">
    <button class="close" onclick="document.getElementById('modal-details').close()">✕</button>
    <h3 id="modal-title">تفاصيل</h3>
  </div>
  <div class="modal-body" id="modal-body">
    <!-- يتم ملؤه برمجيًا -->
    <button class="btn" onclick="document.getElementById('modal-details').close()">إغلاق</button>
  </div>
</dialog>

<script>
  const TEMPLATES = {
    tahara: {
      title: "الطهارة — تفاصيل مختصرة",
      body: `
      <div class="grid">
        <div class="card">
          <h4>الوضوء (واجب للصلاة)</h4>
          <ul class="check">
            <li>النية</li>
            <li>غسل الوجه</li>
            <li>غسل اليد اليمنى ثم اليسرى</li>
            <li>مسح مقدّم الرأس</li>
            <li>مسح ظاهر القدمين</li>
          </ul>
        </div>
        <div class="card">
          <h4>الغسل</h4>
          <p>لرفع الحدث الأكبر. ترتيبي/ارتماسي حسب الفتوى.</p>
        </div>
        <div class="card">
          <h4>النجاسة والطهارة</h4>
          <p>تحقّق من طهارة اللباس والبدن ومحل السجود.</p>
        </div>
      </div>`
    },
    salah: {
      title: "الصلاة — تفاصيل مختصرة",
      body: `
      <div class="grid">
        <div class="card">
          <h4>شروط الصحة</h4>
          <ul class="check">
            <li>الطهارة (وضوء/غسل)</li>
            <li>الوقت</li>
            <li>القبلة</li>
            <li>الستر (وفق الجنس)</li>
          </ul>
        </div>
        <div class="card">
          <h4>هيئة الصلاة</h4>
          <p>القيام والقراءة والركوع والسجود والتشهد والتسليم—بتفاصيل تُراجع في فتوى المرجع.</p>
        </div>
      </div>`
    },
    siyam: {
      title: "الصيام — تفاصيل مختصرة",
      body: `
      <div class="grid">
        <div class="card">
          <h4>الأركان</h4>
          <ul class="check">
            <li>النية</li>
            <li>الإمساك عن المفطرات من الفجر إلى المغرب</li>
          </ul>
        </div>
        <div class="card">
          <h4>ملاحظات</h4>
          <p>أحكام المرض، السفر، الحيض والنفاس، والكفارات تختلف باختلاف الفتوى.</p>
        </div>
      </div>`
    },
    hijab: {
      title: "الحجاب — تفاصيل مختصرة",
      body: `
      <div class="grid">
        <div class="card">
          <h4>الأصل</h4>
          <p>ستر البدن على نحو لا يصف البشرة ولا يلفت—مع اختلاف التفصيل باختلاف المرجع.</p>
        </div>
        <div class="card">
          <h4>النظر والاختلاط</h4>
          <p>التزام حدود النظر والكلام بما لا يوقع في الريبة—التفصيل عند المرجع.</p>
        </div>
      </div>`
    },
    taqlid: {
      title: "التقليد — تفاصيل مختصرة",
      body: `
      <div class="grid">
        <div class="card">
          <h4>الواجب</h4>
          <p>اتباع فتوى المرجع الأعلم لديك. اسأل عن رسالته العمليّة.</p>
        </div>
        <div class="card">
          <h4>كيف أعمل؟</h4>
          <ul class="check">
            <li>أحدّد المرجع</li>
            <li>أطّلع على الأحكام</li>
            <li>أطبّق الفتوى في العبادات والمعاملات</li>
          </ul>
        </div>
      </div>`
    },
    khums: {
      title: "الخمس — تفاصيل مختصرة",
      body: `
      <div class="grid">
        <div class="card">
          <h4>مختصر</h4>
          <p>الخمس في فاضل المؤونة ونحوها عند نهاية السنة الخمسية. أنصبة ومصارفه تُراجع في فتوى المرجع.</p>
        </div>
        <div class="card">
          <h4>خطوات عملية</h4>
          <ul class="check">
            <li>تحديد بداية السنة الخمسية</li>
            <li>حساب الفاضل</li>
            <li>تسليم الخمس حسب المصارف الشرعية</li>
          </ul>
        </div>
      </div>`
    }
  };

  const hijriFactor = 1.03; // تحويل تقريبي (شمسي → قمري)
  const ageEl = document.getElementById('age');
  const ageHijriEl = document.getElementById('ageHijri');
  const statusEl = document.getElementById('status');
  const girlCard = document.getElementById('girlCard');
  const boyCard = document.getElementById('boyCard');
  const tabs = document.querySelectorAll('.tab');
  let gender = 'girl';

  function updateState(){
    const ageSolar = parseFloat(ageEl.value||"0");
    const ageHijri = Math.max(0, Math.round(ageSolar * hijriFactor * 10)/10);
    ageHijriEl.value = ageHijri;

    const threshold = (gender==='girl') ? 9 : 15;
    const isMukallaf = ageHijri >= threshold;

    statusEl.classList.toggle('off', !isMukallaf);
    statusEl.innerHTML = isMukallaf
      ? `✅ تمّ بلوغ سنّ التكليف (${ageHijri} قمري ≥ ${threshold}). تظهر الواجبات كاملة.`
      : `⏳ لم يبلغ سنّ التكليف بعد (${ageHijri} قمري &lt; ${threshold}). يمكن التعلم المبدئي.`;
  }

  tabs.forEach(t=>{
    t.addEventListener('click', ()=>{
      tabs.forEach(x=>x.classList.remove('on'));
      t.classList.add('on');
      gender = t.dataset.g;
      if(gender==='girl'){ girlCard.style.display='block'; boyCard.style.display='none'; }
      else { girlCard.style.display='none'; boyCard.style.display='block'; }
      updateState();
    })
  });

  document.getElementById('openDisclaimer').addEventListener('click', ()=>{
    document.getElementById('disclaimer').showModal();
  });

  document.querySelectorAll('.btn[data-more]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const key = btn.dataset.more;
      const modal = document.getElementById('modal-details');
      document.getElementById('modal-title').textContent = TEMPLATES[key].title;
      document.getElementById('modal-body').innerHTML = TEMPLATES[key].body + `<button class="btn" onclick="document.getElementById('modal-details').close()">إغلاق</button>`;
      modal.showModal();
    })
  });

  ageEl.addEventListener('input', updateState);
  updateState();
</script>
</body>
</html>
