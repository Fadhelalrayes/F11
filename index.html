<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ุงูุงุณุชุจุตุงุฑ โ ูุฑุงุกุงุช ูุฌุงููุฉ</title>
<style>
  :root{
    --bg:#0e0f12; --fg:#f7f7f7; --muted:#bdbdbd;
    --brand:#ffd54a; --card:#16181f; --stroke:#2a2e38; --ok:#2bd67b;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: system-ui, -apple-system, "Cairo", "Noto Naskh Arabic", Segoe UI, Roboto, sans-serif;
    background:var(--bg); color:var(--fg); -webkit-font-smoothing:antialiased
  }
  header{display:flex; align-items:center; justify-content:space-between; padding:18px 16px; border-bottom:1px solid var(--stroke)}
  .brand{display:flex; gap:10px; align-items:center}
  .logo{width:32px; height:32px; border-radius:50%; border:2px solid var(--brand); display:grid; place-items:center}
  .logo span{width:10px; height:10px; border-radius:50%; border:2px solid var(--brand)}
  .title{font-weight:800; letter-spacing:.2px}
  .container{max-width:840px; margin:0 auto; padding:20px 16px}
  .card{
    background:var(--card); border:1px solid var(--stroke); border-radius:18px; padding:18px; margin:14px 0;
    box-shadow:0 10px 30px rgba(0,0,0,.2)
  }
  h1,h2{color:var(--brand); margin:10px 0 8px}
  p.muted{color:var(--muted); margin:6px 0 0}
  label{display:block; margin:10px 0 6px; color:#eaeaea; font-size:14px}
  input,select,button{
    width:100%; padding:12px 14px; border-radius:12px; border:1px solid var(--stroke);
    background:#0f1117; color:var(--fg); font-size:16px; outline:none
  }
  input:focus, select:focus{border-color:var(--brand); box-shadow:0 0 0 3px rgba(255,213,74,.15)}
  .grid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
  @media (max-width:640px){ .grid{grid-template-columns:1fr} }
  .btn{
    border:0; background:linear-gradient(135deg, var(--brand), #ffb300);
    color:#221; font-weight:800; cursor:pointer; transition:transform .08s ease, filter .2s ease;
    letter-spacing:.2px
  }
  .btn:active{transform:scale(.99)}
  .ghost{background:transparent; border:1px solid var(--brand); color:var(--brand)}
  .center{display:grid; place-items:center}
  .hidden{display:none !important}
  .topic-grid{display:grid; grid-template-columns:repeat(2,1fr); gap:14px}
  .topic{padding:18px; border:1px dashed var(--brand); border-radius:14px; background:#0f1117; cursor:pointer}
  .topic:hover{background:#121520}
  .topic span{display:block; color:var(--muted); font-size:14px; margin-top:4px}
  .result{line-height:1.9}
  .tag{display:inline-block; padding:4px 10px; border-radius:999px; border:1px solid var(--stroke); color:var(--muted); font-size:13px}
  footer{padding:28px 16px; text-align:center; color:var(--muted); border-top:1px solid var(--stroke)}
  /* Loading ring */
  .ring-wrap{height:260px; display:grid; place-items:center}
  .ring{
    width:140px; height:140px; border-radius:50%;
    border:6px solid rgba(255,255,255,.08); border-top-color:var(--brand);
    animation:spin 1.2s linear infinite; position:relative
  }
  .ring:after{
    content:""; position:absolute; inset:18px; border-radius:50%;
    border:4px dashed rgba(255,255,255,.12)
  }
  @keyframes spin{to{transform:rotate(360deg)}}
  .sub{color:var(--muted); margin-top:10px}
  .pill{display:inline-flex; align-items:center; gap:8px; background:#10131a; border:1px solid var(--stroke); padding:8px 12px; border-radius:999px; font-size:13px}
  .ok{color:var(--ok); font-weight:700}
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="logo" aria-hidden="true"><span></span></div>
    <div>
      <div class="title">ุงูุงุณุชุจุตุงุฑ</div>
      <div style="font-size:12px; color:var(--muted)">ูุฑุงุกุงุช ููููุฉ ูุฌุงููุฉ โ ุตูุญุฉ ูุงุญุฏุฉ</div>
    </div>
  </div>
  <div class="pill"><span>ูุฌุงูู 100%</span> <span class="ok">โ</span></div>
</header>

<main class="container">

  <!-- ุงูุฎุทูุฉ 1: ุฅุฏุฎุงู ุงูุจูุงูุงุช -->
  <section id="step1" class="card">
    <h1>ุงุจุฏุฃ ูุฑุงุกุชู</h1>
    <p class="muted">ุฃุฏุฎู ุจูุงูุงุชู ุงูุฃุณุงุณูุฉ ุซู ุงุถุบุท โุงุจุฏุฃโ. ูู ูุญุชูุธ ุจุฃู ูุนูููุงุช.</p>
    <div class="grid">
      <div>
        <label>ุงูุนูุฑ</label>
        <input id="age" type="number" min="5" max="120" placeholder="ูุซุงู: 43">
      </div>
      <div>
        <label>ุงูุฌูุณ</label>
        <select id="gender">
          <option value="">ุงุฎุชุฑ</option>
          <option>ุฐูุฑ</option>
          <option>ุฃูุซู</option>
          <option>ุบูุฑ ุฐูู</option>
        </select>
      </div>
      <div>
        <label>ุงูุญุงูุฉ ุงูุงุฌุชูุงุนูุฉ</label>
        <select id="status">
          <option value="">ุงุฎุชุฑ</option>
          <option>ุฃุนุฒุจ/ุนุฒุจุงุก</option>
          <option>ูุชุฒูุฌ/ูุชุฒูุฌุฉ</option>
          <option>ูููุตู/ูููุตูุฉ</option>
          <option>ูุฎุทูุจ/ูุฎุทูุจุฉ</option>
        </select>
      </div>
      <div>
        <label>ุชุงุฑูุฎ ุงููููุงุฏ</label>
        <input id="birthdate" type="date">
      </div>
    </div>
    <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap">
      <button class="btn" id="startBtn">ุงุจุฏุฃ ุงููุฑุงุกุฉ</button>
      <button class="ghost" id="shuffleDemo">ูุฑุงุกุฉ ููุฑูุฉ ุชุฌุฑูุจูุฉ</button>
    </div>
  </section>

  <!-- ุงูุฎุทูุฉ 2: ุดุงุดุฉ ุงูุชุธุงุฑ -->
  <section id="stepLoading" class="card hidden center">
    <div>
      <div class="ring-wrap">
        <div class="ring" aria-hidden="true"></div>
      </div>
      <h2>ุฌุงุฑู ุงูุงุณุชุจุตุงุฑโฆ</h2>
      <p class="sub">ูููู ุจูุฒุฌ ุฃููุงุท ููููุฉ ุนุงูุฉ ูุน ุฎูุงุฑุฒููุฉ ุชูููุฏ ูุตูุต ูุตูุฑุฉ โ ุงูุชุธุฑ ูุญุธุงุช.</p>
    </div>
  </section>

  <!-- ุงูุฎุทูุฉ 3: ุงุฎุชูุงุฑ ุงูููุถูุน -->
  <section id="stepTopics" class="card hidden">
    <h2>ุงุฎุชุฑ ููุถูุน ูุฑุงุกุชู</h2>
    <div class="topic-grid">
      <button class="topic" data-topic="love">ุงูุญุจ โค๏ธ<span>ุงูุนูุงูุงุชุ ุงูุงูุฌุฐุงุจุ ุงููุตุงูุญุงุช</span></button>
      <button class="topic" data-topic="health">ุงูุตุญุฉ ๐<span>ุงูุทุงูุฉุ ุงูุนุงุฏุงุชุ ุงูุชูุงุฒู</span></button>
      <button class="topic" data-topic="career">ุงููููุฉ/ุงูุซุฑูุฉ ๐ผ<span>ุงููุฑุตุ ุงููุฑุงุฑุงุชุ ุงูุงุณุชุซูุงุฑุงุช</span></button>
      <button class="topic" data-topic="general">ุนุงู โจ<span>ุฑุคูุฉ ุดุงููุฉ ููุฃูุงู ุงูููุจูุฉ</span></button>
    </div>
  </section>

  <!-- ุงูุฎุทูุฉ 4: ุงููุชูุฌุฉ -->
  <section id="stepResult" class="card hidden">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap">
      <h2 style="margin:0">ูุชูุฌุชู</h2>
      <div class="tag" id="userEcho"></div>
    </div>
    <div class="result" id="resultText" style="margin-top:12px"></div>
    <div id="globalSnippet" class="muted" style="margin-top:12px; font-size:15px"></div>
    <div style="display:flex; gap:10px; margin-top:16px; flex-wrap:wrap">
      <button class="btn" id="againBtn">ูุฑุงุกุฉ ุฌุฏูุฏุฉ (ููุณ ุงูููุถูุน)</button>
      <button class="ghost" id="topicsBtn">ุงุฎุชูุงุฑ ููุถูุน ุขุฎุฑ</button>
      <button class="ghost" id="restartBtn">ุฅุนุงุฏุฉ ุงูุจุฏุก</button>
    </div>
    <p class="muted" style="margin-top:12px">ุชูุจูู: ูุฐู ุงููุฑุงุกุงุช ูุฃุบุฑุงุถ ุชุฑููููุฉ ูุชุฃูููุฉ ููุทุ ูููุณุช ูุตูุญุฉ ุทุจูุฉ/ูุงููููุฉ/ูุงููุฉ.</p>
  </section>

</main>

<footer>
  ยฉ <span id="year"></span> ุงูุงุณุชุจุตุงุฑ โ ุตูุญุฉ ูุฌุงููุฉ. ุฌููุน ุงููุตูุต ูุตุงุบุฉ ุจุฃุณููุจ ุนุงู ูุณุชูุญู ูู ููุงูุฌ ููููุฉ ูุชูุงููุฏ ุนุฑุงูุฉ ูุนุฑููุฉ ุนุงููููุง.
</footer>

<script>
  // ====== ุจูุงูุงุช ูุตูุต ูุชุนุฏุฏุฉ ูุถูุงู ุชุบููุฑ ุงูุทุงูุน ูู ูู ูุฑุฉ ======
  const LOVE = [
    "ุชููุญ ูุฑุตุฉ ุชูุงุฑุจ ุจุนุฏ ุณูุก ููู ูุฏููุ ูููุฉ ุตุงุฏูุฉ ุชูุตูุญ ุงููุซูุฑ ูุชูุดู ููุงูุง ุญุณูุฉ.",
    "ุงูุฌุฐุงุจ ููุงุฌุฆ ูุทุฑู ุจุงุจูุ ูุง ุชุชุนุฌูู ุงูุญูู โ ุงููุญ ุงูููุงุก ูุณุงุญุฉ ููููู.",
    "ููู ุนุงุทูู ูุชูููุจุ ููู ูุจุงุฏุฑุชู ุงููุทููุฉ ุชุนูุฏ ุงูุชูุงุฒู ูุชุฎูู ุงูุญุฏุฉ.",
    "ุชุชุจุฏูู ุฃููููุงุชู: ุงูุงุณุชูุฑุงุฑ ูุชูุฏู ุนูู ุงููุบุงูุฑุฉุ ูุชุฎุชุงุฑ ูุง ูุทูุฆู ููุจู.",
    "ุฑุณุงูุฉ ุบูุฑ ูุชููุนุฉ ุชูุญูู ุดุนูุฑูุง ุฌูููุงูุ ุชุนุงูู ูุนูุง ุจูุงูุนูุฉ ุฏูู ุงูุฏูุงุน.",
    "ูููู ุฑููุงูุณูุฉ ุชูุฒูุฑ ูู ุตุฏุงูุฉ ูุฏููุฉุ ุงูุญูุงุฑ ุงูุตุฑูุญ ููููุฏ ุงูุทุฑูู.",
    "ูุฏ ููุฎุชุจุฑ ููุงุคูุ ุชูุณูู ุจุงููุถูุญ ููุง ุชุณูุญ ููุดููู ุฃู ุชูุนููุฑ ุตููู.",
    "ุชุตุงูุญ ุฏุงุฎูู ููุนูุณ ุฌุงุฐุจูุฉุ ูุชุฌุฐุจ ูู ูููู ุนููู ูุง ูุธูุฑู ููุท.",
    "ููุงุก ูุตูุฑ ุงูุฃุซุฑุ ุทููู ุงููุนููุ ุชุนููู ููู ูุง ููููู ูุนุงููุฑู ุงูุนุงุทููุฉ.",
    "ุธุฑู ุนุงุฆูู ูุฌูุน ุงููููุจ ููุนูุฏ ุงูุฏูุก ุฅูู ุนูุงูุฉ ุชูููุช."
  ];
  const HEALTH = [
    "ุทุงูุชู ุชุชุญุณูู ูุน ุฑูุชูู ููู ููุชุธูุ ุฌุฑูุจ ุฅุทูุงุก ุงูุดุงุดุงุช ุฃุจูุฑ ูู ุงููุนุชุงุฏ.",
    "ุชูุชุฑ ุฎููู ูุชุจุฏูุฏ ุจูุดูู ููููุ ุนุดุฑูู ุฏูููุฉ ุชุตูุน ูุฑููุง ููุญูุธูุง.",
    "ุฌุณุฏู ูุทูุจ ูุงุก ุฃูุซุฑุ ุงูุชุฑุทูุจ ูุนุงูุฌ ุงูุฅุฑูุงู ููุตููู ุงูุฐูู.",
    "ุงูุชุจูู ููููุชู ุฃุซูุงุก ุงูุนููุ ุชุนุฏููุงุช ุตุบูุฑุฉ ุชุฑูุญ ุธูุฑู ูุฑูุจุชู.",
    "ูุชุฑุฉ ููุงุณุจุฉ ูุชุฎููู ุงูุณูุฑูุงุชุ ูุฒุงุฌู ุณูุณุชูุฑ ุชุฏุฑูุฌููุง.",
    "ุงูุชููุณ ุงูุนููู ุซูุงุซ ูุฑุงุช ูุจู ุฃู ุญูุงุฑ ุตุนุจ ูุบููุฑ ุงููุชูุฌุฉ ุงูุตุญูุฉ ูุงูููุณูุฉ.",
    "ุงููุญ ุฌูุงุฒู ุงููุถูู ุงุณุชุฑุงุญุฉุ ูุฌุจุฉ ุฎูููุฉ ุชููู ุงูููู.",
    "ุฅุดุงุฑุงุช ุชุนุจู ููุณูุฉ ุงูููุดุฃุ ุงูุญุฏูุซ ูุน ุตุฏูู ููุซูู ููุจูุช ุซูููููุง.",
    "ููุฉ ูุงุฏุฆุฉ ุชุณุฑู ูู ุฌุณุฏู ุจุนุฏ ุฑูุงุถุฉ ุฎูููุฉุ ุงุณุชูุฑ ุจูุง ูุจุงูุบุฉ.",
    "ุงุนุชูู ุจููุงุตููุ ุชูุฏูุฏ ุตุจุงุญู ูุฎูุณุฉ ุฏูุงุฆู ููููู ุงูุดุฏู ุทูุงู ุงูููู."
  ];
  const CAREER = [
    "ููุฑู ุงููุดุฑูุน ุจููุนุทูุ ูุฑุงุฑู ุงููุจูู ุนูู ุฃุฑูุงู ูุง ุงูุทุจุงุนุงุช ูุถูู ููุณุจูุง.",
    "ูุฑุตุฉ ุชุนุงูู ูุบุฑูุฉุ ุงุฎุชุจุฑ ุงูุชุฒุงู ุงูุทุฑู ุงูุขุฎุฑ ูุจู ุงูุชูููุน.",
    "ุฎุจุฑุฉ ุณุงุจูุฉ ุชุตุจุญ ูุฑูุชู ุงูุฑุงุจุญุฉ ูู ุชูุงูุถู ูุงุฏู.",
    "ุตุจุฑู ุงููุงูู ุงูููู ูุญููู ูู ูุฏูู ุบุฏูุงุ ุฃุฌูู ุงูุฅููุงู ุงููุจูุฑ.",
    "ุนุฑุถ ูุธููู ูุฏ ูุชุทููุจ ุชูููููุงุ ุงุญุณุจ ูููุฉ ุงูููุช ูุจู ุงููุงู.",
    "ุฃููุงุฑู ุงููุชูุงุซุฑุฉ ุชุญุชุงุฌ ุฌุฏูููุง ุฃุณุจูุนููุงุ ุงูุชูุธูู ูุถุงุนู ุงูุฅูุชุงุฌ.",
    "ุชูุงุตู ูุตูุฑ ูุน ุดุฎุต ูุฏูู ููุชุญ ุจุงุจูุง ูู ุชูู ุชุชููุนู.",
    "ุณูุก ููู ุฅุฏุงุฑู ูุชุถุญ ูุตุงูุญูุ ุงููุซุงุฆู ุชุญูุธ ุญูู.",
    "ูุชุงุฆุฌ ูุณุชูุฑุฉ ุฑุบู ุงูุถูุถุงุกุ ุญุงูุธ ุนูู ูุชูุฑุฉ ุงูุนูู ุงูุญุงููุฉ.",
    "ูุคุดุฑ ูุงูู ุตุบูุฑ ูููุญ ูุงุชุฌุงู ุฅูุฌุงุจูุ ุฑุงูุจ ูุง ุชูุฏูุน."
  ];
  const GENERAL = [
    "ุชุธูุฑ ุจุฏุงูุงุช ุฌุฏูุฏุฉ ุฎูู ููุงูุฉ ูุงุฏุฆุฉุ ุงูุจู ุงูุชุญููู ูุณุชุฑู ุงูุณุนุฉ.",
    "ุฑุญูุฉ ูุตูุฑุฉ ุชุบููุฑ ูุฒุงุฌู ูุชุนูุฏ ุงูุฅููุงู ุฅูู ุฎุทุทู.",
    "ูููุฉ ุทูุจุฉ ุชููุงุจู ุจูุณุงุนุฏุฉ ุบูุฑ ูุชููุนุฉุ ุงูุงูุชูุงู ูุฒูุฏูุง.",
    "ุญููู ูุฏูู ูุนูุฏ ุจูุฑุตุฉ ุนูููุฉุ ุงูุชุฑุจ ููู ุจุฎุทูุงุช ุตุบูุฑุฉ ูุชุชุงุจุนุฉ.",
    "ุชุตููุฉ ุนูุงูุงุชู ูู ุงูุชููู ุชููุญู ุฑุงุญุฉู ูููุงุกู ูู ุงูุฃูุงู ุงููุงุฏูุฉ.",
    "ุฎุจุฑ ุณุงุฑ ูุชุณููู ูู ูุงูุฐุฉ ุฌุงูุจูุฉ ูุง ูู ุงูุจุงุจ ุงููุชููุน.",
    "ุฃุซุฑ ุฌููู ูุนููู ุฎูุฑู ููุช ุจู ุณุงุจููุง ูุนูุฏ ุจุซูุงุฑู.",
    "ุชุนููู ุฌุฏูุฏ ุฎูุงู ุฃุณุจูุนูู ููุชุญ ุฃูููุง ุดุฎุตููุง ูุงุณุนูุง.",
    "ุฑุณุงูุฉ ูู ุงููุงุถู ุชูุบูู ุตูุญุฉ ูุนูููุฉ ุจุดูู ูุงุถุฌ.",
    "ุชูุงูู ูููู ูุงุฏุฆ ููุณูู ุงุชุฎุงุฐ ูุฑุงุฑ ููุช ุชุคุฌูู."
  ];

  // ููุชุทูุงุช ุนุงูููุฉ ููุนุงุฏุฉ ุงูุตูุงุบุฉ (ุฅููุงู ูู ูุฏุงุฑุณ/ุฃุณูุงุก ูุนุฑููุฉ ุฏูู ุงูุชุจุงุณ ุญุฑูู)
  const GLOBAL_SNIPPETS = [
    "ูุณุชูุญู ูู ูุฏุงุฑุณ ุงูุชูุฌูู ุงูุญุฏูุซุฉ: ุงููุฒุงุฌ ุงููููู ุงูุนุงู ููุญู ุจูุฑุตุฉ ูุฅุนุงุฏุฉ ุชุฑุชูุจ ุงูุฃููููุงุช ูุจู ูุฑุงุฑุงุช ูุจูุฑุฉ.",
    "ุฅููุงู ูู ูุฑุงุกุงุช ุฃุนูุฏุฉ ุงูุตุญู ุงูุนุงูููุฉ: ุงูุชูุงุตู ุงูุตุฑูุญ ุงูููู ูุณุจู ุฃู ุงููุฑุงุฌ ุนุงุทูู.",
    "ุชูุงููุฏ ูุฏููุฉ ูู ูุฑุงุกุฉ ุงูููู ุชุดูุฑ ุฅูู ุฃู ุถุจุท ุงูุนุงุฏุงุช ุงูุตุบูุฑุฉ ูุตูุน ุชุญููุงุช ููููุณุฉ.",
    "ุฑูุญ ุชููุนุงุช ููุงุณูููุฉ ูู ุฑุจุงุนูุงุช ุชุงุฑูุฎูุฉ: ุงูุฃุญุฏุงุซ ุชุชุตุงุนุฏ ุซู ุชููุณุฑ ููุตูุญุฉ ุงููุชุฑููู.",
    "ูููุฌูุฉ ูุงุฑุฆู ุงูุชุงุฑูุช ุงููุนุงุตุฑูู: ุงูุจุทุก ุงููุงุนู ูู ุชูููู ุงูุนุฑูุถ ูุญููู ูู ูุจุงูุบุฉ ูุตูุฑุฉ ุงูุฃุฌู.",
    "ูุฑุงุฌุน ููููุฉ ุชุนููููุฉ ุชุดูุฑ ุฅูู ุฃู ุฌูุฏุฉ ุงูููู ุชุฑุชุจุท ูุจุงุดุฑุฉ ุจุตูุงุก ุงููุฑุงุฑ.",
    "ุฎุจุฑุงุช ูู ูุชูุงุจ ุงูุฃุจุฑุงุฌ ุงูุนุงููููู: ุฑุณุงูุฉ ูุฎุชุตุฑุฉ ูุฏ ุชุบููุฑ ุงุชุฌุงู ุฃุณุจูุนู."
  ];

  // ====== ุฃุฏูุงุช ูุณุงุนุฏุฉ ======
  const $ = sel => document.querySelector(sel);
  const step1 = $("#step1"), stepLoading = $("#stepLoading"), stepTopics = $("#stepTopics"), stepResult = $("#stepResult");
  const userEcho = $("#userEcho"), resultText = $("#resultText"), globalSnippet = $("#globalSnippet");
  const startBtn = $("#startBtn"), shuffleDemo = $("#shuffleDemo");
  const againBtn = $("#againBtn"), topicsBtn = $("#topicsBtn"), restartBtn = $("#restartBtn");
  const yearEl = $("#year"); yearEl.textContent = new Date().getFullYear();

  // XorShift ุจุณูุท ูุนุดูุงุฆูุฉ ูุงุจูุฉ ููุชูุฑุงุฑ + ุฒูู ูุถูุงู ุงุฎุชูุงู ุฏุงุฆู
  function seeded(seed){
    let x = seed ^ Date.now(); // ูุฌุนููุง ูุฎุชููุฉ ูู ูุฑุฉ
    return function(){
      // xorshift32
      x ^= x << 13; x ^= x >>> 17; x ^= x << 5;
      // ุชุญููู ุฅูู [0,1)
      return ((x >>> 0) / 4294967296);
    }
  }
  function strHash(s){
    let h=2166136261>>>0;
    for(let i=0;i<s.length;i++){ h ^= s.charCodeAt(i); h = Math.imul(h, 16777619); }
    return h>>>0;
  }
  function pick(rand, arr){ return arr[Math.floor(rand()*arr.length)] }

  // ุญูุธ ุญุงูุฉ ุงูููุถูุน ุงููุฎุชุงุฑ
  let currentTopic = "general";
  let currentRand = seeded(123);

  function formSeed(){
    const age = $("#age").value || "";
    const gender = $("#gender").value || "";
    const status = $("#status").value || "";
    const birth = $("#birthdate").value || "";
    const key = `${age}|${gender}|${status}|${birth}`;
    return key ? strHash(key) : Math.floor(Math.random()*1e9);
  }

  function echoUser(){
    const a = $("#age").value ? `ุนูุฑ ${$("#age").value}` : "ุนูุฑ ุบูุฑ ูุญุฏุฏ";
    const g = $("#gender").value || "ุฌูุณ ุบูุฑ ูุญุฏุฏ";
    const s = $("#status").value || "ุญุงูุฉ ุบูุฑ ูุญุฏุฏุฉ";
    const b = $("#birthdate").value || "ูููุงุฏ ุบูุฑ ูุนุฑูู";
    userEcho.textContent = `${g} โข ${s} โข ${a} โข ${b}`;
  }

  function show(el){ el.classList.remove("hidden") }
  function hide(el){ el.classList.add("hidden") }

  function startFlow(){
    // ุงูุชูุงู: step1 -> loading -> topics
    hide(step1); show(stepLoading);
    setTimeout(()=>{
      hide(stepLoading); show(stepTopics);
    }, 1400); // ุงูุชุธุงุฑ ูุทูู
  }

  function genReading(topic){
    const pool = { love: LOVE, health: HEALTH, career: CAREER, general: GENERAL }[topic] || GENERAL;
    const txt = pick(currentRand, pool);
    const global = (Math.random() < 0.75) ? pick(currentRand, GLOBAL_SNIPPETS) : "";
    resultText.textContent = txt;
    globalSnippet.textContent = global ? ("ููุชุทู ุนุงููู: " + global) : "";
  }

  // ====== ุงูุฃุญุฏุงุซ ======
  startBtn.addEventListener("click", ()=>{
    currentRand = seeded(formSeed());
    startFlow();
  });

  shuffleDemo.addEventListener("click", ()=>{
    // ุชุฌุฑุจุฉ ุณุฑูุนุฉ ุจุฏูู ุชุนุจุฆุฉ
    currentRand = seeded(Math.floor(Math.random()*1e9));
    startFlow();
  });

  // ุงุฎุชูุงุฑ ุงูููุถูุน
  document.querySelectorAll(".topic").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      currentTopic = btn.dataset.topic;
      hide(stepTopics); show(stepResult);
      echoUser(); genReading(currentTopic);
    });
  });

  againBtn.addEventListener("click", ()=>{
    currentRand = seeded(formSeed()); // ููุนูุฏ ุชูููุฏ ุฌุฏูุฏ
    genReading(currentTopic);
  });
  topicsBtn.addEventListener("click", ()=>{
    hide(stepResult); show(stepTopics);
  });
  restartBtn.addEventListener("click", ()=>{
    hide(stepResult); hide(stepTopics); show(step1);
    window.scrollTo({top:0, behavior:"smooth"});
  });
</script>
</body>
</html>
