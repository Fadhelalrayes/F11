<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>مسبحة فاخرة</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;900&family=Amiri:wght@700&display=swap" rel="stylesheet">
<style>
:root{
  --navy1:#0a1931;
  --navy2:#102542;
  --gold1:#d4af37;
  --gold2:#f9e79f;
  --white:#fff;
}
body{
  margin:0;height:100%;
  font-family:"Cairo",sans-serif;
  background:linear-gradient(160deg,var(--navy1),var(--navy2));
  display:grid;place-items:center;color:var(--white);
}
.screen{
  width:min(420px,95vw);height:calc(100vh - 28px);
  border-radius:32px;overflow:hidden;
  background:linear-gradient(180deg,var(--navy1),var(--navy2));
  box-shadow:0 25px 70px rgba(0,0,0,.6);
  position:relative;
}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:16px 20px}
.title{font-weight:900;font-size:22px;background:linear-gradient(90deg,var(--gold1),var(--gold2));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent}
.icon-btn{width:44px;height:44px;border-radius:50%;border:2px solid var(--gold1);
  background:linear-gradient(145deg,var(--navy2),#070f20);display:grid;place-items:center;cursor:pointer}
.tabs{display:flex;gap:12px;justify-content:center;padding:12px}
.tab{flex:1;padding:12px;border-radius:14px;
  background:rgba(255,255,255,.08);border:2px solid rgba(212,175,55,.4);
  color:#ccc;font-weight:800;cursor:pointer}
.tab.active{background:linear-gradient(145deg,var(--gold1),var(--gold2));color:var(--navy1)}
.phrase{text-align:center;font-size:40px;font-weight:900;margin:16px 0}
.counter{width:80%;margin:10px auto;display:flex;justify-content:space-between;
  padding:12px 20px;border-radius:16px;border:2px solid var(--gold1);
  background:linear-gradient(145deg,rgba(255,255,255,.08),rgba(255,255,255,.02));
  font-size:26px;font-weight:900;color:var(--gold2)}
.ring-wrap{width:85%;aspect-ratio:1/1;margin:22px auto;position:relative}
.outer-ring{
  position:absolute;inset:0;border-radius:50%;
  background:conic-gradient(var(--gold1) var(--deg,0deg),rgba(255,255,255,.15) 0);
  box-shadow:0 0 25px rgba(212,175,55,.4),inset 0 0 30px rgba(0,0,0,.7);
}
.ticks{
  position:absolute;inset:8px;border-radius:50%;
  background:repeating-conic-gradient(var(--gold1) 0deg 2deg,transparent 2deg 10deg);
  -webkit-mask:radial-gradient(circle,transparent 78%,#000 79%);
  opacity:.35;
}
.center-btn{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  width:70%;height:70%;border-radius:50%;
  background:radial-gradient(circle at 30% 30%,var(--white),var(--gold2),var(--gold1));
  border:3px solid var(--gold1);
  display:grid;place-items:center;
  font-family:"Amiri","Tahoma",serif;   /* ← خط كلمة اضغط */
  font-weight:700;font-size:34px;
  color:var(--navy1);
  cursor:pointer;
  box-shadow:0 0 35px rgba(212,175,55,.65);
  transition:transform .1s;
  outline:none;        /* ← إزالة المربع الأزرق */
}
.center-btn:focus{outline:none}  /* ← تأكيد إلغاء الفوكس */
.center-btn:active{transform:translate(-50%,-50%) scale(.95)}
.glow{box-shadow:0 0 55px 20px rgba(212,175,55,.85)!important}
.footer{position:absolute;bottom:14px;inset-inline:0;text-align:center;color:#ccc;font-weight:700}
.footer b{color:var(--gold1)}
</style>
</head>
<body>
<div class="screen">
  <div class="topbar">
    <button class="icon-btn" id="btn-reset">⟳</button>
    <div class="title">المسبحة</div>
    <button class="icon-btn" id="btn-next">→</button>
  </div>
  <div class="tabs">
    <button id="tabZ" class="tab active">تسبيح الزهراء</button>
    <button id="tabO" class="tab">التسبيح المفتوح</button>
  </div>
  <div class="phrase" id="phrase">الله أكبر</div>
  <div class="counter"><div id="leftNum">34</div><div id="rightNum">0</div></div>
  <div class="ring-wrap">
    <div class="outer-ring" id="ring"></div>
    <div class="ticks"></div>
    <button class="center-btn" id="press">إضغط</button>
  </div>
  <div class="footer">برمجة وتطوير : <b>فاضل الريس</b></div>
</div>
<script>
const SEQ=[{text:"الله أكبر",max:34},{text:"الحمد لله",max:33},{text:"سبحان الله",max:33}];
let mode=localStorage.getItem('mode')||'zahra';
let zh=JSON.parse(localStorage.getItem('zh')||'{"step":0,"count":0}');
let op=JSON.parse(localStorage.getItem('op')||'{"text":"سبحان الله","count":0,"target":0}');
const phrase=document.getElementById('phrase'),left=document.getElementById('leftNum'),
      right=document.getElementById('rightNum'),ring=document.getElementById('ring'),
      press=document.getElementById('press');
const tabZ=document.getElementById('tabZ'),tabO=document.getElementById('tabO');
function vibrate(ms){try{navigator.vibrate(ms);}catch{}}
function render(){
  if(mode==='zahra'){const cur=SEQ[zh.step]||{text:'تم التسبيح',max:1};
    phrase.textContent=cur.text;left.textContent=cur.max;right.textContent=zh.count;
    ring.style.setProperty('--deg',(zh.count/cur.max*360)+"deg");}
  else{phrase.textContent=op.text;left.textContent=op.target>0?op.target:'∞';right.textContent=op.count;
    ring.style.setProperty('--deg',(op.target?op.count/op.target*360:0)+"deg");}
}
function tick(){
  if(mode==='zahra'){
    const cur=SEQ[zh.step];if(!cur){zh={step:0,count:0};}
    else{zh.count++;if(zh.count>=cur.max){zh.step++;zh.count=0;vibrate([120,60,120]);press.classList.add("glow");setTimeout(()=>press.classList.remove("glow"),800);}}
    if(zh.step>=SEQ.length){phrase.textContent="تم التسبيح ✔";left.textContent="0";right.textContent="0";ring.style.setProperty("--deg","360deg");vibrate([200,100,200]);press.classList.add("glow");setTimeout(()=>press.classList.remove("glow"),1500);}
    localStorage.setItem('zh',JSON.stringify(zh));
  }else{
    op.count++;if(op.target>0 && op.count>=op.target){vibrate([200,100,200]);press.classList.add("glow");setTimeout(()=>press.classList.remove("glow"),1200);}
    localStorage.setItem('op',JSON.stringify(op));
  }
  render();
}
press.onclick=tick;
document.getElementById('btn-next').onclick=()=>{mode=mode==='zahra'?'open':'zahra';localStorage.setItem('mode',mode);tabZ.classList.toggle('active',mode==='zahra');tabO.classList.toggle('active',mode==='open');render();}
document.getElementById('btn-reset').onclick=()=>{zh={step:0,count:0};op={text:'سبحان الله',count:0,target:0};localStorage.setItem('zh',JSON.stringify(zh));localStorage.setItem('op',JSON.stringify(op));render();}
tabZ.onclick=()=>{mode='zahra';localStorage.setItem('mode',mode);tabZ.classList.add('active');tabO.classList.remove('active');render();}
tabO.onclick=()=>{mode='open';localStorage.setItem('mode',mode);tabO.classList.add('active');tabZ.classList.remove('active');render();}
render();
</script>
</body>
</html>
