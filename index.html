<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© ÙˆÙÙ‚ Ø§Ù„Ù…Ø°Ù‡Ø¨ Ø§Ù„Ø¬Ø¹ÙØ±ÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Reem+Kufi:wght@500;700&family=Tajawal:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --ink:#0f172a; --muted:#6b7280;
    --bg:#f6f8fb; --surface:#fff; --border:#e5e7eb; --line:#e9edf3;
    --brand:#0ea5a6; --brand2:#2563eb;
    --shadow:0 8px 20px rgba(2,6,23,.08);
    --r:14px;
  }
  body{margin:0; color:var(--ink); font-family:"Tajawal",sans-serif; background:var(--bg); padding:16px;}
  .container{width:min(900px,100%); margin:auto; display:flex; flex-direction:column; gap:16px}

  /* Ø³Ø§Ø¹Ø© ØµØºÙŠØ±Ø© Ø¨Ø§Ù„Ø£Ø¹Ù„Ù‰ */
  .topClock{text-align:right; font-size:.95rem; font-weight:800; color:#084241}

  /* Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
  .hero{
    background:#fff; border:1px solid var(--border); border-radius:18px;
    box-shadow:var(--shadow); padding:18px; text-align:center;
  }
  .heroTitle{
    margin:0; font-family:"Reem Kufi",sans-serif; font-weight:700; font-size:1.4rem; color:#0f172a;
  }

  /* Ø§Ù„Ù…ÙƒØ§Ù† */
  .locationBox{
    background:#fff; border:1px solid var(--border); border-radius:var(--r);
    box-shadow:var(--shadow); padding:12px 14px;
    display:flex; align-items:center; justify-content:space-between;
  }
  .place{font-weight:800}
  .changeBtn{
    border:1px solid var(--border); background:linear-gradient(135deg,#e9fbff,#eef2ff);
    color:#0b2749; border-radius:999px; padding:.55rem .9rem; font-weight:800; cursor:pointer;
  }

  /* Ø§Ù„ØªØ§Ø±ÙŠØ® */
  .infoRow{display:grid; grid-template-columns:1fr 1fr; gap:16px}
  @media(max-width:720px){.infoRow{grid-template-columns:1fr}}
  .chip{background:#fff; border:1px solid var(--border); border-radius:12px; box-shadow:var(--shadow);
    padding:12px 14px; display:flex; gap:12px; align-items:center}
  .ico{width:34px; height:34px; border-radius:10px; display:grid; place-items:center;
    background:#f0f8ff; border:1px solid #d9e9ff; color:#0b5aa5}
  .stack{display:flex; flex-direction:column}
  .label{font-size:.86rem; color:var(--muted); font-weight:700}
  .value{font-weight:800; font-size:1.05rem; color:#0b213f}

  /* Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª */
  .card{background:#fff; border:1px solid var(--border); border-radius:var(--r);
    box-shadow:var(--shadow); padding:12px}
  .card h3{margin:0 0 10px; font-size:1rem; font-weight:800}
  table{width:100%; border-collapse:collapse}
  th,td{padding:12px; border-bottom:1px solid #f0f2f5; font-size:1rem}
  th{background:#f9fafb; font-weight:700}
  tr:last-child td{border-bottom:none}
  td.name{text-align:right; font-weight:700}
  td.time{text-align:left; font-weight:800; font-variant-numeric:tabular-nums}
  tr.next td{background:linear-gradient(90deg,#0ea5a61a,transparent 40%)}
  tr.next td.name{border-right:3px solid var(--brand)}

  /* Ø§Ù„Ø­Ø¯ÙŠØ« */
  .hadith{background:#fff; border:1px solid var(--border); border-radius:14px;
    box-shadow:var(--shadow); padding:18px; position:relative}
  .hadith::before{
    content:"â€œ"; position:absolute; top:8px; right:14px; font-size:64px; color:#e9eef6; font-weight:800;
  }
  .htext{margin:0; font-size:1.06rem; line-height:1.9}
  .hsrc{margin-top:8px; color:var(--muted); font-weight:700}

  footer{text-align:center; color:var(--muted); font-weight:700; margin-top:8px}
  .brand{color:var(--brand2)}

  /* Ù†Ø§ÙØ°Ø© ØªØºÙŠÙŠØ± */
  .modal{position:fixed; inset:0; display:none; place-items:center; background:rgba(15,23,42,.28); z-index:60}
  .modal.open{display:grid}
  .box{width:min(520px,96%); background:#fff; border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow); padding:16px}
  .rowCtrl{display:flex; gap:10px; align-items:center; margin:8px 0}
  .rowCtrl label{width:80px; color:var(--muted); font-weight:700}
  select{flex:1; padding:12px; border-radius:12px; border:1px solid var(--border); font-weight:700}
  .actions{display:flex; gap:10px; margin-top:12px}
  .btn{border:1px solid var(--border); border-radius:10px; padding:.55rem .9rem; font-weight:800; cursor:pointer; background:#fff}
  .btn.primary{background:linear-gradient(135deg,#e9fbff,#eef2ff); color:#0b2749}
</style>
</head>
<body>
  <div class="container">
    <div class="topClock" id="topClock">--:-- --</div>

    <section class="hero">
      <h1 class="heroTitle">Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© ÙˆÙÙ‚ Ø§Ù„Ù…Ø°Ù‡Ø¨ Ø§Ù„Ø¬Ø¹ÙØ±ÙŠ</h1>
    </section>

    <div class="locationBox">
      <div class="place" id="place">Ø§Ù„Ù…Ù†Ø§Ù…Ø©ØŒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</div>
      <button class="changeBtn" id="openPicker" type="button">ØªØºÙŠÙŠØ±</button>
    </div>

    <section class="infoRow">
      <div class="chip"><div class="ico">ğŸ—“</div><div class="stack"><div class="label">Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ</div><div class="value" id="hijri">--</div></div></div>
      <div class="chip"><div class="ico">ğŸ“…</div><div class="stack"><div class="label">Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ</div><div class="value" id="greg">--</div></div></div>
    </section>

    <section class="card">
      <h3>Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ</h3>
      <table>
        <thead><tr><th>Ø§Ù„ØµÙ„Ø§Ø©</th><th>Ø§Ù„ÙˆÙ‚Øª</th></tr></thead>
        <tbody id="times"><tr><td colspan="2">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØªâ€¦</td></tr></tbody>
      </table>
    </section>

    <section class="hadith">
      <p class="htext" id="hadithText"></p>
      <div class="hsrc" id="hadithSource"></div>
    </section>

    <footer>Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ± <span class="brand">ÙØ§Ø¶Ù„ Ø§Ù„Ø±ÙŠØ³</span></footer>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© ØªØºÙŠÙŠØ± -->
  <div class="modal" id="modal">
    <div class="box">
      <div class="rowCtrl"><label>Ø§Ù„Ø¨Ù„Ø¯</label><select id="countrySel"></select></div>
      <div class="rowCtrl"><label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</label><select id="citySel"></select></div>
      <div class="actions">
        <button class="btn primary" id="savePlace">Ø­ÙØ¸</button>
        <button class="btn" id="cancelPlace">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
    </div>
  </div>

<script>
const MAP=[
 {ar:"Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†",en:"Bahrain",tz:"Asia/Bahrain",cities:[{ar:"Ø§Ù„Ù…Ù†Ø§Ù…Ø©",en:"Manama"},{ar:"Ø§Ù„Ù…Ø­Ø±Ù‚",en:"Muharraq"}]},
 {ar:"Ù„Ø¨Ù†Ø§Ù†",en:"Lebanon",tz:"Asia/Beirut",cities:[{ar:"Ø¨ÙŠØ±ÙˆØª",en:"Beirut"}]},
];
const DEFAULT={countryEn:"Bahrain",countryAr:"Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†",cityEn:"Manama",cityAr:"Ø§Ù„Ù…Ù†Ø§Ù…Ø©",tz:"Asia/Bahrain"};
let current={...DEFAULT};

const HADITHS=[
 {t:"Ù‚Ø§Ù„ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø¨Ø§Ù‚Ø± (Ø¹): Ø¥Ø°Ø§ Ø§Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù…ØµÙ„ÙŠ Ø§Ù„Ù‚Ø¨Ù„Ø© Ø§Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø±Ø­Ù…Ù† Ø¨ÙˆØ¬Ù‡Ù‡ Ù„Ø§ Ø¥Ù„Ù‡ ØºÙŠØ±Ù‡.",s:"Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ø­ÙƒÙ…Ø©"},
 {t:"Ù‚Ø§Ù„ Ø§Ù„Ø¥Ù…Ø§Ù… Ø¹Ù„ÙŠ (Ø¹): Ø¥Ø°Ø§ Ù‚Ø§Ù… Ø§Ù„Ø±Ø¬Ù„ Ø¥Ù„Ù‰ Ø§Ù„ØµÙ„Ø§Ø© Ø£Ù‚Ø¨Ù„ Ø¥Ø¨Ù„ÙŠØ³ ÙŠÙ†Ø¸Ø± Ø¥Ù„ÙŠÙ‡ Ø­Ø³Ø¯Ø§Ù‹.",s:"Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ø­ÙƒÙ…Ø©"},
];
function setHadith(){const h=HADITHS[Math.floor(Math.random()*HADITHS.length)];hadithText.textContent=h.t;hadithSource.textContent=h.s;}
function to12h(raw){if(!raw)return"--";const [H,M]=raw.split(":").map(Number);let h=H%12;if(h===0)h=12;return`${h}:${String(M).padStart(2,"0")} ${H<12?"AM":"PM"}`;}
function updateClock(){topClock.textContent=new Intl.DateTimeFormat('en-GB',{timeZone:current.tz,hour:'2-digit',minute:'2-digit',hour12:true}).format(new Date());}
function fmtGreg(){return new Intl.DateTimeFormat('ar',{timeZone:current.tz,weekday:'long',year:'numeric',month:'long',day:'numeric'}).format(new Date());}
function fmtHijri(){return new Intl.DateTimeFormat('ar-SA-u-ca-islamic',{timeZone:current.tz,weekday:'long',year:'numeric',month:'long',day:'numeric'}).format(new Date());}
function nextKey(t){return null;}
function tr(name,val,next=false){return `<tr class="${next?'next':''}"><td class="name">${name}</td><td class="time">${to12h(val||'')}</td></tr>`;}
async function load(){
  place.textContent=`${current.cityAr}ØŒ ${current.countryAr}`;
  hijri.textContent=fmtHijri(); greg.textContent=fmtGreg();
  times.innerHTML="<tr><td colspan=2>...</td></tr>";
  try{
    const url=`https://api.aladhan.com/v1/timingsByCity?city=${current.cityEn}&country=${current.countryEn}&method=0`;
    const r=await fetch(url); const j=await r.json(); const t=j.data.timings;
    const rows=[
      {n:"Ø§Ù„Ø¥Ù…Ø³Ø§Ùƒ",k:"Imsak"},{n:"Ø£Ø°Ø§Ù† Ø§Ù„ÙØ¬Ø±",k:"Fajr"},{n:"Ø£Ø°Ø§Ù† Ø§Ù„Ø¸Ù‡Ø±",k:"Dhuhr"},
      {n:"Ø£Ø°Ø§Ù† Ø§Ù„Ø¹ØµØ±",k:"Asr"},{n:"Ø£Ø°Ø§Ù† Ø§Ù„Ù…ØºØ±Ø¨",k:"Maghrib"},{n:"Ø£Ø°Ø§Ù† Ø§Ù„Ø¹Ø´Ø§Ø¡",k:"Isha"},
      {n:"Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„",k:"Midnight"},
    ];
    times.innerHTML=rows.map(r=>tr(r.n,t[r.k])).join("");
  }catch{times.innerHTML="<tr><td colspan=2>ØªØ¹Ø°Ø±</td></tr>";}
}
setHadith();load();updateClock();setInterval(updateClock,1000);

/* Ù†Ø§ÙØ°Ø© ØªØºÙŠÙŠØ± */
const modal=document.getElementById("modal");
const openPicker=document.getElementById("openPicker");
const cancelPlace=document.getElementById("cancelPlace");
const savePlace=document.getElementById("savePlace");
const countrySel=document.getElementById("countrySel");
const citySel=document.getElementById("citySel");
function openModal(){
  countrySel.innerHTML=MAP.map(c=>`<option value="${c.en}">${c.ar}</option>`).join("");
  countrySel.value=current.countryEn;
  populateCities(countrySel.value);
  citySel.value=current.cityEn;
  modal.classList.add("open");
}
function closeModal(){modal.classList.remove("open");}
function populateCities(countryEn){
  const c=MAP.find(x=>x.en===countryEn);
  citySel.innerHTML=(c?.cities||[]).map(m=>`<option value="${m.en}">${m.ar}</option>`).join("");
}
countrySel.addEventListener("change",()=>populateCities(countrySel.value));
openPicker.onclick=openModal;
cancelPlace.onclick=closeModal;
savePlace.onclick=()=>{const c=MAP.find(x=>x.en===countrySel.value);const m=c.cities.find(x=>x.en===citySel.value);current={countryEn:c.en,countryAr:c.ar,cityEn:m.en,cityAr:m.ar,tz:c.tz};closeModal();load();}
</script>
</body>
</html>
