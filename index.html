<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>أقوال منثورة — عرض تفاعلي و PDF</title>

  <!-- خط عربي جميل -->
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0b0c;        /* أسود ناعم */
      --panel:#0f1115;     /* أسود مزرق خفيف */
      --text:#ffffff;      /* أبيض */
      --muted:#b6bcc7;     /* رمادي فاتح */
      --gold:#d4af37;      /* ذهبي */
      --gold-2:#f2d27a;    /* ذهبي فاتح */
      --ring:rgba(212,175,55,.25);
      --radius:18px;
      --shadow:0 12px 30px rgba(0,0,0,.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(212,175,55,.08), transparent 60%),
        radial-gradient(1000px 600px at 0% 0%, rgba(255,255,255,.04), transparent 60%),
        var(--bg);
      font-family: "Amiri", "Noto Naskh Arabic", serif;
      line-height:1.9;
    }

    .wrap{
      max-width:980px;
      margin:32px auto 48px;
      padding:0 16px;
    }

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.06);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    header.hero{
      padding:24px 20px 20px;
      border-bottom:1px solid rgba(255,255,255,.08);
      background:
        radial-gradient(600px 160px at 15% 0%, rgba(212,175,55,.12), transparent 60%),
        radial-gradient(500px 160px at 85% 0%, rgba(255,255,255,.08), transparent 60%);
    }
    h1{
      margin:0;
      font-family:"Cairo", system-ui, sans-serif;
      font-size:28px;
      font-weight:800;
      letter-spacing:.2px;
      background:linear-gradient(90deg, var(--gold), var(--gold-2));
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow:0 1px 0 rgba(0,0,0,.35);
    }
    .sub{margin:.35rem 0 0; color:var(--muted); font-size:14px; font-family:"Cairo",sans-serif}

    /* أزرار */
    .toolbar{
      display:flex; gap:10px; flex-wrap:wrap;
      padding:14px; border-bottom:1px solid rgba(255,255,255,.06);
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
    }
    .btn{
      cursor:pointer;
      padding:10px 14px;
      font-family:"Cairo", system-ui, sans-serif;
      font-weight:700; font-size:15px;
      border-radius:14px;
      border:1px solid rgba(212,175,55,.35);
      color:#0b0b0c;
      background:linear-gradient(180deg, var(--gold), #c79d2a);
      box-shadow:inset 0 1px 0 rgba(255,255,255,.25), 0 6px 16px rgba(212,175,55,.25);
      transition:filter .12s ease, transform .05s ease, box-shadow .2s ease;
      user-select:none;
      text-decoration:none;
    }
    .btn:hover{filter:saturate(1.06) brightness(1.04)}
    .btn:active{transform:translateY(1px)}
    .btn.ghost{
      background:rgba(255,255,255,.02);
      color:var(--text);
      border:1px solid rgba(255,255,255,.10);
      box-shadow:none;
    }
    .spacer{flex:1}

    /* المحتوى */
    .content{
      padding:18px 18px 28px;
      display:grid; gap:16px;
      background:
        radial-gradient(900px 400px at 50% 0%, rgba(212,175,55,.06), transparent 70%),
        var(--panel);
    }
    .note{
      background:rgba(255,255,255,.02);
      border:1px solid rgba(255,255,255,.06);
      border-radius:16px;
      padding:14px 16px;
      color:var(--muted);
      font-family:"Cairo",sans-serif;
      font-size:13px;
    }

    .section{
      background:rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.07);
      border-radius:16px; padding:18px;
      outline:2px solid transparent;
      transition:outline-color .2s ease, background .2s ease;
    }
    .section.active{outline-color:var(--ring); background:rgba(255,255,255,.045)}
    .section h2{
      margin:0 0 8px;
      font-family:"Cairo",sans-serif;
      font-size:20px; font-weight:800;
      color:var(--gold-2);
      text-shadow:0 1px 0 rgba(0,0,0,.45);
      letter-spacing:.2px;
    }
    .section .prose{
      color:#f7f7f7;
      font-size:18px;
      line-height:2.05;
      text-align:justify;        /* محاذاة مثل الكتب */
      text-justify:inter-word;
    }
    .section .prose p{margin:0 0 10px}

    footer.foot{
      border-top:1px solid rgba(255,255,255,.08);
      padding:12px 14px; color:var(--muted);
      font-family:"Cairo",sans-serif; font-size:12px;
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
    }
    code{background:rgba(255,255,255,.06); padding:.1em .35em; border-radius:.35em}

    @media (max-width:560px){
      .btn{width:100%; text-align:center}
      .toolbar{gap:8px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="app">
      <header class="hero">
        <h1>أقوالٌ مختارة</h1>
        <p class="sub">اضغط زرًا لعرض النص، ثم نزّل PDF منسّقًا بروابط تفاعلية داخلية بين الصفحات.</p>
      </header>

      <div class="toolbar">
        <button class="btn" id="btn-husn">أطلبوا الخير عند حسان الوجوه</button>
        <button class="btn" id="btn-ajr">الأجر العظيم</button>
        <div class="spacer"></div>
        <button class="btn ghost" id="open-pdf">فتح PDF في تبويب</button>
        <button class="btn" id="download-pdf">تنزيل PDF منسّق</button>
      </div>

      <div class="content">
        <div class="note">
          تلميح: التنسيق يعتمد خط <b>أميري</b> للنص و<b>القاهرة</b> للعناوين، مع محاذاة كاملة مثل الكتب.
          زر <b>تنزيل PDF</b> يُنشئ ملفًا من صفحتين مع روابط داخلية للتنقل.
        </div>

        <!-- القسم الأول -->
        <section id="sec-husn" class="section" hidden>
          <h2>أطلبوا الخير عند حسان الوجوه</h2>
          <div class="prose">
            <p>
              عنه (عليه السلام): حسن الصورة أول السعادة (3).<br>
              عنه (عليه السلام): حسن وجه المؤمن من حسن عناية الله به (4).<br>
              رسول الله (صلى الله عليه وآله): آفة الجمال الخيلاء (5).<br>
              في الزبور: من أجرم الذنوب وأعجبه حسنه، فلينظر الأرض كيف لعبت بالوجوه في القبور وتجعلها رميماً،
              إنما الجمال من عوفي من النار (6).<br>
              رسول الله (صلى الله عليه وآله): خير ما أعطي الرجل المؤمن خلق حسن، وشر ما أعطي الرجل قلب سوء في صورة حسنة (7).<br>
              الإمام الباقر (عليه السلام): أيما عبد كان له صورة حسنة مع موضع لا يشينه، ثم تواضع لله كان من خالصة الله.
              قال الراوي: قلت: ما موضع لا يشينه؟ قال: لا يكون ضرب فيه سفاح (8).
            </p>
            <p>
              536 - اطلبوا الخير عند حسان الوجوه — رسول الله (صلى الله عليه وآله): ابتغوا الخير عند حسان الوجوه (9).<br>
              عنه (صلى الله عليه وآله): اطلبوا الخير عند حسان الوجوه (10).<br>
              عنه (صلى الله عليه وآله): التمسوا الخير عند حسان الوجوه (11).<br>
              عنه (صلى الله عليه وآله): اطلبوا حوائجكم عند حسان الوجوه، فإن قضى حاجتك قضاها بوجه طليق، وإن ردك ردك بوجه طليق،
              فرب حسن الوجه دميمه عند طلب الحاجة، ورب دميم الوجه حسنه عند طلب الحاجة (12).<br>
              عنه (صلى الله عليه وآله): اطلبوا الخير عند حسان الوجوه، فإن فعالهم أحرى أن تكون حسناً (13).
            </p>
            <p>
              537 - إكرام الشعر — رسول الله (صلى الله عليه وآله): الشعر الحسن من كسوة الله فأكرموه (14).
            </p>
          </div>
        </section>

        <!-- القسم الثاني -->
        <section id="sec-ajr" class="section" hidden>
          <h2>الأجر العظيم</h2>
          <div class="prose">
            <p>
              عنه (عليه السلام): ما المجاهد الشهيد في سبيل الله بأعظم أجراً ممن قدر فعف،
              لكاد العفيف أن يكون ملكاً من الملائكة (6).
            </p>
            <p>
              6 - أجر الآخرة — الكتاب: <em>(ولأجر الآخرة خير للذين آمنوا وكانوا يتقون)</em> (7).<br>
              <em>(والذين هاجروا في الله من بعد ما ظلموا لنبوئنهم في الدنيا حسنة ولأجر الآخرة أكبر لو كانوا يعلمون)</em> (8).<br>
              الإمام علي (عليه السلام): شتان ما بين عملين: عمل تذهب لذته وتبقى تبعته، وعمل تذهب مؤونته ويبقى أجره (9).<br>
              (انظر) الآخرة باب 26، 29.
            </p>
            <p>
              7 - الأجر العظيم — الكتاب: <em>(الذين استجابوا لله والرسول من بعد ما أصابهم القرح للذين أحسنوا منهم واتقوا أجر عظيم)</em> (10).<br>
              <em>(وإن تؤمنوا وتتقوا فلكم أجر عظيم)</em> (11).
            </p>
          </div>
        </section>
      </div>

      <footer class="foot">
        صنع بلمسات ذهبية ✨ — يمكن تعديل الألوان والخطوط بحرّية. زر <code>تنزيل PDF</code> ينشئ ملفًا تفاعليًا بصفحتين مع روابط.
      </footer>
    </div>
  </div>

  <!-- مكتبة pdf-lib لصناعة PDF تفاعلي (روابط داخلية) -->
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>

  <script>
    const btnHusn = document.getElementById('btn-husn');
    const btnAjr  = document.getElementById('btn-ajr');
    const secHusn = document.getElementById('sec-husn');
    const secAjr  = document.getElementById('sec-ajr');
    const openPdfBtn = document.getElementById('open-pdf');
    const downloadBtn = document.getElementById('download-pdf');

    function showSection(which){
      [secHusn, secAjr].forEach(s=>{
        const active = (s.id === which);
        s.hidden = !active;
        s.classList.toggle('active', active);
      });
      window.scrollTo({top:0, behavior:'smooth'});
    }

    btnHusn.addEventListener('click', ()=> showSection('sec-husn'));
    btnAjr .addEventListener('click', ()=> showSection('sec-ajr'));

    // محتوى النصين لإدراجها في PDF
    const textHusn =
`أطلبوا الخير عند حسان الوجوه

عنه (عليه السلام): حسن الصورة أول السعادة (3).
عنه (عليه السلام): حسن وجه المؤمن من حسن عناية الله به (4).
رسول الله (صلى الله عليه وآله): آفة الجمال الخيلاء (5).
في الزبور: من أجرم الذنوب وأعجبه حسنه، فلينظر الأرض كيف لعبت بالوجوه في القبور وتجعلها رميماً، إنما الجمال من عوفي من النار (6).
رسول الله (صلى الله عليه وآله): خير ما أعطي الرجل المؤمن خلق حسن، وشر ما أعطي الرجل قلب سوء في صورة حسنة (7).
الإمام الباقر (عليه السلام): أيما عبد كان له صورة حسنة مع موضع لا يشينه، ثم تواضع لله كان من خالصة الله. قال الراوي: قلت: ما موضع لا يشينه؟ قال: لا يكون ضرب فيه سفاح (8).

536 - اطلبوا الخير عند حسان الوجوه — رسول الله (صلى الله عليه وآله): ابتغوا الخير عند حسان الوجوه (9).
عنه (صلى الله عليه وآله): اطلبوا الخير عند حسان الوجوه (10).
عنه (صلى الله عليه وآله): التمسوا الخير عند حسان الوجوه (11).
عنه (صلى الله عليه وآله): اطلبوا حوائجكم عند حسان الوجوه، فإن قضى حاجتك قضاها بوجه طليق، وإن ردك ردك بوجه طليق، فرب حسن الوجه دميمه عند طلب الحاجة، ورب دميم الوجه حسنه عند طلب الحاجة (12).
عنه (صلى الله عليه وآله): اطلبوا الخير عند حسان الوجوه، فإن فعالهم أحرى أن تكون حسناً (13).

537 - إكرام الشعر — رسول الله (صلى الله عليه وآله): الشعر الحسن من كسوة الله فأكرموه (14).`;

    const textAjr =
`الأجر العظيم

عنه (عليه السلام): ما المجاهد الشهيد في سبيل الله بأعظم أجراً ممن قدر فعف، لكاد العفيف أن يكون ملكاً من الملائكة (6).

6 - أجر الآخرة — الكتاب: (ولأجر الآخرة خير للذين آمنوا وكانوا يتقون) (7).
(والذين هاجروا في الله من بعد ما ظلموا لنبوئنهم في الدنيا حسنة ولأجر الآخرة أكبر لو كانوا يعلمون) (8).
الإمام علي (عليه السلام): شتان ما بين عملين: عمل تذهب لذته وتبقى تبعته، وعمل تذهب مؤونته ويبقى أجره (9).
(انظر) الآخرة باب 26، 29.

7 - الأجر العظيم — الكتاب: (الذين استجابوا لله والرسول من بعد ما أصابهم القرح للذين أحسنوا منهم واتقوا أجر عظيم) (10).
(وإن تؤمنوا وتتقوا فلكم أجر عظيم) (11).`;

    // دالة لإنشاء PDF تفاعلي من صفحتين مع روابط داخلية
    async function makePdfBlob(){
      const { PDFDocument, StandardFonts, rgb } = PDFLib;
      const pdfDoc = await PDFDocument.create();

      // صفحة 1: "حسان الوجوه"
      const page1 = pdfDoc.addPage([595.28, 841.89]); // A4 pt تقريبًا
      const page2 = pdfDoc.addPage([595.28, 841.89]);

      // خطوط
      const font = await pdfDoc.embedFont(StandardFonts.TimesRoman);
      const bold = await pdfDoc.embedFont(StandardFonts.TimesRomanBold);

      // ألوان
      const gold = rgb(212/255, 175/255, 55/255);
      const white = rgb(1,1,1);
      const black = rgb(0,0,0);

      // خلفية داكنة خفيفة وحدود ذهبية
      function paintFrame(page){
        const { width, height } = page.getSize();
        page.drawRectangle({ x:0, y:0, width, height, color: rgb(0.05,0.05,0.06) });
        page.drawRectangle({ x:24, y:24, width: width-48, height: height-48, borderColor: gold, borderWidth: 1, color: rgb(0.06,0.07,0.09) });
      }

      paintFrame(page1);
      paintFrame(page2);

      function drawHeading(page, title){
        const { width, height } = page.getSize();
        page.drawText(title, {
          x: 48, y: height-80, size: 18, font: bold, color: gold
        });
      }

      // كتابة نص متعدد الأسطر RTL بشكل بسيط (سيفقد تشكيل المحاذاة الكاملة، لكنه منسق جيدًا)
      function drawParagraph(page, text, startX=48, startY=740, lineHeight=18){
        const lines = text.split('\n');
        let y = startY;
        for(const ln of lines){
          // قص السطر بما يناسب العرض
          const maxWidth = page.getSize().width - startX - 48;
          let current = ln.trim();
          if(current === ''){ y -= lineHeight; continue; }
          while(font.widthOfTextAtSize(current, 12) > maxWidth){
            // نبحث عن مكان مناسب للفصل
            let cut = Math.floor(current.length * 0.9);
            while(cut > 5 && font.widthOfTextAtSize(current.slice(0, cut), 12) > maxWidth) cut--;
            page.drawText(current.slice(0, cut), { x: startX, y, size: 12, font, color: white });
            current = current.slice(cut).trim();
            y -= lineHeight;
          }
          page.drawText(current, { x: startX, y, size: 12, font, color: white });
          y -= lineHeight;
        }
        return y;
      }

      // صفحة 1
      drawHeading(page1, 'أطلبوا الخير عند حسان الوجوه');
      drawParagraph(page1, textHusn, 48, 740, 18);

      // زر (رابط) للانتقال إلى الصفحة 2
      const btn1 = { x: 48, y: 40, w: 220, h: 26 };
      page1.drawRectangle({
        x: btn1.x, y: btn1.y, width: btn1.w, height: btn1.h,
        color: gold, borderColor: black, borderWidth: 0
      });
      page1.drawText('الانتقال إلى: الأجر العظيم ⇢', {
        x: btn1.x + 10, y: btn1.y + 7, size: 12, font: bold, color: black,
      });
      // رابط داخلي للصفحة الثانية
      pdfDoc.addPageLabels([{ startPage: 0, style: 'DecimalArabic' }]);
      const goToPg2 = pdfDoc.addPageDestination(page2);
      page1.doc.addPageAnnotation(page1.ref, {
        Type: 'Annot', Subtype: 'Link',
        Rect: [btn1.x, btn1.y, btn1.x + btn1.w, btn1.y + btn1.h],
        Border: [0, 0, 0],
        Dest: goToPg2
      });

      // صفحة 2
      drawHeading(page2, 'الأجر العظيم');
      drawParagraph(page2, textAjr, 48, 740, 18);

      // زر عودة للصفحة 1
      const btn2 = { x: 48, y: 40, w: 200, h: 26 };
      page2.drawRectangle({
        x: btn2.x, y: btn2.y, width: btn2.w, height: btn2.h,
        color: gold, borderColor: black, borderWidth: 0
      });
      page2.drawText('↤ العودة إلى حسان الوجوه', {
        x: btn2.x + 10, y: btn2.y + 7, size: 12, font: bold, color: black,
      });
      const goToPg1 = pdfDoc.addPageDestination(page1);
      page2.doc.addPageAnnotation(page2.ref, {
        Type: 'Annot', Subtype: 'Link',
        Rect: [btn2.x, btn2.y, btn2.x + btn2.w, btn2.y + btn2.h],
        Border: [0, 0, 0],
        Dest: goToPg1
      });

      const pdfBytes = await pdfDoc.save();
      return new Blob([pdfBytes], { type: 'application/pdf' });
    }

    // فتح PDF في تبويب + تنزيل
    openPdfBtn.addEventListener('click', async ()=>{
      const blob = await makePdfBlob();
      const url = URL.createObjectURL(blob);
      window.open(url, '_blank');
    });
    downloadBtn.addEventListener('click', async ()=>{
      const blob = await makePdfBlob();
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'aqwal-interactive.pdf';
      document.body.appendChild(a);
      a.click();
      a.remove();
    });

    // افتراضي: أظهر القسم الأول عند الفتح
    showSection('sec-husn');
  </script>
</body>
</html>
