<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>سيرة احترافية — البحرين (+973 ثابت، قوائم منسدلة)</title>
<style>
  :root{
    --bg:#ffffff; --fg:#0f172a; --muted:#475569;
    --accent:#C7A046; --accent-weak:#EAD9A2; --border:#e5e7eb;
    --chip:#f8fafc; --radius:14px; --shadow:0 8px 28px rgba(15,23,42,.06);
  }
  html,body{background:var(--bg);color:var(--fg);font-family:"Cairo","Noto Naskh Arabic",system-ui,Arial;line-height:1.5}
  *{box-sizing:border-box}
  .wrap{max-width:940px;margin:20px auto;padding:0 14px}
  .stepper{position:sticky;top:0;z-index:5;background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:10px 12px;margin-bottom:14px}
  .steps{display:flex;align-items:center;gap:8px;justify-content:space-between}
  .step{display:flex;gap:8px;align-items:center;opacity:.6}.step.active{opacity:1}
  .dot{width:26px;height:26px;border-radius:999px;background:var(--accent-weak);display:inline-flex;align-items:center;justify-content:center;font-weight:800;color:#7a5a16}
  .bar{height:3px;background:var(--accent-weak);border-radius:99px;flex:1}
  .card{background:#fff;border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:12px}
  .card-h{padding:14px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
  .card-h h2{margin:0;font-size:16px}
  .toggle{width:34px;height:34px;border-radius:10px;border:1px solid var(--border);background:#fff;cursor:pointer;font-weight:800}
  .card-b{padding:14px 16px}
  .row{display:grid;gap:10px}
  .two{grid-template-columns:1fr}
  @media(min-width:640px){.two{grid-template-columns:1fr 1fr}}
  label{font-size:13px;color:var(--muted);font-weight:700}
  input[type="text"],input[type="email"],input[type="url"],textarea,select{
    width:100%;border:1px solid var(--border);border-radius:10px;padding:10px 12px;background:#fff;outline:none
  }
  textarea{min-height:90px;resize:vertical}
  input:focus,textarea:focus,select:focus{border-color:var(--accent)}
  .hint{font-size:12px;color:var(--muted)}
  .chipline{display:flex;flex-wrap:wrap;gap:8px}
  .chip{padding:6px 10px;border:1px solid var(--border);background:var(--chip);border-radius:999px;font-size:12px}

  /* Phone group (+973 fixed) */
  .phone-group{display:flex;align-items:center;border:1px solid var(--border);border-radius:10px;overflow:hidden;background:#fff}
  .prefix{background:#fafaf9;color:#7a5a16;border-inline-end:1px solid var(--border);padding:10px 12px;font-weight:800;white-space:nowrap}
  .phone-input{border:none;flex:1;padding:10px 12px;outline:none}
  .phone-input:focus{box-shadow:inset 0 0 0 2px var(--accent-weak)}

  /* Preview */
  .cv{border:1px solid var(--border);border-radius:12px;padding:22px}
  .cv h1{font-size:22px;margin:0 0 4px;font-weight:900}
  .cv .sub{color:var(--muted);margin:0 0 10px}
  .cv .barline{height:2px;background:var(--accent);margin:8px 0 14px}
  .cv .sec{margin-bottom:14px}
  .cv .sec h3{font-size:14px;margin:0 0 6px;position:relative;padding-bottom:5px}
  .cv .sec h3:after{content:"";position:absolute;inset-inline:0;bottom:0;height:2px;background:var(--accent-weak)}
  .cv .meta{font-size:12px;color:var(--muted)}
  .cv ul{margin:6px 0 0 18px} .cv li{margin:4px 0}
  .cv .chipline .chip{font-size:11px}

  /* Bottom bar */
  .bottom-bar{position:sticky;bottom:0;background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);margin:14px 0;padding:10px 12px;display:flex;gap:8px;justify-content:center;align-items:center}
  .btn{border:1px solid var(--accent);background:var(--accent);color:#fff;padding:9px 12px;border-radius:10px;cursor:pointer;font-weight:700}
  .btn.ghost{background:#fff;color:var(--accent)}
  .btn[disabled]{opacity:.5;cursor:not-allowed}
  .hide{display:none}
  @page{size:A4;margin:18mm}
  @media print{.no-print{display:none!important}.cv{border:none;padding:0}}
</style>
</head>
<body>
<div class="wrap">

  <!-- Stepper -->
  <div class="stepper no-print">
    <div class="steps">
      <div class="step active"><span class="dot">1</span><strong>شخصي</strong></div>
      <div class="bar"></div>
      <div class="step"><span class="dot">2</span><strong>خبرات/تعليم/مهارات</strong></div>
      <div class="bar"></div>
      <div class="step"><span class="dot">3</span><strong>معاينة</strong></div>
    </div>
  </div>

  <!-- شخصي -->
  <section class="card">
    <div class="card-h"><h2>التفاصيل الشخصية</h2><button class="toggle" aria-expanded="true">+</button></div>
    <div class="card-b">
      <div class="row two">
        <div><label>الاسم الكامل *</label><input id="fullName" type="text" required placeholder="مثال: علي حسن محمد"></div>
        <div><label>المسمّى الوظيفي المستهدف *</label><input id="title" type="text" required placeholder="مثال: مطوّر برمجيات"></div>
        <div><label>البريد الإلكتروني *</label><input id="email" type="email" required placeholder="name@example.com"></div>
        <div>
          <label>رقم الهاتف (البحرين) *</label>
          <div class="phone-group">
            <span class="prefix">+973</span>
            <input id="phoneDigits" class="phone-input" type="text" inputmode="numeric" pattern="\\d{8}" maxlength="8" placeholder="أدخل 8 أرقام فقط">
          </div>
          <div class="hint">البادئة +973 ثابتة — اكتب الثمانية أرقام فقط.</div>
        </div>
        <div><label>المدينة / الدولة *</label><input id="location" type="text" value="المنامة، البحرين" required></div>
        <div>
          <label>الجنسية *</label>
          <select id="nationality" required>
            <option value="">اختر…</option>
            <option>بحرينية</option><option>سعودية</option><option>إماراتية</option><option>كويتية</option><option>عُمانية</option>
            <option>أردنية</option><option>مصرية</option><option>سورية</option><option>لبنانية</option><option>فلسطينية</option>
            <option>يمنية</option><option>سودانية</option><option>مغربية</option><option>جزائرية</option><option>تونسية</option>
            <option>هندية</option><option>باكستانية</option><option>بنغلاديشية</option><option>فلبينية</option>
            <option>أخرى</option>
          </select>
        </div>
      </div>

      <div class="row two">
        <div>
          <label>المستوى العلمي *</label>
          <select id="eduLevel" required>
            <option value="">اختر…</option>
            <option>ثانوي</option><option>دبلوم</option><option>بكالوريوس</option><option>ماجستير</option><option>دكتوراه</option><option>أخرى</option>
          </select>
        </div>
        <div>
          <label>لديك رخصة قيادة؟ *</label>
          <select id="hasLicense" required>
            <option value="">اختر…</option><option>نعم</option><option>لا</option>
          </select>
        </div>
        <div>
          <label>لديك مواصلات؟ *</label>
          <select id="hasTransport" required>
            <option value="">اختر…</option><option>نعم</option><option>لا</option>
          </select>
        </div>
        <div>
          <label>التخصص (قائمة) *</label>
          <select id="majorList" required>
            <option value="">اختر…</option>
            <option>علوم الحاسب</option><option>هندسة برمجيات</option><option>نظم معلومات</option>
            <option>محاسبة</option><option>إدارة أعمال</option><option>مالية</option><option>تسويق</option><option>موارد بشرية</option>
            <option>هندسة كهربائية</option><option>هندسة ميكانيكية</option><option>هندسة مدنية</option>
            <option>تمريض</option><option>صيدلة</option><option>قانون</option><option>آداب إنجليزي</option>
            <option>تصميم جرافيك</option><option>عمارة</option><option>تعليم</option>
            <option value="other">أخرى (سأكتبها)</option>
          </select>
        </div>
      </div>

      <div id="majorCustomBox" class="row hide">
        <div><label>اكتب تخصصك</label><input id="majorCustom" type="text" placeholder="مثال: علوم بيانات"></div>
      </div>

      <div style="margin-top:6px">
        <label>اللغات (ضع ✔️ على ما تعرفه)</label>
        <div class="chipline" id="langChecks" role="group" aria-label="اللغات">
          <label class="chip"><input type="checkbox" value="العربية"> العربية</label>
          <label class="chip"><input type="checkbox" value="الإنجليزية"> الإنجليزية</label>
          <label class="chip"><input type="checkbox" value="الهندية"> الهندية</label>
          <label class="chip"><input type="checkbox" value="الأوردو"> الأوردو</label>
          <label class="chip"><input type="checkbox" value="البنغالية"> البنغالية</label>
          <label class="chip"><input type="checkbox" value="الفلبينية"> الفلبينية</label>
          <label class="chip"><input type="checkbox" value="أخرى"> أخرى</label>
        </div>
      </div>

      <div style="margin-top:6px">
        <label>ملخّص مهني (3–4 جمل)</label>
        <textarea id="summary" maxlength="450" placeholder="مختصر قوي يبرز القيمة والإنجازات بالأرقام"></textarea>
        <div class="hint"><span id="sumCount">0</span> / 450</div>
      </div>
    </div>
  </section>

  <!-- تعليم: الجامعة/المعهد -->
  <section class="card">
    <div class="card-h"><h2>المؤسسة التعليمية</h2><button class="toggle" aria-expanded="true">+</button></div>
    <div class="card-b">
      <div class="row two">
        <div>
          <label>الجامعة/المعهد (البحرين)</label>
          <select id="bhInstitution">
            <option value="">اختر…</option>
            <option>جامعة البحرين</option>
            <option>جامعة الخليج العربي</option>
            <option>جامعة بوليتكنك البحرين</option>
            <option>جامعة العلوم التطبيقية</option>
            <option>جامعة أهلية</option>
            <option>جامعة AMA الدولية البحرين</option>
            <option>جامعة الخليج (Gulf University)</option>
            <option>جامعة المملكة</option>
            <option>RCSI البحرين (الكلية الملكية للجراحين)</option>
            <option>الجامعة الملكية للبنات</option>
            <option>BIBF معهد البحرين للدراسات المصرفية والمالية</option>
            <option>معهد البحرين للتدريب BTI</option>
            <option value="abroad">خارج البحرين</option>
          </select>
        </div>
        <div>
          <label>سنة/شهر التخرج</label>
          <input id="gradDate" type="text" placeholder="YYYY-MM">
        </div>
      </div>

      <!-- إذا كان خارج البحرين -->
      <div id="abroadBox" class="row hide">
        <div>
          <label>الدولة</label>
          <select id="country">
            <option value="">اختر الدولة…</option>
            <option>السعودية</option><option>الإمارات</option><option>الكويت</option><option>عُمان</option><option>قطر</option>
            <option>الأردن</option><option>مصر</option><option>العراق</option><option>المغرب</option><option>تونس</option><option>الجزائر</option><option>السودان</option><option>اليمن</option><option>لبنان</option><option>سورية</option>
            <option>الهند</option><option>باكستان</option><option>بنغلاديش</option><option>الفلبين</option><option>المملكة المتحدة</option><option>الولايات المتحدة</option><option>كندا</option><option>ألمانيا</option><option>فرنسا</option><option>تركيا</option>
            <option>أخرى</option>
          </select>
        </div>
        <div><label>اسم الجامعة</label><input id="uniName" type="text" placeholder="اكتب اسم الجامعة"></div>
        <div><label>التخصص</label><input id="uniMajor" type="text" placeholder="اكتب التخصص"></div>
      </div>
    </div>
  </section>

  <!-- خبرة مختصرة (اختياري) -->
  <section class="card">
    <div class="card-h"><h2>خبرة عملية (اختياري)</h2><button class="toggle" aria-expanded="false">+</button></div>
    <div class="card-b hide" id="expWrap">
      <div id="expList"></div>
      <button class="btn" id="addExp">+ إضافة خبرة</button>
    </div>
  </section>

  <!-- مهارات (كوسوم تُستخرج من اللغات/التخصص لاحقًا إذا رغبت) -->

  <!-- المعاينة -->
  <section class="card">
    <div class="card-h"><h2>معاينة</h2><button class="toggle" aria-expanded="true">+</button></div>
    <div class="card-b">
      <article id="cv" class="cv">
        <h1 id="v_name">اسم المتقدّم</h1>
        <p class="sub" id="v_title">المسمّى المستهدف</p>
        <div class="meta" id="v_contacts">email@example.com · +973 3xxxxxxx · المنامة، البحرين</div>
        <div class="barline"></div>

        <section class="sec" id="sec_summary" hidden>
          <h3>الملخّص</h3><p id="v_summary"></p>
        </section>

        <section class="sec" id="sec_edu" hidden>
          <h3>التعليم</h3>
          <div id="v_edu"></div>
        </section>

        <section class="sec" id="sec_langs" hidden>
          <h3>اللغات</h3>
          <div id="v_langs"></div>
        </section>

        <section class="sec" id="sec_exp" hidden>
          <h3>الخبرة العملية</h3>
          <div id="v_exp"></div>
        </section>
      </article>
    </div>
  </section>

  <!-- شريط التحميل السفلي -->
  <div class="bottom-bar no-print">
    <span id="readyMsg" class="hint">أكمل الحقول الأساسية ثم اختر التنزيل:</span>
    <button class="btn" id="btnPdf" disabled>🖨️ PDF</button>
    <button class="btn ghost" id="btnDoc" disabled>⬇️ Word</button>
    <button class="btn ghost" id="btnSave" disabled>💾 JSON</button>
  </div>

</div>

<script>
(()=> {
  const $=(s,r=document)=>r.querySelector(s), $$=(s,r=document)=>Array.from(r.querySelectorAll(s));
  // Accordion
  $$('.toggle').forEach(btn=>{
    const body=btn.parentElement.nextElementSibling;
    btn.addEventListener('click', ()=>{ body.classList.toggle('hide'); btn.setAttribute('aria-expanded', String(!body.classList.contains('hide'))); });
  });

  // Basic refs
  const fullName=$('#fullName'), title=$('#title'), email=$('#email'),
        phoneDigits=$('#phoneDigits'), locationInput=$('#location'),
        nationality=$('#nationality'), eduLevel=$('#eduLevel'),
        hasLicense=$('#hasLicense'), hasTransport=$('#hasTransport'),
        majorList=$('#majorList'), majorCustomBox=$('#majorCustomBox'), majorCustom=$('#majorCustom'),
        summary=$('#summary'), sumCount=$('#sumCount');

  // Bahrain phone: +973 fixed
  function sanitize(s){return (s||'').toString().replace(/\s+/g,' ').trim();}
  function bhPhone(){ const d=(phoneDigits.value||'').replace(/\D/g,'').slice(0,8); phoneDigits.value=d; return d?`+973${d}`:''; }

  // Major custom toggle
  majorList.addEventListener('change', ()=>{
    const isOther = majorList.value==='other';
    majorCustomBox.classList.toggle('hide', !isOther);
    if(!isOther) majorCustom.value='';
    renderEducation();
  });

  // Institution logic
  const bhInstitution=$('#bhInstitution'), abroadBox=$('#abroadBox'),
        country=$('#country'), uniName=$('#uniName'), uniMajor=$('#uniMajor'), gradDate=$('#gradDate');
  bhInstitution.addEventListener('change', ()=>{
    const abroad = bhInstitution.value==='abroad';
    abroadBox.classList.toggle('hide', !abroad);
    renderEducation();
  });

  // Languages (checkboxes)
  const langChecks=$$('#langChecks input[type="checkbox"]');
  langChecks.forEach(cb=>cb.addEventListener('change', renderLangs));

  // Experience (simple bullets)
  const expList=$('#expList'); $('#addExp').addEventListener('click', ()=>{ if($$('#expList .rep').length<3) expList.appendChild(expItem()); renderExp(); });
  function expItem(d={}){ d=Object.assign({role:'',company:'',loc:'المنامة، البحرين',start:'',end:'',b1:'',b2:''},d);
    const w=document.createElement('div'); w.className='rep';
    w.innerHTML=`
      <div class="row two">
        <div><label>المسمّى</label><input class="role" type="text" value="${d.role}" placeholder="مثال: محاسب"></div>
        <div><label>الشركة</label><input class="company" type="text" value="${d.company}" placeholder="اسم الشركة"></div>
        <div><label>الموقع</label><input class="loc" type="text" value="${d.loc}"></div>
        <div><label>الفترة</label><div style="display:flex;gap:8px"><input class="start" type="text" placeholder="YYYY-MM" value="${d.start}" style="flex:1"><input class="end" type="text" placeholder="YYYY-MM أو حاضر" value="${d.end}" style="flex:1"></div></div>
        <div><label>إنجاز #1</label><input class="b1" type="text" value="${d.b1}" placeholder="مثال: حسّنت التحصيل 18%"></div>
        <div><label>إنجاز #2</label><input class="b2" type="text" value="${d.b2}" placeholder="مثال: خفّضت الأخطاء 30%"></div>
      </div>`;
    w.addEventListener('input', renderExp);
    return w;
  }

  // Preview header
  function updateHeader(){
    $('#v_name').textContent = sanitize(fullName.value) || 'اسم المتقدّم';
    $('#v_title').textContent = sanitize(title.value) || 'المسمّى المستهدف';
    const contacts = [
      sanitize(email.value),
      bhPhone() || '',
      sanitize(locationInput.value||'المنامة، البحرين')
    ].filter(Boolean).join(' · ');
    $('#v_contacts').textContent = contacts || 'email@example.com · +973 3xxxxxxx · المنامة، البحرين';
    checkReady();
  }
  [fullName,title,email,phoneDigits,locationInput].forEach(el=>el.addEventListener('input', updateHeader));
  [nationality,eduLevel,hasLicense,hasTransport].forEach(el=>el.addEventListener('change', checkReady));

  // Summary
  summary.addEventListener('input', e=>{
    sumCount.textContent=e.target.value.length;
    const v=sanitize(e.target.value); $('#v_summary').textContent=v; $('#sec_summary').hidden=!v;
  });

  // Education render
  function currentMajor(){
    return majorList.value==='other' ? sanitize(majorCustom.value) : (majorList.value||'');
  }
  function renderEducation(){
    const v=$('#v_edu'); v.innerHTML='';
    let line='';
    const m=currentMajor();
    if(bhInstitution.value && bhInstitution.value!=='abroad'){
      line = [bhInstitution.value, m].filter(Boolean).join(' — ');
    }else if(bhInstitution.value==='abroad'){
      const parts=[sanitize(uniName.value), sanitize(country.value), m].filter(Boolean);
      line = parts.join(' — ');
    }
    if(!line && !gradDate.value){ $('#sec_edu').hidden=true; return; }
    const div=document.createElement('div'); div.className='item';
    div.innerHTML = `<div><strong>${line||'مؤسسة تعليمية'}</strong></div><div class="meta">${gradDate.value||''} · ${eduLevel.value||''}</div>`;
    v.appendChild(div); $('#sec_edu').hidden=false;
    checkReady();
  }
  [bhInstitution,gradDate,country,uniName,uniMajor,majorCustom,majorList].forEach(el=>el.addEventListener('input', renderEducation));
  [eduLevel].forEach(el=>el.addEventListener('change', renderEducation));

  // Languages render
  function renderLangs(){
    const v=$('#v_langs'); v.innerHTML='';
    const chosen = langChecks.filter(cb=>cb.checked).map(cb=>cb.value);
    chosen.forEach(t=>{ const p=document.createElement('p'); p.className='meta'; p.textContent='• '+t; v.appendChild(p); });
    $('#sec_langs').hidden = chosen.length===0;
  }

  // Experience render
  function renderExp(){
    const v=$('#v_exp'); v.innerHTML='';
    $$('#expList .rep').forEach(rep=>{
      const role=sanitize($('.role',rep).value), company=sanitize($('.company',rep).value),
            loc=sanitize($('.loc',rep).value), st=sanitize($('.start',rep).value), en=sanitize($('.end',rep).value),
            b1=sanitize($('.b1',rep).value), b2=sanitize($('.b2',rep).value);
      if(!(role||company||b1||b2)) return;
      const it=document.createElement('div'); it.className='item';
      it.innerHTML = `<div><strong>${role}</strong><span class="meta"> ${company?(' — '+company):''}</span></div>
                      <div class="meta">${[loc,[st,en].filter(Boolean).join(' – ')].filter(Boolean).join(' · ')}</div>`;
      const ul=document.createElement('ul'); [b1,b2].filter(Boolean).forEach(t=>{const li=document.createElement('li'); li.textContent=t; ul.appendChild(li);});
      it.appendChild(ul); v.appendChild(it);
    });
    $('#sec_exp').hidden = v.children.length===0;
  }

  // Ready / buttons
  const btnPdf=$('#btnPdf'), btnDoc=$('#btnDoc'), btnSave=$('#btnSave'), readyMsg=$('#readyMsg');
  function isReady(){
    const okName=!!sanitize(fullName.value);
    const okTitle=!!sanitize(title.value);
    const okEmail=!!sanitize(email.value);
    const okPhone=(phoneDigits.value||'').replace(/\D/g,'').length===8;
    const okLoc=!!sanitize(locationInput.value);
    const okNat=!!nationality.value;
    const okLevel=!!eduLevel.value;
    const okLicense=!!hasLicense.value;
    const okTransport=!!hasTransport.value;
    const okMajor = majorList.value ? (majorList.value==='other' ? !!sanitize(majorCustom.value) : true) : false;
    return okName&&okTitle&&okEmail&&okPhone&&okLoc&&okNat&&okLevel&&okLicense&&okTransport&&okMajor;
  }
  function checkReady(){
    const ready=isReady();
    [btnPdf,btnDoc,btnSave].forEach(b=>b.disabled=!ready);
    readyMsg.textContent = ready ? 'جاهز للتنزيل. اختر الصيغة المفضلة:' : 'أكمل الحقول الأساسية ثم اختر التنزيل:';
  }

  // Export
  btnPdf.addEventListener('click', ()=>{ if(isReady()) window.print(); });
  btnDoc.addEventListener('click', ()=>{
    if(!isReady()) return;
    const dir=document.documentElement.getAttribute('dir')||'rtl';
    const cv=$('#cv').cloneNode(true);
    const styles=`<style>
      body{font-family:"Cairo","Noto Naskh Arabic",Arial;direction:${dir};color:#0F172A}
      h1{margin:0 0 4px;font-size:22px} h3{margin:10px 0 6px;font-size:14px}
      .meta{color:#475569;font-size:12px} .barline{height:2px;background:#C7A046;margin:8px 0 14px}
      .chip{display:inline-block;margin:2px 4px;padding:3px 8px;border:1px solid #E5E7EB;border-radius:999px;font-size:11px;background:#F8FAFC}
      ul{margin:6px 0 0 18px} li{margin:4px 0}
    </style>`;
    const html=`<!DOCTYPE html><html><head><meta charset="utf-8"><title>CV</title>${styles}</head><body>${cv.outerHTML}</body></html>`;
    const blob=new Blob([html],{type:'application/msword'});
    const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='CV-Bahrain.doc'; a.click();
    setTimeout(()=>URL.revokeObjectURL(url),200);
  });
  btnSave.addEventListener('click', ()=>{
    if(!isReady()) return;
    const langs = $$('#langChecks input:checked').map(cb=>cb.value);
    const data={
      basics:{
        name:sanitize(fullName.value), title:sanitize(title.value), email:sanitize(email.value),
        phone: bhPhone(), location:sanitize(locationInput.value), nationality:nationality.value,
        eduLevel: eduLevel.value, hasLicense: hasLicense.value, hasTransport: hasTransport.value,
        major: currentMajor(), summary:sanitize(summary.value)
      },
      education: (()=>{
        if(bhInstitution.value==='abroad'){
          return {type:'abroad', country:country.value, university:sanitize(uniName.value), major:sanitize(uniMajor.value), grad:gradDate.value};
        }else{
          return {type:'bahrain', institution:bhInstitution.value, grad:gradDate.value};
        }
      })(),
      languages: langs
    };
    const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
    const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='cv-bahrain.json'; a.click();
    setTimeout(()=>URL.revokeObjectURL(url),200);
  });

  // Live bindings
  [nationality,eduLevel,hasLicense,hasTransport].forEach(el=>el.addEventListener('change', checkReady));
  [fullName,title,email,phoneDigits,locationInput,majorCustom].forEach(el=>el.addEventListener('input', checkReady));
  summary.addEventListener('input', ()=>{}); // counter أعلاه

  // Initial render
  updateHeader(); renderEducation(); renderLangs(); renderExp(); checkReady();
})();
</script>
</body>
</html>
