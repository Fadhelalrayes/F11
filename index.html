<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø®Ø³ÙˆÙ ÙˆØ§Ù„ÙƒØ³ÙˆÙ â€¢ ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª</title>
<meta name="description" content="Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø®Ø³ÙˆÙ ÙˆØ§Ù„ÙƒØ³ÙˆÙ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© (Ù†Ø§Ø³Ø§ ÙˆØºÙŠØ±Ù‡Ø§) Ù…Ø¹ Ø§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù…Ø®ØªØµØ±Ø© Ù„ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª ÙˆØªØ¹Ø±ÙŠÙØ§Øª Ø§Ù„ÙƒØ³ÙˆÙ ÙˆØ§Ù„Ø®Ø³ÙˆÙ.">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@500;700;800&family=Noto+Kufi+Arabic:wght@600;700&display=swap" rel="stylesheet">
<script id="ld-json" type="application/ld+json">{}</script>

<style>
  :root{
    --bg:#f7f7f4; --card:#ffffff; --ink:#0d1420; --muted:#68707a;
    --border:#e7e3d7; --green:#0f7a4a; --green-700:#0b5e3a; --gold:#c6a83c;
    --shadow:0 10px 24px rgba(0,0,0,.06);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font-family:"Cairo",system-ui,sans-serif;line-height:1.75}
  .container{width:min(1100px,100%);margin:auto;padding:16px;display:flex;flex-direction:column;gap:14px}

  /* Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
  .hero{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:16px;text-align:center}
  .heroTitle{margin:2px 0;font-family:"Noto Kufi Arabic",sans-serif;font-weight:700;font-size:1.35rem;letter-spacing:.2px}

  /* Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ù‚Ø§Ø¯Ù… */
  .nextBox{background:var(--card);border:2px solid var(--gold);border-radius:14px;box-shadow:var(--shadow);padding:14px;display:grid;gap:10px}
  .nextHead{display:flex;justify-content:center}
  .nextTitle{color:var(--green);font-weight:900;font-size:1.05rem;text-align:center}
  .nextDate{color:#8b7a24;font-weight:800;text-align:center}
  .eventName{margin-top:4px;text-align:center;font-weight:900;font-size:1.1rem}
  .whenCol{display:grid;gap:8px}
  .tag{display:block;width:100%;text-align:center;background:#faf9f5;border:1px solid var(--border);border-radius:10px;padding:.55rem .7rem;font-weight:800}
  .ruleLine{text-align:center;color:#7a6720;font-weight:800}

  /* Ø²Ø± ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø¯Ø« */
  .tzActions{margin-top:10px;display:flex;justify-content:center}
  .btn{border:1px solid var(--border);background:#fff;border-radius:10px;padding:.5rem .85rem;font-weight:800;cursor:pointer}
  .btn.primary{border-color:#e8dfb2;background:#fff}

  /* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø© */
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media(max-width:760px){.row{grid-template-columns:1fr}}
  .chip{background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:12px;display:flex;align-items:center;gap:10px}
  .ico{width:34px;height:34px;display:grid;place-items:center;border-radius:8px;background:#f2efe6}
  .stack{display:flex;flex-direction:column}
  .label{font-size:.86rem;color:var(--muted);font-weight:700}
  .value{font-weight:900}

  /* Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ */
  .card{background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:12px}
  .card h3{margin:0 0 8px;text-align:center;font-weight:900;font-size:1.05rem}
  table{width:100%;border-collapse:collapse}
  th,td{padding:10px;border-bottom:1px solid #efeade;font-size:.98rem}
  th{background:#fbfaf7;font-weight:900}
  td.name{font-weight:800}
  td.time{font-variant-numeric:tabular-nums;font-weight:800}
  tr.highlight td{background:#fcfbf6}
  .small{font-size:.9rem;color:var(--muted);margin-top:6px;text-align:center}

  /* Ø£Ø­ÙƒØ§Ù… */
  .ahkam{background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:14px}
  .ahkam h3{margin:0 0 6px;text-align:center;font-weight:900;font-size:1.05rem}
  .ahkam p{margin:.35rem 0;text-align:justify}

  /* Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„ØªØ¹Ø±ÙŠÙ */
  .defsGrid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media(max-width:760px){.defsGrid{grid-template-columns:1fr}}
  .defCard{background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:14px}
  .defCard h4{margin:0 0 8px;font-weight:900;color:var(--green)}
  .defCard p{margin:.35rem 0;text-align:justify}
  .bul{margin:.35rem 0 .2rem 1rem}
  .bul li{margin:.25rem 0}
  .defWide{grid-column:1/-1}

  /* Ø´Ø±ÙŠØ· Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ù†Ø³Ø¯Ù„ */
  .sourcesBar{
    background:var(--card); border:1px solid var(--border); border-radius:12px;
    box-shadow:var(--shadow); padding:12px; display:flex; gap:10px; align-items:center;
    justify-content:center; flex-wrap:wrap
  }
  .sourcesBar label{font-weight:900;color:var(--green-700)}
  .sourcesBar select{
    padding:.55rem .8rem; border:1px solid var(--border); border-radius:10px;
    font-weight:800; background:#fff; min-width:280px
  }
  .sourcesBar .btn{border:1px solid var(--border);border-radius:10px;padding:.5rem .9rem;font-weight:900;background:#fff;cursor:pointer}
  .sourcesBar .btn.primary{border-color:#e8dfb2}

  footer{text-align:center;margin-top:6px}
  .credit{color:var(--green-700);font-weight:900}

  /* Ø­ÙˆØ§Ø± ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø© */
  .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(15,23,42,.28);z-index:60}
  .modal.open{display:grid}
  .box{width:min(480px,95%);background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:14px}
  .rowCtrl{display:flex;gap:10px;align-items:center;margin:8px 0}
  .rowCtrl label{width:120px;color:var(--muted);font-weight:800}
  select{flex:1;padding:.55rem;border:1px solid var(--border);border-radius:10px;font-weight:800;background:#fff}
  .actions{display:flex;gap:10px;margin-top:10px;justify-content:flex-end}
</style>
</head>
<body>
  <div class="container">
    <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
    <section class="hero" aria-label="ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø®Ø³ÙˆÙ ÙˆØ§Ù„ÙƒØ³ÙˆÙ">
      <h1 class="heroTitle">ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø®Ø³ÙˆÙ ÙˆØ§Ù„ÙƒØ³ÙˆÙ â€¢ ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª</h1>
      <!-- ØªÙ…Øª Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠØ© Ø­Ø³Ø¨ Ø·Ù„Ø¨Ùƒ -->
    </section>

    <!-- Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ù‚Ø§Ø¯Ù… -->
    <section class="nextBox" id="nextBox" aria-live="polite">
      <div class="nextHead"><div class="nextTitle">Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ù‚Ø§Ø¯Ù…</div></div>
      <div class="nextDate" id="nextDate">â€”</div>
      <div class="eventName" id="eventName">â€”</div>

      <!-- Ù…Ø³ØªØ·ÙŠÙ„Ø§Øª Ù…Ù…ØªØ¯Ø© Ø¨Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±Ø¨Ø¹: ØªØ§Ø±ÙŠØ® ÙÙ‚Ø· -->
      <div class="whenCol">
        <span class="tag" id="tStart">ÙŠØ¨Ø¯Ø£: â€”</span>
        <span class="tag" id="tMax">Ø§Ù„Ø£Ø¹Ø¸Ù…: â€”</span>
        <span class="tag" id="tEnd">ÙŠÙ†ØªÙ‡ÙŠ: â€”</span>
      </div>

      <div class="ruleLine" id="nextRuling">Ø§Ù„Ø­ÙƒÙ… Ø§Ù„Ø´Ø±Ø¹ÙŠ Ù„Ù„ØµÙ„Ø§Ø© : ÙˆØ§Ø¬Ø¨Ø©</div>
    </section>

    <!-- Ø²Ø± ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¨Ø¹Ø¯ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø­Ø¯Ø« -->
    <div class="tzActions">
      <button class="btn primary" id="openTZ" type="button">ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</button>
    </div>

    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø© -->
    <section class="row">
      <div class="chip">
        <div class="ico">ğŸ“…</div>
        <div class="stack"><div class="label">Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ</div><div class="value" id="greg">â€”</div></div>
      </div>
      <div class="chip">
        <div class="ico">ğŸŒ</div>
        <div class="stack"><div class="label">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©</div><div class="value" id="tzLabel">â€”</div></div>
      </div>
    </section>

    <!-- Ø¬Ø¯ÙˆÙ„ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø­Ø¯Ø« -->
    <section class="card">
      <h3>Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø­Ø¯Ø«</h3>
      <table>
        <thead><tr><th>Ø§Ù„Ù…Ø³Ù…Ù‘Ù‰</th><th>Ù…Ø­Ù„ÙŠ</th><th>UTC</th></tr></thead>
        <tbody id="phases"><tr><td colspan="3">â€”</td></tr></tbody>
      </table>
      <div class="small" id="windowNote">â€”</div>
    </section>

    <!-- Ø§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù…Ø®ØªØµØ±Ø© -->
    <section class="ahkam">
      <h3>Ø§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù…Ø®ØªØµØ±Ø© Ù„ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª</h3>
      <p><strong>ØªØ¬Ø¨</strong> ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª Ø¹Ù†Ø¯ Ø§Ù„ÙƒØ³ÙˆÙ Ø§Ù„Ø´Ù…Ø³ÙŠ ÙˆØ§Ù„Ø®Ø³ÙˆÙ Ø§Ù„Ù‚Ù…Ø±ÙŠØŒ ÙˆÙ„Ùˆ ÙƒØ§Ù†Ø§ Ø¬Ø²Ø¦ÙŠÙŠÙ†ØŒ ÙˆÙˆÙ‚ØªÙ‡Ø§ Ù…Ù† <strong>Ø§Ø¨ØªØ¯Ø§Ø¡ Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©</strong> Ø¥Ù„Ù‰ <strong>ØªÙ…Ø§Ù… Ø§Ù„Ø§Ù†Ø¬Ù„Ø§Ø¡</strong>.</p>
      <p><strong>Ø§Ù„Ù‚Ø¶Ø§Ø¡:</strong> Ù…Ù† ÙƒØ§Ù† Ø¹Ø§Ù„Ù…Ù‹Ø§ Ø¨Ø§Ù„Ø¸Ø§Ù‡Ø±Ø© ÙˆÙ„Ù… ÙŠÙØµÙ„Ù‘Ù Ø­ØªÙ‰ Ø§Ù†Ø¬Ù„ØªØŒ <strong>ÙŠÙ‚Ø¶ÙŠ</strong> Ù…Ø·Ù„Ù‚Ù‹Ø§ (ÙÙŠ Ø§Ù„ÙƒÙ„ÙŠ ÙˆØ§Ù„Ø¬Ø²Ø¦ÙŠ). ÙˆÙ…Ù† Ù„Ù… ÙŠØ¹Ù„Ù… Ø¨Ù‡Ø§ Ø­ØªÙ‰ Ø§Ù†Ø¬Ù„Øª: Ø¥Ù† ÙƒØ§Ù† <strong>ÙƒÙ„ÙŠÙ‹Ø§</strong> Ù‚Ø¶Ù‰ØŒ ÙˆØ¥Ù„Ø§Ù‘ ÙÙ„Ø§ Ù‚Ø¶Ø§Ø¡.</p>
      <p><strong>Ø°ÙˆØ§Øª Ø§Ù„Ø£Ø¹Ø°Ø§Ø± (Ø§Ù„Ø­ÙŠØ¶ ÙˆØ§Ù„Ù†ÙØ§Ø³):</strong> Ù„Ø§ ØªØµØ­Ù‘ Ù…Ù†Ù‡Ù† Ø§Ù„ØµÙ„Ø§Ø© Ø­Ø§Ù„ Ø§Ù„Ø¹Ø°Ø±ØŒ ÙˆÙ„Ø§ ÙŠØ¬Ø¨ Ø§Ù„Ù‚Ø¶Ø§Ø¡ Ù„Ù…Ø§ ÙÙÙˆØª Ø²Ù…Ù† Ø§Ù„Ø¹Ø°Ø±.</p>
      <p><strong>Ø§Ù„ÙƒÙŠÙÙŠØ© Ø¨Ø¥ÙŠØ¬Ø§Ø²:</strong> Ø±ÙƒØ¹ØªØ§Ù†ØŒ ÙÙŠ ÙƒÙ„ Ø±ÙƒØ¹Ø© Ø®Ù…Ø³Ø© Ø±ÙƒÙˆØ¹Ø§ØªØŒ Ø«Ù… Ø³Ø¬Ø¯ØªØ§Ù†Ø› ÙˆØªÙÙØ¹Ù„ Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ù…Ø«Ù„ Ø§Ù„Ø£ÙˆÙ„Ù‰ØŒ Ø«Ù… Ø§Ù„ØªØ´Ù‡Ù‘Ø¯ ÙˆØ§Ù„Ø³Ù„Ø§Ù….</p>
    </section>

    <!-- Ù…Ø±Ø¨Ù‘Ø¹ ØªØ¹Ø±ÙŠÙ Ø¹Ø§Ù… + Ù…Ø±Ø¨Ø¹Ø§ Ø§Ù„ØªØ¹Ø±ÙŠÙ Ù„Ù„Ø´Ù…Ø³ ÙˆØ§Ù„Ù‚Ù…Ø± -->
    <section class="defsGrid" aria-label="ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙƒØ³ÙˆÙ ÙˆØ§Ù„Ø®Ø³ÙˆÙ">
      <article class="defCard defWide">
        <h4>Ø§Ù„ÙƒØ³ÙˆÙ ÙˆØ§Ù„Ø®Ø³ÙˆÙ</h4>
        <p><strong>Ø§Ù„ÙƒØ³ÙˆÙ ÙˆØ§Ù„Ø®Ø³ÙˆÙ</strong> Ø¸Ø§Ù‡Ø±ØªØ§Ù† ÙÙ„ÙƒÙŠØªØ§Ù† Ù…Ø®ØªÙ„ÙØªØ§Ù† ØªÙ…Ø§Ù…Ø§Ù‹. Ø§Ù„ÙƒØ³ÙˆÙ ÙŠÙƒÙˆÙ† <strong>Ù„Ù„Ø´Ù…Ø³</strong>ØŒ Ø¨ÙŠÙ†Ù…Ø§ Ø§Ù„Ø®Ø³ÙˆÙ ÙŠÙƒÙˆÙ† <strong>Ù„Ù„Ù‚Ù…Ø±</strong>.</p>
      </article>

      <article class="defCard">
        <h4>Ø§Ù„ÙƒØ³ÙˆÙ â˜€ï¸</h4>
        <p>Ù‡Ùˆ Ø­Ø¬Ø¨ <strong>Ø§Ù„Ø´Ù…Ø³</strong> Ø¹Ù† Ø§Ù„Ø£Ø±Ø¶. ÙŠØ­Ø¯Ø« Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ…Ø±Ù‘ Ø§Ù„Ù‚Ù…Ø± Ø¨ÙŠÙ† Ø§Ù„Ø´Ù…Ø³ ÙˆØ§Ù„Ø£Ø±Ø¶ ÙÙŠØ­Ø¬Ø¨ Ø¶ÙˆØ¡ Ø§Ù„Ø´Ù…Ø³ Ø¬Ø²Ø¦ÙŠÙ‹Ø§ Ø£Ùˆ ÙƒÙ„ÙŠÙ‹Ø§.</p>
        <ul class="bul">
          <li><strong>Ø§Ù„Ø¬Ø±Ù… Ø§Ù„Ù…Ø­Ø¬ÙˆØ¨:</strong> Ø§Ù„Ø´Ù…Ø³.</li>
          <li><strong>Ø§Ù„ØªØ±ØªÙŠØ¨:</strong> Ø§Ù„Ø´Ù…Ø³ â€“ Ø§Ù„Ù‚Ù…Ø± â€“ Ø§Ù„Ø£Ø±Ø¶.</li>
        </ul>
      </article>

      <article class="defCard">
        <h4>Ø§Ù„Ø®Ø³ÙˆÙ ğŸŒ•</h4>
        <p>Ù‡Ùˆ Ø­Ø¬Ø¨ <strong>Ø§Ù„Ù‚Ù…Ø±</strong> Ø¹Ù† Ø§Ù„Ø´Ù…Ø³. ÙŠØ­Ø¯Ø« Ø¹Ù†Ø¯Ù…Ø§ ØªÙ…Ø±Ù‘ Ø§Ù„Ø£Ø±Ø¶ Ø¨ÙŠÙ† Ø§Ù„Ø´Ù…Ø³ ÙˆØ§Ù„Ù‚Ù…Ø±ØŒ ÙÙŠÙ‚Ø¹ Ø§Ù„Ù‚Ù…Ø± ÙÙŠ Ø¸Ù„Ù‘ Ø§Ù„Ø£Ø±Ø¶ ÙÙŠØ¨Ø¯Ùˆ Ù…Ø¸Ù„Ù…Ù‹Ø§ Ø£Ùˆ Ù…Ø§Ø¦Ù„Ù‹Ø§ Ù„Ù„Ø£Ø­Ù…Ø±.</p>
        <ul class="bul">
          <li><strong>Ø§Ù„Ø¬Ø±Ù… Ø§Ù„Ù…Ø­Ø¬ÙˆØ¨:</strong> Ø§Ù„Ù‚Ù…Ø±.</li>
          <li><strong>Ø§Ù„ØªØ±ØªÙŠØ¨:</strong> Ø§Ù„Ø´Ù…Ø³ â€“ Ø§Ù„Ø£Ø±Ø¶ â€“ Ø§Ù„Ù‚Ù…Ø±.</li>
        </ul>
      </article>
    </section>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© -->
    <section class="sourcesBar" aria-label="Ù…ØµØ§Ø¯Ø± Ù…Ø¹ØªÙ…Ø¯Ø©">
      <label for="srcSel">Ø§Ù„Ù…ØµØ§Ø¯Ø±:</label>
      <select id="srcSel">
        <!-- ÙÙ„Ùƒ -->
        <option value="https://science.nasa.gov/eclipses/future-eclipses/">NASA â€“ Future Eclipses</option>
        <option value="https://eclipse.gsfc.nasa.gov/LEdecade/LEdecade2021.html">NASA GSFC â€“ Lunar Eclipses 2021â€“2030</option>
        <option value="https://eclipse.gsfc.nasa.gov/SEdecade/SEdecade2021.html">NASA GSFC â€“ Solar Eclipses 2021â€“2030</option>
        <option value="https://www.timeanddate.com/eclipse/">Timeanddate â€“ Eclipses</option>
        <option value="https://eclipsewise.com/">EclipseWise</option>
        <!-- Ø£Ø­ÙƒØ§Ù… (Ù…ÙƒØªØ¨ Ø§Ù„Ø³ÙŠØ¯ Ø§Ù„Ø³ÙŠØ³ØªØ§Ù†ÙŠ) -->
        <option value="https://www.sistani.org/arabic/qa/0551/">Ø§Ù„Ø§Ø³ØªÙØªØ§Ø¡Ø§Øª â€“ ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª (sistani.org)</option>
        <option value="https://www.sistani.org/arabic/book/13/597/">Ø§Ù„Ù…Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ù†ØªØ®Ø¨Ø© â€“ ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª (sistani.org)</option>
        <option value="https://www.sistani.org/arabic/book/23720/4663/">Ù…Ù†Ù‡Ø§Ø¬ Ø§Ù„ØµØ§Ù„Ø­ÙŠÙ† â€“ Ù…ÙˆØ§Ø±Ø¯ ÙˆØ¬ÙˆØ¨ ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª (sistani.org)</option>
        <option value="https://www.sistani.org/arabic/book/23720/4664/">Ù…Ù†Ù‡Ø§Ø¬ Ø§Ù„ØµØ§Ù„Ø­ÙŠÙ† â€“ ÙˆÙ‚Øª ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª (sistani.org)</option>
        <option value="https://www.sistani.org/arabic/book/23720/4665/">Ù…Ù†Ù‡Ø§Ø¬ Ø§Ù„ØµØ§Ù„Ø­ÙŠÙ† â€“ ÙƒÙŠÙÙŠØ© ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª (sistani.org)</option>
      </select>
      <button type="button" id="openSrc" class="btn primary">ÙØªØ­ Ø§Ù„Ù…ØµØ¯Ø±</button>
    </section>

    <footer><span class="credit">Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ± ÙØ§Ø¶Ù„ Ø§Ù„Ø±ÙŠØ³</span></footer>
  </div>

  <!-- Ø­ÙˆØ§Ø± ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø© -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-label="ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©">
    <div class="box">
      <div class="rowCtrl"><label>Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©</label><select id="tzSel"></select></div>
      <div class="actions">
        <button class="btn" id="cancelTZ" type="button">Ø¥Ù„ØºØ§Ø¡</button>
        <button class="btn primary" id="saveTZ" type="button">Ø­ÙØ¸</button>
      </div>
    </div>
  </div>

<script>
/* ========== Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆÙ‚Øª ÙˆÙ…Ù†Ø·Ù‚Ø© ========== */
const SYSTEM_TZ = Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC';
let tz = localStorage.getItem('eclipse_tz') || SYSTEM_TZ;

function fmtDate(d,zone){ return new Intl.DateTimeFormat('ar',{timeZone:zone,weekday:'long',year:'numeric',month:'long',day:'numeric'}).format(d); }
function fmtHM12_NoSec(d, zone){ return new Intl.DateTimeFormat('en-US',{timeZone:zone,hour:'2-digit',minute:'2-digit',hour12:true}).format(d); } // 12h AM/PM Ø¨Ù„Ø§ Ø«ÙˆØ§Ù†Ù
function fmtHM12UTC_NoSec(iso){ return new Intl.DateTimeFormat('en-US',{timeZone:'UTC',hour:'2-digit',minute:'2-digit',hour12:true}).format(new Date(iso)); }

function toTZ(iso, zone){
  const d=new Date(iso);
  const p=new Intl.DateTimeFormat('en-CA',{timeZone:zone,year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit',second:'2-digit'}).formatToParts(d);
  const g=t=>+(p.find(x=>x.type===t).value);
  return new Date(g('year'), g('month')-1, g('day'), g('hour'), g('minute'), g('second'));
}

/* ========== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (UTC) â€” Ø¯Ù‚ÙŠÙ‚Ø© ========== */
const EVENTS = [
  /* 2025 */
  { id:"LE-2025-03-14", kind:"Ø®Ø³ÙˆÙ Ù‚Ù…Ø±ÙŠ ÙƒÙ„ÙŠ",
    p1:"2025-03-14T03:57:24Z", u1:"2025-03-14T05:09:33Z", u2:"2025-03-14T06:25:59Z",
    greatest:"2025-03-14T06:58:41Z", u3:"2025-03-14T07:31:23Z", u4:"2025-03-14T08:47:48Z", p4:"2025-03-14T10:00:01Z" },
  { id:"SE-2025-03-29", kind:"ÙƒØ³ÙˆÙ Ø´Ù…Ø³ÙŠ Ø¬Ø²Ø¦ÙŠ",
    p1:"2025-03-29T08:51:52Z", greatest:"2025-03-29T10:48:36Z", p4:"2025-03-29T12:44:54Z" },
  { id:"LE-2025-09-07", kind:"Ø®Ø³ÙˆÙ Ù‚Ù…Ø±ÙŠ ÙƒÙ„ÙŠ",
    p1:"2025-09-07T15:28:21Z", u1:"2025-09-07T16:27:02Z", u2:"2025-09-07T17:30:41Z",
    greatest:"2025-09-07T18:11:43Z", u3:"2025-09-07T18:52:47Z", u4:"2025-09-07T19:56:26Z", p4:"2025-09-07T20:55:00Z" },
  { id:"SE-2025-09-21", kind:"ÙƒØ³ÙˆÙ Ø´Ù…Ø³ÙŠ Ø¬Ø²Ø¦ÙŠ",
    p1:"2025-09-21T17:30:51Z", greatest:"2025-09-21T19:43:04Z", p4:"2025-09-21T21:54:55Z" },
  /* 2026 */
  { id:"SE-2026-02-17", kind:"ÙƒØ³ÙˆÙ Ø´Ù…Ø³ÙŠ Ø­Ù„Ù‚ÙŠ",
    p1:"2026-02-17T09:57:35Z", greatest:"2026-02-17T12:13:06Z", p4:"2026-02-17T14:28:51Z" },
  { id:"LE-2026-03-03", kind:"Ø®Ø³ÙˆÙ Ù‚Ù…Ø±ÙŠ ÙƒÙ„ÙŠ",
    p1:"2026-03-03T08:44:22Z", u1:"2026-03-03T09:50:00Z", u2:"2026-03-03T11:04:26Z",
    greatest:"2026-03-03T11:33:37Z", u3:"2026-03-03T12:02:45Z", u4:"2026-03-03T13:17:10Z", p4:"2026-03-03T14:22:59Z" }
];

/* ========== Ø¥ÙŠØ¬Ø§Ø¯ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ù‚Ø§Ø¯Ù…/Ø§Ù„Ø¬Ø§Ø±ÙŠ ========== */
function nextOrCurrent(){
  const now = new Date();
  const sorted=[...EVENTS].sort((a,b)=> new Date(a.p1) - new Date(b.p1));
  for(const ev of sorted){
    const start=new Date(ev.p1);
    const end  =new Date(ev.p4 || ev.u4 || ev.greatest || ev.u3 || start);
    if(now<start) return {ev,state:'upcoming'};
    if(now>=start && now<=end) return {ev,state:'ongoing'};
  }
  return {ev:sorted[sorted.length-1],state:'past'};
}

/* ========== Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø¯Ø« ÙˆØ§Ù„Ø¬Ø¯ÙˆÙ„ ========== */
function renderEvent(){
  const {ev} = nextOrCurrent();

  // Ø§Ø³Ù… Ø§Ù„Ø­Ø¯Ø« ÙÙŠ Ø³Ø·Ø± ÙˆØ§Ø­Ø¯
  document.getElementById('eventName').textContent = ev.kind;

  // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¯Ø« ÙÙŠ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø­Ø¯Ø«
  const startLocal = toTZ(ev.p1 || ev.greatest, tz);
  document.getElementById('nextDate').textContent = fmtDate(startLocal, tz);

  // â€œÙŠØ¨Ø¯Ø£/Ø§Ù„Ø£Ø¹Ø¸Ù…/ÙŠÙ†ØªÙ‡ÙŠâ€ â€” ØªØ§Ø±ÙŠØ® ÙÙ‚Ø·
  const pStart = ev.p1 ? fmtDate(toTZ(ev.p1,tz), tz) : 'â€”';
  const pMax   = ev.greatest ? fmtDate(toTZ(ev.greatest,tz), tz) : 'â€”';
  const pEnd   = (ev.p4 || ev.u4 || ev.greatest) ? fmtDate(toTZ(ev.p4 || ev.u4 || ev.greatest, tz), tz) : 'â€”';
  tStart.textContent = `ÙŠØ¨Ø¯Ø£: ${pStart}`;
  tMax.textContent   = `Ø§Ù„Ø£Ø¹Ø¸Ù…: ${pMax}`;
  tEnd.textContent   = `ÙŠÙ†ØªÙ‡ÙŠ: ${pEnd}`;

  // Ø§Ù„Ø­ÙƒÙ…
  document.getElementById('nextRuling').textContent = 'Ø§Ù„Ø­ÙƒÙ… Ø§Ù„Ø´Ø±Ø¹ÙŠ Ù„Ù„ØµÙ„Ø§Ø© : ÙˆØ§Ø¬Ø¨Ø©';

  // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ â€” 12h AM/PM Ø¨Ù„Ø§ Ø«ÙˆØ§Ù†Ù ÙˆÙ„Ø§ ØªØ§Ø±ÙŠØ®
  const map=[];
  if(ev.p1) map.push({n:"Ø¨Ø¯Ø§ÙŠØ© Ø´Ø¨Ù‡ Ø§Ù„Ø¸Ù„ (P1)", u:ev.p1});
  if(ev.u1) map.push({n:"Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¸Ù„ (U1)", u:ev.u1});
  if(ev.u2) map.push({n:"Ø¨Ø¯Ø¡ Ø§Ù„ÙƒÙ„Ù‘ÙŠØ©/Ø§Ù„Ø­Ù„Ù‚ÙŠÙ‘Ø© (U2)", u:ev.u2});
  if(ev.greatest) map.push({n:"Ø£Ø¹Ø¸Ù… Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©", u:ev.greatest});
  if(ev.u3) map.push({n:"Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ÙƒÙ„Ù‘ÙŠØ©/Ø§Ù„Ø­Ù„Ù‚ÙŠÙ‘Ø© (U3)", u:ev.u3});
  if(ev.u4) map.push({n:"Ø®Ø±ÙˆØ¬ Ø§Ù„Ø¸Ù„ (U4)", u:ev.u4});
  if(ev.p4) map.push({n:"Ù†Ù‡Ø§ÙŠØ© Ø´Ø¨Ù‡ Ø§Ù„Ø¸Ù„ (P4)", u:ev.p4});

  phases.innerHTML = map.map(r=>{
    const local = fmtHM12_NoSec(toTZ(r.u, tz), tz);  // Ù…Ø­Ù„ÙŠ 12h AM/PM
    const utc   = fmtHM12UTC_NoSec(r.u);             // UTC 12h AM/PM
    return `<tr class="${(r.u===ev.greatest)?'highlight':''}">
      <td class="name">${r.n}</td>
      <td class="time">${local}</td>
      <td class="time">${utc}</td>
    </tr>`;
  }).join('');

  // Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø´Ø±Ø¹ÙŠ: Ø³Ø§Ø¹Ø§Øª/Ø¯Ù‚Ø§Ø¦Ù‚ ÙÙ‚Ø·
  const startText = ev.p1 ? fmtHM12_NoSec(toTZ(ev.p1,tz), tz) : 'â€”';
  const endText   = (ev.p4||ev.u4||ev.greatest) ? fmtHM12_NoSec(toTZ(ev.p4||ev.u4||ev.greatest,tz), tz) : 'â€”';
  windowNote.textContent = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø´Ø±Ø¹ÙŠ Ù„ØµÙ„Ø§Ø© Ø§Ù„Ø¢ÙŠØ§Øª: Ù…Ù† Ø¨Ø¯Ø¡ Ø§Ù„Ø¸Ø§Ù‡Ø±Ø© (${startText}) Ø­ØªÙ‰ ØªÙ…Ø§Ù… Ø§Ù„Ø§Ù†Ø¬Ù„Ø§Ø¡ (${endText}).`;

  // JSON-LD (SEO)
  const startISO = ev.p1 || ev.greatest;
  const endISO   = ev.p4 || ev.u4 || ev.greatest;
  const obj = {"@context":"https://schema.org","@type":"Event","name":ev.kind,
               "startDate":startISO,"endDate":endISO,"inLanguage":"ar",
               "description":"Ø®Ø³ÙˆÙ/ÙƒØ³ÙˆÙ Ø¨Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø¯Ù‚ÙŠÙ‚Ø© ØªÙØ¹Ø±Ø¶ Ø­Ø³Ø¨ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ø§Ø¦Ø±."};
  document.getElementById('ld-json').textContent = JSON.stringify(obj);
}

/* ========== Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø© + TZ ========== */
const TZ_LIST = [
  "UTC","Asia/Bahrain","Asia/Riyadh","Asia/Kuwait","Asia/Baghdad","Asia/Tehran","Asia/Beirut",
  "Asia/Dubai","Asia/Qatar","Africa/Cairo","Europe/Istanbul","Europe/Athens","Europe/Paris",
  "Europe/London","America/New_York","America/Toronto","Asia/Karachi","Asia/Kolkata","Asia/Tokyo"
];

function renderMeta(){
  document.getElementById('tzLabel').textContent = tz;
  document.getElementById('greg').textContent = fmtDate(new Date(), tz);
}
renderMeta(); renderEvent();

/* Ø­ÙˆØ§Ø± ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø© */
function openModal(){
  const tzSel = document.getElementById('tzSel');
  tzSel.innerHTML = TZ_LIST.map(z=>`<option value="${z}">${z}</option>`).join("");
  tzSel.value = tz;
  document.getElementById('modal').classList.add('open');
  document.body.style.overflow='hidden';
}
function closeModal(){ document.getElementById('modal').classList.remove('open'); document.body.style.overflow=''; }
document.getElementById('openTZ').addEventListener('click', openModal);
document.getElementById('cancelTZ').addEventListener('click', closeModal);
document.getElementById('saveTZ').addEventListener('click', ()=>{
  const tzSel = document.getElementById('tzSel');
  tz = tzSel.value || SYSTEM_TZ;
  localStorage.setItem('eclipse_tz', tz);
  closeModal(); renderMeta(); renderEvent();
});
document.getElementById('modal').addEventListener('click',(e)=>{ if(e.target.id==='modal') closeModal(); });

/* Ø²Ø± ÙØªØ­ Ø§Ù„Ù…ØµØ¯Ø± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© */
document.getElementById('openSrc').addEventListener('click', ()=>{
  const url = document.getElementById('srcSel').value;
  if(url) window.open(url, '_blank', 'noopener');
});
</script>
</body>
</html>
