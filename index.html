<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cash4Life • مولّد أرقام احترافي</title>
  <style>
    :root{
      --gold:#B9920B;           /* ذهبي فاخر */
      --gold-2:#E6C45A;         /* ذهبي فاتح */
      --ink:#0F172A;            /* حبر أنيق */
      --muted:#6B7280;          /* رمادي ناعم */
      --bg:#FFFFFF;             /* أبيض صريح */
      --surface:#FCFCFD;        /* خلفية بطبقة واحدة */
      --line:rgba(15,23,42,.08);
      --ring:rgba(185,146,11,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Kufi Arabic", "Noto Sans Arabic", Tahoma, Arial, sans-serif;
      background: var(--surface);
      color:var(--ink);
    }
    .app{display:grid;grid-template-columns: 320px 1fr; min-height:100vh}

    /* ====== Sidebar ====== */
    .side{
      background: radial-gradient(900px 600px at 30% 10%, rgba(230,196,90,.22), transparent 60%),
                  linear-gradient(180deg, #fff 0%, #fef8e9 100%);
      border-inline-end:1px solid var(--line);
      padding:28px 22px; display:flex; flex-direction:column; gap:28px; justify-content:space-between
    }
    .brand{display:flex; align-items:center; gap:14px}
    .logo{width:54px;height:54px;border-radius:16px;display:grid;place-items:center;font-weight:900;color:#2B2200;letter-spacing:.4px;
      background: conic-gradient(from 210deg,var(--gold),var(--gold-2),var(--gold));
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.75), 0 10px 30px rgba(185,146,11,.28);
    }
    h1{margin:0;font-size: clamp(22px, 2.4vw, 28px)}
    .sub{color:var(--muted);margin-top:6px;line-height:1.6}
    .side .tip{background:#fff;border:1px solid var(--line);border-radius:14px;padding:12px 14px;color:#4b3b00}
    .side .mini{font-size:12px;color:var(--muted)}
    .credits{display:flex;flex-direction:column;gap:6px}

    /* ====== Main ====== */
    .main{padding:36px; display:grid; place-items:start}
    .panel{
      width:min(980px, 100%);
      background:#fff;border:1px solid var(--line);border-radius:20px;overflow:hidden
    }
    .hdr{display:flex;align-items:center;justify-content:space-between;padding:18px 20px;border-bottom:1px solid var(--line);backdrop-filter:saturate(140%)}
    .hdr .title{font-weight:800}
    .content{padding:18px 20px 24px}
    .row{display:flex;flex-wrap:wrap;gap:12px;align-items:flex-end}
    .row > *{flex:1 1 280px}
    label{font-weight:700;font-size:13px;color:#111827}
    select, textarea, input[type="text"]{
      width:100%;background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px 12px;font-size:14px;outline:none;transition:.25s
    }
    select:focus, textarea:focus, input:focus{box-shadow:0 0 0 4px var(--ring);border-color:var(--gold)}
    textarea{min-height:100px;resize:vertical}

    .btn{
      appearance:none;border:none;cursor:pointer;border-radius:12px;padding:12px 16px;font-weight:800;font-size:14px;
      background:linear-gradient(135deg,var(--gold),var(--gold-2));color:#1F1A00;box-shadow:0 6px 18px rgba(185,146,11,.35), inset 0 -2px 0 rgba(0,0,0,.08);transition:transform .06s ease, box-shadow .2s ease
    }
    .btn:hover{box-shadow:0 10px 24px rgba(185,146,11,.45)}
    .btn:active{transform:translateY(1px)}
    .btn.secondary{background:#fff;border:1px solid var(--line);box-shadow:none;font-weight:700}

    .result{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .ball{
      display:grid;place-items:center;min-width:60px;height:60px;border-radius:999px;padding:10px 14px;font-weight:900;font-size:18px;color:#2B2200;
      background:linear-gradient(160deg,#fff,#fff 60%, #faf7e6); border:1.5px solid var(--gold);
      box-shadow:inset 0 0 0 2px rgba(255,255,255,.85), 0 8px 20px rgba(185,146,11,.2)
    }
    .cash{border-color:#916F00;background:linear-gradient(160deg,#fff,#fff 60%, #f6f0cf)}

    .stats{display:grid;grid-template-columns: repeat(3,1fr);gap:12px;margin-top:18px}
    .stat{background:#fff;border:1px solid var(--line);border-radius:14px;padding:12px}
    .stat h3{margin:0 0 6px 0;font-size:13px}
    .muted{color:var(--muted);font-size:12px}

    .footer{padding:14px 20px;border-top:1px solid var(--line);display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .badge{font-weight:800;letter-spacing:.4px;color:#5a4a00}

    @media (max-width: 980px){
      .app{grid-template-columns: 1fr}
      .side{border-inline-end: none; border-bottom:1px solid var(--line)}
      .main{padding:22px}
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="side" aria-label="الشريط الجانبي">
      <div>
        <div class="brand">
          <div class="logo">C4L</div>
          <div>
            <h1>Cash4Life</h1>
            <div class="sub">مولّد أرقام بأسلوب احترافي ومظهر ذهبي أنيق.</div>
          </div>
        </div>
      </div>
      <div class="credits">
        <div class="tip"><strong>ملاحظة مهنية:</strong> لا توجد وسيلة مضمونة للتنبؤ بنتائج اليانصيب. هذا المولّد يقدّم انتقاءً مدروسًا فقط.</div>
        <div class="mini">التصميم: أبيض/ذهبي • تجربة RTL كاملة • قابلية مشاركة</div>
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <section class="panel" aria-labelledby="panelTitle">
        <div class="hdr">
          <div class="title" id="panelTitle">توليد التشكيلة</div>
          <div class="actions" style="display:flex; gap:8px">
            <button class="btn" id="generate">توليد</button>
            <button class="btn secondary" id="copy">نسخ</button>
            <button class="btn secondary" id="share">مشاركة</button>
          </div>
        </div>
        <div class="content">
          <div class="row" style="margin-bottom:12px">
            <div>
              <label for="mode">الخوارزمية</label>
              <select id="mode" aria-label="اختيار الخوارزمية">
                <option value="random">عشوائي بحت (Quick Pick)</option>
                <option value="spread">توازن الانتشار (نطاق من كل شريحة)</option>
                <option value="unpopular">شعبية أقل (ترجيح ما فوق 31)</option>
                <option value="freq">اعتماد التكرارات (ألصق تاريخ السحوبات)</option>
              </select>
            </div>
            <div>
              <label for="seed">بذرة ثابتة (اختياري)</label>
              <input id="seed" type="text" placeholder="مثال: 2025-09-18" />
            </div>
          </div>

          <div class="row" style="margin-bottom:14px">
            <div style="flex:2 1 420px">
              <label for="history">سجلّ سحوبات سابق (لاستخدام خوارزمية التكرار)</label>
              <textarea id="history" placeholder="مثال (سطر لكل سحب):&#10;05 14 21 33 57 | 3&#10;7 14 33 46 48 | 1&#10;...&#10;(أرقام رئيسية مفصولة بمسافة + Cash Ball بعد |)"></textarea>
            </div>
          </div>

          <div style="margin:14px 0">
            <div class="result" id="result" aria-live="polite"></div>
          </div>

          <div class="stats">
            <div class="stat">
              <h3>قواعد Cash4Life</h3>
              <div class="muted">اختر 5 أرقام من <b>1–60</b> + رقم Cash Ball من <b>1–4</b>.</div>
            </div>
            <div class="stat">
              <h3>نهج احترافي</h3>
              <div class="muted">خيار "التوازن" يضمن توزيعًا على مدى 1–60؛ وخيار "الشعبية الأقل" يقلّل تكرار اختيارات الجمهور.</div>
            </div>
            <div class="stat">
              <h3>البذرة (Seed)</h3>
              <div class="muted">ضع قيمة ثابتة لإعادة إنتاج نفس التوليد لاحقًا (للتحقق أو المشاركة).</div>
            </div>
          </div>
        </div>
        <div class="footer">
          <div class="badge">⚪️ أبيض • ✨ ذهبي</div>
          <div class="muted">استخدام ترفيهي—لا علاقة رسمية بأي سحب</div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // ========== Utilities ==========
    function seededRandomFactory(seed) {
      if (!seed) return Math.random; // fallback
      let h = 2166136261 >>> 0; // FNV-1a
      for (let i = 0; i < seed.length; i++) { h ^= seed.charCodeAt(i); h = Math.imul(h, 16777619); }
      let state = h >>> 0;
      return function(){ state = (1664525 * state + 1013904223) >>> 0; return (state >>> 0) / 0x100000000 }
    }

    function pickUnique(rnd, min, max, k, weights){
      const out = [], pool = []; for(let i=min;i<=max;i++) pool.push(i);
      for (let j=0;j<k;j++){
        let idx;
        if (weights){
          const total = pool.reduce((s,v)=> s + (weights[v]||0.0001), 0);
          let t = rnd()*total, acc = 0; idx = 0;
          for (let i=0;i<pool.length;i++){ acc += (weights[pool[i]]||0.0001); if (acc>=t){ idx=i; break; } }
        } else { idx = Math.floor(rnd()*pool.length); }
        out.push(pool[idx]); pool.splice(idx,1);
      }
      return out.sort((a,b)=>a-b)
    }

    function parseHistory(text){
      const lines = (text||"").split(/\n+/).map(s=>s.trim()).filter(Boolean);
      const freq = Array(61).fill(0), cashFreq = Array(5).fill(0);
      for(const line of lines){
        const seg = line.split('|');
        const left = (seg[0]||'').trim();
        const right = (seg[1]||'').trim();
        if(!left) continue;
        const parts = left.split(/\s+/).map(Number).filter(n=>n>=1 && n<=60);
        const uniq = Array.from(new Set(parts)).slice(0,5);
        for(const v of uniq) freq[v] += 1;
        if (right){ const cb = parseInt(right,10); if (cb>=1 && cb<=4) cashFreq[cb] += 1; }
      }
      for(let i=1;i<=60;i++) freq[i] = freq[i] + 0.5; // smoothing
      for(let i=1;i<=4;i++) cashFreq[i] = cashFreq[i] + 0.5;
      return {freq, cashFreq};
    }

    // ========== Generation ==========
    function generate(){
      const mode = document.getElementById('mode').value;
      const seed = document.getElementById('seed').value.trim();
      const rnd = seededRandomFactory(seed);
      const historyText = document.getElementById('history').value;
      const data = parseHistory(historyText);

      let main, cbWeights=null;

      if (mode === 'random'){
        main = pickUnique(rnd, 1, 60, 5);
      } else if (mode === 'spread'){
        const bands = [[1,12],[13,24],[25,36],[37,48],[49,60]];
        main = bands.map(([a,b]) => pickUnique(rnd, a, b, 1)[0]).sort((a,b)=>a-b);
      } else if (mode === 'unpopular'){
        const w = Array(61).fill(1); for(let i=32;i<=60;i++) w[i] = 2.15; // ترجيح خفيف
        main = pickUnique(rnd, 1, 60, 5, w);
      } else if (mode === 'freq'){
        main = pickUnique(rnd, 1, 60, 5, data.freq);
        cbWeights = data.cashFreq;
      }

      const cash = pickUnique(rnd, 1, 4, 1, cbWeights)[0];
      render(main, cash);
    }

    function render(arr, cash){
      const box = document.getElementById('result'); box.innerHTML = '';
      arr.forEach(v=>{ const d=document.createElement('div'); d.className='ball'; d.textContent=String(v).padStart(2,'0'); box.appendChild(d); });
      const c=document.createElement('div'); c.className='ball cash'; c.title='Cash Ball'; c.textContent=String(cash); box.appendChild(c);
      box.dataset.combo = `${arr.join('-')} | ${cash}`;
    }

    // ========== Actions ==========
    function toast(msg){
      const el = document.createElement('div'); el.textContent = msg;
      el.style.cssText = `position:fixed;inset-inline:0;bottom:18px;margin:auto;width:fit-content;max-width:90%;padding:10px 14px;border-radius:999px;background:linear-gradient(135deg,var(--gold),var(--gold-2));color:#1F1A00;font-weight:800;box-shadow:0 10px 24px rgba(185,146,11,.35);z-index:9999`;
      document.body.appendChild(el); setTimeout(()=> el.remove(), 1400);
    }

    document.getElementById('generate').addEventListener('click', generate);
    document.getElementById('copy').addEventListener('click', ()=>{
      const t = document.getElementById('result').dataset.combo || ''; if(!t) return;
      navigator.clipboard.writeText(`Cash4Life: ${t}`).then(()=> toast('تم النسخ'));
    });
    document.getElementById('share').addEventListener('click', ()=>{
      const t = document.getElementById('result').dataset.combo || ''; if(!t) return;
      const text = `ترشيحي لـ Cash4Life: ${t}`;
      if (navigator.share) navigator.share({text}).catch(()=>{}); else navigator.clipboard.writeText(text).then(()=> toast('تم النسخ للمشاركة'));
    });

    // توليد أولي
    generate();
  </script>
</body>
</html>
