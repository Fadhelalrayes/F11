<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© ÙˆÙÙ‚ Ø§Ù„Ù…Ø°Ù‡Ø¨ Ø§Ù„Ø¬Ø¹ÙØ±ÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --ink:#0f172a; --muted:#6b7280;
    --bg:#f6f8fb; --surface:#fff; --border:#e5e7eb;
    --brand:#0ea5a6; --brand2:#2563eb;
    --shadow:0 8px 20px rgba(2,6,23,.08);
    --radius:14px;
  }
  body{
    margin:0; font-family:"Tajawal", sans-serif; color:var(--ink);
    background:var(--bg); padding:16px;
  }
  .container{max-width:900px; margin:auto; display:flex; flex-direction:column; gap:16px;}
  h1{margin:0; text-align:center; font-size:1.3rem; font-weight:800}
  /* Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ */
  .locationBox{
    background:var(--surface); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); padding:12px 16px;
    display:flex; justify-content:space-between; align-items:center;
  }
  .locLabel{font-weight:700}
  .changeBtn{
    border:none; background:var(--brand); color:#fff;
    padding:6px 12px; border-radius:8px; cursor:pointer; font-weight:700;
  }
  /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ø®ØªÙŠØ§Ø± */
  .sheet{display:none; position:fixed; inset:0; background:rgba(0,0,0,.35); place-items:center; z-index:50;}
  .sheet.open{display:grid;}
  .panel{
    background:#fff; border-radius:16px; max-height:80vh; overflow:auto;
    padding:20px; width:90%; max-width:600px;
  }
  .panel h3{margin-top:0; font-size:1.1rem;}
  .country{margin-bottom:12px;}
  .country h4{margin:8px 0; font-size:1rem; color:var(--brand2);}
  .cityList{display:flex; flex-wrap:wrap; gap:8px;}
  .cityBtn{
    background:#f9fafb; border:1px solid var(--border); border-radius:8px;
    padding:6px 12px; cursor:pointer; font-weight:600;
  }
  .cityBtn:hover{background:#eefaff}
  /* Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª */
  table{width:100%; border-collapse:collapse; background:#fff; border-radius:var(--radius); box-shadow:var(--shadow);}
  th,td{padding:10px; border-bottom:1px solid #f0f2f5; text-align:right}
  th{background:#f9fafb; font-weight:700}
  tr:last-child td{border-bottom:none}
  .time{font-weight:800}
  tr.next{background:linear-gradient(90deg,#e0f7f9,transparent)}
  /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø­Ø¯ÙŠØ« */
  .hadith{
    background:#fff; border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); padding:20px; position:relative;
  }
  .hadith:before{
    content:"â€œ"; position:absolute; top:10px; right:15px; font-size:48px; color:#e0e7f1; font-weight:800;
  }
  .hadith p{margin:0; font-size:1.05rem; line-height:1.9}
  .hadith small{display:block; margin-top:10px; color:var(--muted); font-weight:600}
  footer{text-align:center; color:var(--muted); font-weight:700; margin-top:12px}
  .brand{color:var(--brand2)}
</style>
</head>
<body>
  <div class="container">
    <h1>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© ÙˆÙÙ‚ Ø§Ù„Ù…Ø°Ù‡Ø¨ Ø§Ù„Ø¬Ø¹ÙØ±ÙŠ</h1>

    <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
    <div class="locationBox">
      <div class="locLabel" id="place">Ø§Ù„Ù…Ù†Ø§Ù…Ø©ØŒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</div>
      <button class="changeBtn" id="open">ØªØºÙŠÙŠØ±</button>
    </div>

    <!-- Ø¬Ø¯ÙˆÙ„ -->
    <table>
      <thead><tr><th>Ø§Ù„ÙˆÙ‚Øª</th><th>Ø§Ù„Ø³Ø§Ø¹Ø© (12h)</th></tr></thead>
      <tbody id="times"><tr><td colspan="2">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØªâ€¦</td></tr></tbody>
    </table>

    <!-- Ø­Ø¯ÙŠØ« -->
    <div class="hadith">
      <p id="hadithText"></p>
      <small id="hadithSource"></small>
    </div>

    <footer>Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ± <span class="brand">ÙØ§Ø¶Ù„ Ø§Ù„Ø±ÙŠØ³</span></footer>
  </div>

  <!-- Ø§Ù„Ù„ÙˆØ­ Ù„Ù„Ø§Ø®ØªÙŠØ§Ø± -->
  <div class="sheet" id="sheet">
    <div class="panel">
      <h3>Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø© ÙˆØ§Ù„Ù…Ø¯ÙŠÙ†Ø©</h3>
      <div id="countries"><!-- ØªÙˆÙ„ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ --></div>
    </div>
  </div>

<script>
const MAP={
  "Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†":[ "Ø§Ù„Ù…Ù†Ø§Ù…Ø©","Ø§Ù„Ù…Ø­Ø±Ù‚","Ù…Ø¯ÙŠÙ†Ø© Ø¹ÙŠØ³Ù‰","Ù…Ø¯ÙŠÙ†Ø© Ø­Ù…Ø¯","Ø³ØªØ±Ø©","Ø³Ø§Ø±","Ø§Ù„Ø¯Ø±Ø§Ø²","Ø¬Ø¯Ø­ÙØµ"],
  "Ù„Ø¨Ù†Ø§Ù†":[ "Ø¨ÙŠØ±ÙˆØª","Ø·Ø±Ø§Ø¨Ù„Ø³","ØµÙŠØ¯Ø§"],
  "Ø§Ù„Ø¹Ø±Ø§Ù‚":[ "Ø¨ØºØ¯Ø§Ø¯","Ø§Ù„Ø¨ØµØ±Ø©","Ø£Ø±Ø¨ÙŠÙ„"],
  "Ø¥ÙŠØ±Ø§Ù†":[ "Ø·Ù‡Ø±Ø§Ù†","Ù…Ø´Ù‡Ø¯","Ø£ØµÙÙ‡Ø§Ù†"],
  "Ø§Ù„ÙƒÙˆÙŠØª":[ "Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„ÙƒÙˆÙŠØª","Ø­ÙˆÙ„ÙŠ","Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠ"],
  "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©":[ "Ø§Ù„Ø±ÙŠØ§Ø¶","Ø¬Ø¯Ø©","Ø§Ù„Ø¯Ù…Ø§Ù…","Ù…ÙƒØ©","Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"]
};
const HADITHS=[
 {t:"Ù‚Ø§Ù„ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø¨Ø§Ù‚Ø± (Ø¹): Ø¥Ø°Ø§ Ø§Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù…ØµÙ„ÙŠ Ø§Ù„Ù‚Ø¨Ù„Ø© Ø§Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø±Ø­Ù…Ù† Ø¨ÙˆØ¬Ù‡Ù‡ Ù„Ø§ Ø¥Ù„Ù‡ ØºÙŠØ±Ù‡.",s:"Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ø­ÙƒÙ…Ø©"},
 {t:"Ù‚Ø§Ù„ Ø§Ù„Ø¥Ù…Ø§Ù… Ø¹Ù„ÙŠ (Ø¹): Ø¥Ø°Ø§ Ù‚Ø§Ù… Ø§Ù„Ø±Ø¬Ù„ Ø¥Ù„Ù‰ Ø§Ù„ØµÙ„Ø§Ø© Ø£Ù‚Ø¨Ù„ Ø¥Ø¨Ù„ÙŠØ³ ÙŠÙ†Ø¸Ø± Ø¥Ù„ÙŠÙ‡ Ø­Ø³Ø¯Ø§Ù‹.",s:"Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ø­ÙƒÙ…Ø©"},
 {t:"Ù‚Ø§Ù„ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø±Ø¶Ø§ (Ø¹): Ø§Ù„ØµÙ„Ø§Ø© Ù„Ù‡Ø§ Ø£Ø±Ø¨Ø¹Ø© Ø¢Ù„Ø§Ù Ø¨Ø§Ø¨.",s:"Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ø­ÙƒÙ…Ø©"},
 {t:"Ù‚Ø§Ù„ Ø§Ù„Ø¥Ù…Ø§Ù… Ø¹Ù„ÙŠ (Ø¹): ÙŠØ§ ÙƒÙ…ÙŠÙ„! Ù„ÙŠØ³ Ø§Ù„Ø´Ø£Ù† Ø£Ù† ØªØµÙ„ÙŠ ÙˆØªØµÙˆÙ… ÙˆØªØªØµØ¯Ù‚ØŒ Ø¥Ù†Ù…Ø§ Ø§Ù„Ø´Ø£Ù† Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„ØµÙ„Ø§Ø© Ø¨Ù‚Ù„Ø¨ Ù†Ù‚ÙŠ ÙˆØ®Ø´ÙˆØ¹.",s:"Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ø­ÙƒÙ…Ø©"},
];
let current={country:"Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†",city:"Ø§Ù„Ù…Ù†Ø§Ù…Ø©"};

function to12h(t){
 if(!t)return"--"; const [H,M]=t.split(":").map(Number);
 let h=H%12; if(h===0)h=12; return `${String(h).padStart(2,"0")}:${String(M).padStart(2,"0")} ${H<12?"AM":"PM"}`;
}
function renderHadith(){
 const h=HADITHS[Math.floor(Math.random()*HADITHS.length)];
 hadithText.textContent=h.t; hadithSource.textContent=h.s;
}
function nextKey(timings){
 const order=["Imsak","Fajr","Dhuhr","Asr","Maghrib","Isha","Midnight"];
 const now=new Date();
 return order.find(k=>timings[k] && new Date("1970/01/01 "+timings[k])>now) || "Fajr";
}
async function load(){
 place.textContent=`${current.city}ØŒ ${current.country}`;
 times.innerHTML="<tr><td colspan=2>...</td></tr>";
 try{
   const url=`https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(current.city)}&country=${encodeURIComponent(current.country)}&method=0`;
   const res=await fetch(url); const j=await res.json(); const t=j.data.timings;
   const rows=[
     {l:"Ø§Ù„Ø¥Ù…Ø³Ø§Ùƒ",k:"Imsak",i:"ğŸŒ™"},
     {l:"Ø£Ø°Ø§Ù† Ø§Ù„ÙØ¬Ø±",k:"Fajr",i:"ğŸ•Œ"},
     {l:"Ø£Ø°Ø§Ù† Ø§Ù„Ø¸Ù‡Ø±",k:"Dhuhr",i:"â˜€ï¸"},
     {l:"Ø£Ø°Ø§Ù† Ø§Ù„Ø¹ØµØ±",k:"Asr",i:"ğŸŒ¤ï¸"},
     {l:"Ø£Ø°Ø§Ù† Ø§Ù„Ù…ØºØ±Ø¨",k:"Maghrib",i:"ğŸŒ†"},
     {l:"Ø£Ø°Ø§Ù† Ø§Ù„Ø¹Ø´Ø§Ø¡",k:"Isha",i:"ğŸŒ™"},
     {l:"Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„",k:"Midnight",i:"ğŸŒŒ"}
   ];
   const nk=nextKey(t);
   times.innerHTML=rows.map(r=>`<tr class="${r.k===nk?'next':''}"><td>${r.i} ${r.l}</td><td class="time">${to12h((t[r.k]||"").split(" ")[0])}</td></tr>`).join("");
 }catch{ times.innerHTML="<tr><td colspan=2>ØªØ¹Ø°Ø±</td></tr>"; }
}
function buildList(){
 const box=document.getElementById("countries");
 box.innerHTML="";
 for(const c in MAP){
   const div=document.createElement("div"); div.className="country";
   div.innerHTML=`<h4>${c}</h4><div class="cityList">${MAP[c].map(m=>`<button class="cityBtn" data-c="${c}" data-m="${m}">${m}</button>`).join("")}</div>`;
   box.appendChild(div);
 }
 box.querySelectorAll(".cityBtn").forEach(btn=>{
   btn.onclick=()=>{current={country:btn.dataset.c,city:btn.dataset.m}; closeSheet(); load();}
 });
}
function openSheet(){sheet.classList.add("open");}
function closeSheet(){sheet.classList.remove("open");}

open.onclick=openSheet;
closeSheet.onclick=closeSheet;
sheet.onclick=e=>{if(e.target===sheet)closeSheet();}

buildList(); renderHadith(); load();
</script>
</body>
</html>
