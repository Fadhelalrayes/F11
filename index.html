<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ø§Ù„ÙƒØ´Ù Ø§Ù„Ù…Ø¨ÙƒØ± Ø¹Ù† Ø§Ù„Ø³Ø±Ø·Ø§Ù† â€” Ø¯Ù„ÙŠÙ„ ØªÙØ§Ø¹Ù„ÙŠ (Ù…ÙˆØ«Ù‘Ù‚ Ù…Ù† WHO)</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@300;400;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#f5f6f8; --ink:#111827; --muted:#6b7280;
    --card:#ffffff; --line:#e5e7eb;
    --gold:#b58900; --gold-soft:#f5d574;
    --ocean:#0b4d8a; --emerald:#059669; --crimson:#dc2626;
  }
  *{box-sizing:border-box}
  body{margin:0; font-family:"Cairo",sans-serif; background:var(--bg); color:var(--ink)}
  header{text-align:center; padding:24px 12px}
  .brand{font-family:"Amiri",serif; font-size:clamp(26px,4.5vw,42px); color:var(--gold)}
  .tag{margin-top:6px; font-size:14px; color:#6b7280}
  .shell{max-width:980px; margin:0 auto; padding:0 16px}
  .hero{background:var(--card); border:1px solid var(--line); border-radius:20px; padding:20px; box-shadow:0 4px 12px rgba(0,0,0,.05)}
  .row{display:grid; gap:16px}
  @media(min-width:920px){ .row{grid-template-columns:1.2fr .8fr} }
  .field{display:flex; flex-direction:column; gap:8px; margin-bottom:12px}
  .center{text-align:center}
  .seg{display:flex; gap:6px; justify-content:center; flex-wrap:wrap}
  .seg button{flex:1; padding:10px 12px; border-radius:8px; border:1px solid var(--line); background:#f9fafb; cursor:pointer; max-width:160px}
  .seg button.on{background:var(--gold); color:#fff; border-color:var(--gold)}
  .select{ position:relative; display:inline-block; width:100% }
  .select select{
    width:100%; appearance:none; background:#fff; border:1px solid var(--gold); border-radius:10px;
    padding:10px 42px 10px 12px; font-size:1rem; cursor:pointer; color:#111; transition:.15s; text-align:right; box-shadow:0 1px 0 rgba(0,0,0,.02)
  }
  .select::after{
    content:""; position:absolute; top:50%; transform:translateY(-50%); right:12px; width:18px; height:18px;
    background:linear-gradient(135deg,var(--gold),var(--gold-soft));
    -webkit-mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="black" d="M5.23 7.21a.75.75 0 011.06.02L10 11.06l3.71-3.83a.75.75 0 111.08 1.04l-4.24 4.38a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"/></svg>') center/contain no-repeat;
    mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="black" d="M5.23 7.21a.75.75 0 011.06.02L10 11.06l3.71-3.83a.75.75 0 111.08 1.04l-4.24 4.38a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"/></svg>') center/contain no-repeat;
    pointer-events:none; opacity:.95;
  }
  .btn{padding:12px 20px; border-radius:10px; border:none; cursor:pointer; background:linear-gradient(90deg,var(--gold),var(--gold-soft)); color:#111; font-weight:700; display:block; margin:0 auto}
  .badge{display:inline-block; padding:10px 14px; border-radius:10px; margin-top:12px}
  .ok{background:#eff6ff; color:var(--ocean)}
  .card{background:#fdfdfd; border:1px solid var(--line); border-radius:12px; padding:14px; box-shadow:0 2px 6px rgba(0,0,0,.04)}
  .card h3{margin:0 0 6px; font-family:"Amiri",serif; color:var(--gold)}
  .deck{display:grid; gap:12px; grid-template-columns:1fr; margin-top:16px}
  @media(min-width:860px){ .deck{grid-template-columns:repeat(2,1fr)} }
  .kpi{display:grid; gap:10px; grid-template-columns:1fr 1fr; margin-top:10px}
  .k{background:#f9fafb; border:1px solid var(--line); border-radius:10px; padding:10px; text-align:center}
  .k .v{font-weight:700; font-size:18px}
  footer{text-align:center; margin:12px 0 24px; font-size:12px; color:#6b7280}
  .ghost-link{color:inherit; text-decoration:none; cursor:default}
  .notice{
    position:fixed; left:50%; bottom:20px; transform:translateX(-50%) translateY(10px);
    background:#fff; border:1px solid var(--gold); border-radius:12px; padding:10px 14px;
    box-shadow:0 8px 24px rgba(0,0,0,.12); display:flex; align-items:center; gap:10px;
    opacity:0; transition:.25s ease; z-index:9999; max-width:92vw; font-size:14px; color:#111;
  }
  .notice.show{ opacity:1; transform:translateX(-50%) translateY(0) }
  .notice .dot{width:10px; height:10px; border-radius:50%; background:linear-gradient(90deg,var(--gold),var(--gold-soft))}
  .notice .close{ margin-inline-start:8px; cursor:pointer; border:none; background:transparent; font-size:18px; line-height:1; color:#6b7280 }
  .notice.error{ border-color:#fecaca }
  .notice.error .dot{ background:linear-gradient(90deg,#fecaca,#fee2e2) }
</style>
</head>
<body>
<header>
  <div class="brand">Ø§Ù„ÙƒØ´Ù Ø§Ù„Ù…Ø¨ÙƒØ± Ø¹Ù† Ø§Ù„Ø³Ø±Ø·Ø§Ù†</div>
  <div class="tag">Ù…Ø±Ø¬Ø¹ Ø¹Ù„Ù…ÙŠ Ù…Ù† Ù…Ù†Ø¸Ù…Ø© Ø§Ù„ØµØ­Ø© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© ÙˆØ§Ù„Ø¬Ù…Ø¹ÙŠØ© Ø§Ù„Ø£Ù…ÙŠØ±ÙƒÙŠØ© Ù„Ù„Ø³Ø±Ø·Ø§Ù†. Ø§Ø®ØªØ± Ø¯ÙˆÙ„ØªÙƒ Ù„ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø£Ø¹Ø±Ø§Ø¶ ØªØ­Ø°ÙŠØ±ÙŠØ©ØŒ Ù†ØµØ§Ø¦Ø­ØŒ ÙˆØ¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ­Ø±ÙŠØŒ Ù…Ø¹ Ø£Ø±Ù‚Ø§Ù… Ù…Ø³ØªØ´ÙÙŠØ§Øª Ù…Ø®ØªØµÙ‘Ø©.</div>
</header>

<main class="shell">
  <section class="hero">
    <div class="row">
      <div>
        <div class="field center">
          <label><strong>Ø§Ù„Ø¯ÙˆÙ„Ø©</strong></label>
          <div class="select">
            <select id="countrySelect" aria-label="Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©">
              <option value="BHR" selected>Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</option>
              <option value="KSA">Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option>
              <option value="ARE">Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</option>
              <option value="QAT">Ù‚Ø·Ø±</option>
              <option value="KWT">Ø§Ù„ÙƒÙˆÙŠØª</option>
              <option value="OMN">Ø¹ÙÙ…Ø§Ù†</option>
              <option value="EGY">Ù…ØµØ±</option>
              <option value="JOR">Ø§Ù„Ø£Ø±Ø¯Ù†</option>
              <option value="MAR">Ø§Ù„Ù…ØºØ±Ø¨</option>
              <option value="DZA">Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</option>
              <option value="TUN">ØªÙˆÙ†Ø³</option>
              <option value="IRQ">Ø§Ù„Ø¹Ø±Ø§Ù‚</option>
              <option value="LBN">Ù„Ø¨Ù†Ø§Ù†</option>
              <option value="SYR">Ø³ÙˆØ±ÙŠØ§</option>
              <option value="YEM">Ø§Ù„ÙŠÙ…Ù†</option>
            </select>
          </div>
        </div>

        <div class="field center">
          <label><strong>Ø§Ù„Ù†ÙˆØ¹</strong></label>
          <div class="seg" id="sexSeg">
            <button type="button" class="on" data-sex="male">Ø±Ø¬Ù„</button>
            <button type="button" data-sex="female">Ø§Ù…Ø±Ø£Ø©</button>
          </div>
        </div>

        <div class="field center">
          <label><strong>Ø§Ù„Ø¹Ù…Ø±</strong></label>
          <input id="ageInput" type="number" inputmode="numeric" placeholder="Ù…Ø«Ø§Ù„: 45" min="0" max="120" style="width:140px; padding:10px; border:1px solid var(--line); border-radius:10px; text-align:center">
        </div>

        <div class="field center">
          <label><strong>Ø¹ÙˆØ§Ù…Ù„ Ù…Ø¤Ø«Ø±Ø©</strong></label>
          <div class="seg" id="smokeSeg">
            <button type="button" class="on" data-smoke="no">ØºÙŠØ± Ù…Ø¯Ø®Ù‘Ù†</button>
            <button type="button" data-smoke="yes">Ù…Ø¯Ø®Ù‘Ù†</button>
          </div>
          <div style="margin-top:8px" class="seg" id="familySeg">
            <button type="button" class="on" data-fh="no">Ù„Ø§ ØªØ§Ø±ÙŠØ® Ø¹Ø§Ø¦Ù„ÙŠ</button>
            <button type="button" data-fh="yes">ØªØ§Ø±ÙŠØ® Ø¹Ø§Ø¦Ù„ÙŠ Ù‚ÙˆÙŠ</button>
          </div>
        </div>

        <button class="btn" id="calc">Ø§Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ ÙˆØ§Ù„ØªØ­Ø±ÙŠ</button>

        <div class="kpi" id="kpis" style="display:none">
          <div class="k"><div class="v" id="screeningTitle">â€”</div><div>ÙØ­ÙˆØµØ§Øª Ø§Ù„ØªØ­Ø±ÙŠ Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§</div></div>
          <div class="k"><div class="v" id="riskNote">â€”</div><div>Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø®Ø·Ø± Ø§Ù„Ø´Ø®ØµÙŠ</div></div>
        </div>
      </div>

      <div>
        <div id="verdict" class="badge ok" style="display:none"></div>

        <div class="deck" id="adviceDeck" style="display:none"></div>

        <div class="card" id="contactsCard" style="display:none; margin-top:12px">
          <h3>Ù…Ø³ØªØ´ÙÙŠØ§Øª ÙˆØ®Ø·ÙˆØ· Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ <span id="ctryName">â€”</span></h3>
          <ul id="contactsList" style="margin:0; padding-inline-start:18px"></ul>
          <div style="margin-top:8px; font-size:12px; color:#6b7280">ÙÙŠ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø·Ø§Ø±Ø¦Ø© Ø§ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ø³Ø¹Ø§Ù Ø§Ù„Ù…Ø­Ù„ÙŠ.</div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>Ù…Ø±Ø§Ø¬Ø¹ Ø¹Ù„Ù…ÙŠØ©</h3>
          <ul style="margin:0; padding-inline-start:18px; font-size:14px">
            <li><a href="https://www.who.int/news-room/fact-sheets/detail/cancer" target="_blank" rel="noopener">WHO â€” Ø­Ù‚Ø§Ø¦Ù‚ Ø¹Ù† Ø§Ù„Ø³Ø±Ø·Ø§Ù†</a></li>
            <li><a href="https://www.who.int/news/item/01-02-2024-global-cancer-burden-growing--amidst-mounting-need-for-services" target="_blank" rel="noopener">WHO â€” Ø¹Ø¨Ø¡ Ø§Ù„Ø³Ø±Ø·Ø§Ù† Ø¹Ø§Ù„Ù…ÙŠÙ‹Ø§</a></li>
            <li><a href="https://www.cancer.org/cancer/diagnosis-staging/signs-and-symptoms-of-cancer.html" target="_blank" rel="noopener">ACS â€” Ø¹Ù„Ø§Ù…Ø§Øª ÙˆØ£Ø¹Ø±Ø§Ø¶ Ø§Ù„Ø³Ø±Ø·Ø§Ù†</a></li>
            <li><a href="https://www.mayoclinic.org/diseases-conditions/cancer/symptoms-causes/syc-20370588" target="_blank" rel="noopener">Mayo Clinic â€” Ø£Ø¹Ø±Ø§Ø¶ ÙˆØ£Ø³Ø¨Ø§Ø¨</a></li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <footer style="text-align:center; margin:12px 0 24px; font-size:12px; color:#6b7280">
    <div><strong>ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù‡Ù…:</strong> Ù‡Ø°Ù‡ Ø£Ø¯Ø§Ø© ØªØ«Ù‚ÙŠÙÙŠØ© Ù„Ø§ ØªÙØ´Ø®Ù‘Øµ Ø§Ù„Ù…Ø±Ø¶. ÙˆØ¬ÙˆØ¯ Ø¹Ø±Ø¶ Ù„Ø§ ÙŠØ¹Ù†ÙŠ Ø§Ù„Ø³Ø±Ø·Ø§Ù†ØŒ Ù„ÙƒÙ†Ù‡ ÙŠØ­ØªØ§Ø¬ ØªÙ‚ÙŠÙŠÙ…Ù‹Ø§ Ø·Ø¨ÙŠÙ‹Ø§.</div>
    <div style="margin-top:6px">
      <a id="devLink" class="ghost-link" href="https://api.whatsapp.com/send/?phone=97333375858&text&type=phone_number&app_absent=0&wame_ctl=1" target="_blank" rel="noopener">Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ±: ÙØ§Ø¶Ù„ Ø§Ù„Ø±ÙŠØ³</a>
    </div>
  </footer>
</main>

<div id="notice" class="notice" style="display:none">
  <div class="dot"></div>
  <div class="text">â€”</div>
  <button class="close" title="Ø¥ØºÙ„Ø§Ù‚" aria-label="Ø¥ØºÙ„Ø§Ù‚">Ã—</button>
</div>

<script>
/* ========= Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª/Ø§Ù„Ø®Ø·ÙˆØ· Ù„ÙƒÙ„ Ø¯ÙˆÙ„Ø© =========
   Ø£Ø¶ÙÙ Ø£Ø±Ù‚Ø§Ù… Ø¯ÙˆÙ„ØªÙƒ Ø¨Ù†ÙØ³ Ø§Ù„ØµÙŠØºØ©. */
const HOSPITALS = {
  BHR: {
    name: "Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†",
    contacts: [
      {label:"ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØµØ­Ø© â€” Ù‚Ø³Ù… Ø§Ù„Ø£ÙˆØ±Ø§Ù… (Ø³Ù„Ù…Ø§Ù†ÙŠØ©)", tel:"+97317284185"},
      {label:"Ù…Ø±ÙƒØ² Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ØµØ­ÙŠ â€” Ø§Ù„Ø®Ø· Ø§Ù„Ø³Ø§Ø®Ù†", tel:"+97380007000"},
      {label:"Ø¬Ù…Ø¹ÙŠØ© Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† Ù„Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø³Ø±Ø·Ø§Ù† â€” Ø®Ø· Ù…Ø¹Ù„ÙˆÙ…Ø§Øª", tel:"+97317233080"},
      {label:"Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ù…Ù„ÙƒÙŠ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†ÙŠ â€” Ø·Ø¨ Ø§Ù„Ø£ÙˆØ±Ø§Ù… (Ø®Ø§Øµ)", tel:"+97317246800"},
      {label:"Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† Ø§Ù„ØªØ®ØµØµÙŠ â€” Ø§Ù„Ø£ÙˆØ±Ø§Ù… (Ø®Ø§Øµ)", tel:"+97317812222"}
    ]
  },
  KSA: { name:"Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", contacts:[
    // Ù…Ø«Ø§Ù„: {label:"Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯ Ù„Ù„Ø£ÙˆØ±Ø§Ù… â€” Ø§Ù„Ø±ÙŠØ§Ø¶", tel:"+966-XXX"},
  ]},
  ARE: { name:"Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª", contacts:[
    // Ù…Ø«Ø§Ù„: {label:"Ù…Ø³ØªØ´ÙÙ‰ ØªÙˆØ§Ù… â€” Ù…Ø±ÙƒØ² Ø§Ù„Ø£ÙˆØ±Ø§Ù…", tel:"+971-XXX"},
  ]},
  QAT: { name:"Ù‚Ø·Ø±", contacts:[/* ... */] },
  KWT: { name:"Ø§Ù„ÙƒÙˆÙŠØª", contacts:[/* ... */] },
  OMN: { name:"Ø¹ÙÙ…Ø§Ù†", contacts:[/* ... */] },
  EGY: { name:"Ù…ØµØ±", contacts:[/* ... */] },
  JOR: { name:"Ø§Ù„Ø£Ø±Ø¯Ù†", contacts:[/* ... */] },
  MAR: { name:"Ø§Ù„Ù…ØºØ±Ø¨", contacts:[/* ... */] },
  DZA: { name:"Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±", contacts:[/* ... */] },
  TUN: { name:"ØªÙˆÙ†Ø³", contacts:[/* ... */] },
  IRQ: { name:"Ø§Ù„Ø¹Ø±Ø§Ù‚", contacts:[/* ... */] },
  LBN: { name:"Ù„Ø¨Ù†Ø§Ù†", contacts:[/* ... */] },
  SYR: { name:"Ø³ÙˆØ±ÙŠØ§", contacts:[/* ... */] },
  YEM: { name:"Ø§Ù„ÙŠÙ…Ù†", contacts:[/* ... */] }
};

/* ========= Ø£Ø¹Ø±Ø§Ø¶ ØªØ­Ø°ÙŠØ±ÙŠØ© Ø¹Ø§Ù…Ø© (ØªØ«Ù‚ÙŠÙÙŠØ©) =========
   Ø®Ù„Ø§ØµØ© Ù…Ù† WHO/ACS/Mayo. */
const RED_FLAGS = [
  "ÙÙ‚Ø¯Ø§Ù† ÙˆØ²Ù† ØºÙŠØ± Ù…Ø¨Ø±Ù‘Ø±",
  "ØªØ¹Ø¨ Ø´Ø¯ÙŠØ¯ Ù…Ø³ØªÙ…Ø± Ø£Ùˆ Ø­ÙÙ…Ù‘Ù‰ Ù…ØªÙƒØ±Ù‘Ø±Ø©",
  "Ø£Ù„Ù… Ù…Ø³ØªÙ…Ø± Ø£Ùˆ Ø¬Ø¯ÙŠØ¯ Ø¨Ù„Ø§ Ø³Ø¨Ø¨ ÙˆØ§Ø¶Ø­",
  "ÙƒØªÙ„Ø©/ØªÙˆØ±Ù‘Ù… Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù†ØŒ Ø£Ùˆ ØªØºÙŠÙ‘Ø± ÙÙŠ Ø§Ù„Ø«Ø¯ÙŠ",
  "Ù†Ø²Ù ØºÙŠØ± Ù…Ø¹ØªØ§Ø¯ (Ø¯Ù… Ù…Ø¹ Ø§Ù„Ø³Ø¹Ø§Ù„/Ø§Ù„Ø¨ÙˆÙ„/Ø§Ù„Ø¨Ø±Ø§Ø² Ø£Ùˆ Ù†Ø²Ù Ù…Ù‡Ø¨Ù„ÙŠ ØºÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠ)",
  "Ø³Ø¹Ø§Ù„/Ø¨Ø­Ù‘Ø©/Ø¶ÙŠÙ‚ Ù†ÙØ³ Ù…Ø³ØªÙ…Ø± Ù„Ø£ÙƒØ«Ø± Ù…Ù† 3 Ø£Ø³Ø§Ø¨ÙŠØ¹",
  "Ø­Ø±Ù‚Ø© Ù…Ø¹Ø¯Ø©/Ø¹ÙØ³Ø± Ø¨Ù„Ø¹ Ù…Ø³ØªÙ…Ø±",
  "ØªØºÙŠÙ‘Ø± Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ø´Ø§Ù…Ø§Øª Ø£Ùˆ Ø¨Ù‚Ø¹ Ø§Ù„Ø¬Ù„Ø¯",
  "Ù‚Ø±Ø­Ø©/Ø¬Ø±Ø­ Ù„Ø§ ÙŠÙ„ØªØ¦Ù…",
  "Ø§Ù†ØªÙØ§Ø®/Ù†ÙØ®Ø© Ù…Ø³ØªÙ…Ø±Ø© Ø¨Ø§Ù„Ø¨Ø·Ù†"
];

/* ========= ØªÙˆØµÙŠØ§Øª ØªØ­Ø±Ù‘ÙŠ Ù…Ø¨Ø³Ø·Ø© Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù…Ø±/Ø§Ù„Ù†ÙˆØ¹ =========
   Ù‡Ø°Ù‡ Ø¯Ù„Ø§Ø¦Ù„ Ø¹Ø§Ù…Ø©Ø› Ù‚Ø¯ ØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø¨Ù„Ø¯Ùƒ ÙˆØ­Ø§Ù„ØªÙƒ Ø§Ù„ÙØ±Ø¯ÙŠØ©. */
function recommendedScreenings(age, sex, smoker, strongFH){
  const list=[];
  // Ø§Ù„Ø«Ø¯ÙŠ â€” ØªØµÙˆÙŠØ± Ø§Ù„Ø«Ø¯ÙŠ
  if(sex==='female' && age>=40){ list.push("ØªØµÙˆÙŠØ± Ø§Ù„Ø«Ø¯ÙŠ Ø§Ù„Ø¯ÙˆØ±ÙŠ (Ù…Ø§Ù…ÙˆØºØ±Ø§Ù…): ÙƒÙ„ 1â€“2 Ø³Ù†Ø© Ø¨Ø¯Ø¡Ù‹Ø§ Ù…Ù† 40â€“50 ÙˆÙÙ‚ Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø¨Ù„Ø¯Ùƒ."); }
  // Ø¹Ù†Ù‚ Ø§Ù„Ø±Ø­Ù… â€” Pap/HPV
  if(sex==='female' && age>=21){ list.push("Ø¹Ù†Ù‚ Ø§Ù„Ø±Ø­Ù…: Ø§Ø®ØªØ¨Ø§Ø± Pap/HPV Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© (Ø¹Ø§Ø¯Ø© ÙƒÙ„ 3â€“5 Ø³Ù†ÙˆØ§Øª)."); }
  // Ø§Ù„Ù‚ÙˆÙ„ÙˆÙ† ÙˆØ§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… â€” FIT/ØªÙ†Ø¸ÙŠØ±
  if(age>=45){ list.push("Ø³Ø±Ø·Ø§Ù† Ø§Ù„Ù‚ÙˆÙ„ÙˆÙ† ÙˆØ§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…: FIT Ø³Ù†ÙˆÙŠÙ‹Ø§ Ø£Ùˆ ØªÙ†Ø¸ÙŠØ± Ù‚ÙˆÙ„ÙˆÙ† ÙƒÙ„ 10 Ø³Ù†ÙˆØ§Øª (Ø£Ùˆ Ø­Ø³Ø¨ ØªÙˆØµÙŠØ© Ø§Ù„Ø·Ø¨ÙŠØ¨)."); }
  // Ø§Ù„Ø±Ø¦Ø© â€” Ø·Ø¨Ù‚Ø© Ø±Ù‚ÙŠÙ‚Ø© Ù„Ù„Ù…Ø¯Ø®Ù‘Ù†ÙŠÙ†
  if(age>=50 && smoker==='yes'){ list.push("Ø³Ø±Ø·Ø§Ù† Ø§Ù„Ø±Ø¦Ø©: ØªØµÙˆÙŠØ± Ø·Ø¨Ù‚ÙŠ Ù…Ù†Ø®ÙØ¶ Ø§Ù„Ø¬Ø±Ø¹Ø© (LDCT) Ø³Ù†ÙˆÙŠÙ‹Ø§ Ù„Ù„Ù…Ø¯Ø®Ù†ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‡Ù„ÙŠÙ†."); }
  // Ø§Ù„Ø¨Ø±ÙˆØ³ØªØ§ØªØ§ â€” PSA (Ù‚Ø±Ø§Ø± Ù…Ø´ØªØ±Ùƒ)
  if(sex==='male' && age>=50){ list.push("Ø§Ù„Ø¨Ø±ÙˆØ³ØªØ§ØªØ§: Ù…Ù†Ø§Ù‚Ø´Ø© ÙØ­Øµ PSA/Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ù…Ø¹ Ø§Ù„Ø·Ø¨ÙŠØ¨ Ù„Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø± Ù…Ø´ØªØ±Ùƒ."); }
  // ØªØ§Ø±ÙŠØ® Ø¹Ø§Ø¦Ù„ÙŠ Ù‚ÙˆÙŠ
  if(strongFH==='yes'){ list.push("Ù†Ø¸Ø±Ù‹Ø§ Ù„ÙˆØ¬ÙˆØ¯ ØªØ§Ø±ÙŠØ® Ø¹Ø§Ø¦Ù„ÙŠ Ù‚ÙˆÙŠ: Ø§Ø³ØªØ´Ø± Ø§Ø®ØªØµØ§ØµÙŠ ÙˆØ±Ø§Ø«Ø©/Ø£ÙˆØ±Ø§Ù… Ù„ØªÙ‚ÙŠÙŠÙ… ÙØ­ÙˆØµ Ù…Ø¨ÙƒÙ‘Ø±Ø© Ø£Ùˆ Ù…ÙˆØ³Ù‘Ø¹Ø©."); }
  return list;
}

/* ========= Ø¹Ù†Ø§ØµØ± ========= */
const sexSeg=document.getElementById('sexSeg');
const smokeSeg=document.getElementById('smokeSeg');
const familySeg=document.getElementById('familySeg');
let selectedSex="male", isSmoker="no", strongFH="no";
sexSeg.addEventListener('click',e=>{ const b=e.target.closest('button'); if(!b)return; sexSeg.querySelectorAll('button').forEach(x=>x.classList.remove('on')); b.classList.add('on'); selectedSex=b.dataset.sex; });
smokeSeg.addEventListener('click',e=>{ const b=e.target.closest('button'); if(!b)return; smokeSeg.querySelectorAll('button').forEach(x=>x.classList.remove('on')); b.classList.add('on'); isSmoker=b.dataset.smoke; });
familySeg.addEventListener('click',e=>{ const b=e.target.closest('button'); if(!b)return; familySeg.querySelectorAll('button').forEach(x=>x.classList.remove('on')); b.classList.add('on'); strongFH=b.dataset.fh; });

const notice=document.getElementById('notice'), noticeText=notice.querySelector('.text');
notice.querySelector('.close').onclick=()=>{ notice.classList.remove('show'); setTimeout(()=>notice.style.display='none',250); };
function notify(msg,{type='info',timeout=3500}={}){ notice.style.display='flex'; notice.classList.toggle('error', type==='error'); noticeText.innerHTML=msg; requestAnimationFrame(()=>notice.classList.add('show')); clearTimeout(window.__nt); window.__nt=setTimeout(()=>{ notice.classList.remove('show'); setTimeout(()=>notice.style.display='none',250); }, timeout); }

/* ========= Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· ========= */
document.getElementById('calc').addEventListener('click', ()=>{
  const age = parseInt(document.getElementById('ageInput').value,10);
  if(!(age>=0 && age<=120)){ notify("Ø£Ø¯Ø®Ù„ Ø¹Ù…Ø±Ù‹Ø§ ØµØ­ÙŠØ­Ù‹Ø§ Ø¨ÙŠÙ† 0 Ùˆ 120.", {type:'error'}); return; }

  // Ø´Ø§Ø±Ø© ØªÙˆØ¶ÙŠØ­
  const v=document.getElementById('verdict');
  v.style.display='inline-block';
  v.textContent="ğŸ” Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªØ«Ù‚ÙŠÙÙŠØ©. Ø§Ø³ØªØ´Ø± Ø·Ø¨ÙŠØ¨Ùƒ Ù„Ø£ÙŠ Ø¹Ø±Ø¶ Ù…ÙÙ‚Ù„Ù‚.";

  // Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶
  const deck=document.getElementById('adviceDeck');
  deck.innerHTML="";
  const mk=(t,html)=>{ const e=document.createElement('div'); e.className='card'; e.innerHTML=`<h3>${t}</h3>${html}`; return e; };

  const redList = "<ul style='margin:0; padding-inline-start:18px'>"+RED_FLAGS.map(x=>`<li>${x}</li>`).join("")+"</ul>";
  deck.append(
    mk("Ø£Ø¹Ø±Ø§Ø¶ ØªØ­Ø°ÙŠØ±ÙŠØ© Ø´Ø§Ø¦Ø¹Ø©", redList),
    mk("Ø¹ÙˆØ§Ù…Ù„ Ø®Ø·ÙˆØ±Ø© ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§", "<ul><li>Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹ Ø¹Ù† Ø§Ù„ØªØ¯Ø®ÙŠÙ† ÙˆØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ØªØ¹Ø±Ù‘Ø¶ Ù„Ù„Ø¯Ø®Ø§Ù†.</li><li>Ù†Ø´Ø§Ø· Ø¨Ø¯Ù†ÙŠ Ù…Ù†ØªØ¸Ù… ÙˆØºØ°Ø§Ø¡ Ù…ØªÙˆØ§Ø²Ù† ÙˆØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø³Ù…Ù†Ø©.</li><li>Ø§Ù„Ø­Ø¯ Ù…Ù† Ø§Ù„ÙƒØ­ÙˆÙ„ ÙˆØ­Ù…Ø§ÙŠØ© Ø§Ù„Ø¬Ù„Ø¯ Ù…Ù† Ø§Ù„Ø´Ù…Ø³.</li><li>Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„ØªØ·Ø¹ÙŠÙ…Ø§Øª (Ù…Ø«Ù„ HPVØŒ Ø§Ù„ØªÙ‡Ø§Ø¨ Ø§Ù„ÙƒØ¨Ø¯ B) ÙˆÙÙ‚ Ø¨Ù„Ø¯Ùƒ.</li></ul>"),
    mk("Ù…Ø§Ø°Ø§ Ø£ÙØ¹Ù„ Ø¹Ù†Ø¯ Ø¸Ù‡ÙˆØ± Ø¹Ø±Ø¶ØŸ", "<ul><li>Ù„Ø§ ØªÙ†ØªØ¸Ø±: Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ù‹Ø§ Ø£ÙˆÙ„ÙŠÙ‹Ø§ Ù„Ø¯Ù‰ Ø·Ø¨ÙŠØ¨ Ø§Ù„Ø£Ø³Ø±Ø©/Ø§Ù„Ø·Ø¨ Ø§Ù„Ø¹Ø§Ù….</li><li>Ø§Ø°ÙƒØ± Ù…Ø¯Ø© Ø§Ù„Ø¹Ø±Ø¶ØŒ Ø´Ø¯Ù‘ØªÙ‡ØŒ ÙˆØ£ÙŠ Ù†Ø²Ù Ø£Ùˆ ÙÙ‚Ø¯Ø§Ù† ÙˆØ²Ù†.</li><li>Ø§ØªØ¨Ø¹ Ø®Ø·Ù‘Ø© Ø§Ù„ØªØ­Ø±ÙŠ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ø¹Ù…Ø±Ùƒ ÙˆÙ†ÙˆØ¹Ùƒ.</li></ul>")
  );
  deck.style.display='grid';

  // Ø§Ù„ØªØ­Ø±ÙŠ
  const rec = recommendedScreenings(age, selectedSex, isSmoker, strongFH);
  document.getElementById('kpis').style.display='grid';
  document.getElementById('screeningTitle').textContent = (rec.length? "Ù…ØªØ§Ø­Ø©":"â€”");
  document.getElementById('riskNote').textContent = (isSmoker==='yes' ? "Ù…Ø¯Ø®Ù‘Ù†: Ù†Ø§Ù‚Ø´ LDCT" : (strongFH==='yes'?"ØªØ§Ø±ÙŠØ® Ø¹Ø§Ø¦Ù„ÙŠ Ù‚ÙˆÙŠ: Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø§Ø®ØªØµØ§ØµÙŠ":"Ø¹Ø§Ù…: Ø§ØªØ¨Ø¹ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ"));
  if(rec.length){
    deck.append( mk("ÙØ­ÙˆØµØ§Øª Ø§Ù„ØªØ­Ø±ÙŠ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© Ù„Ùƒ", "<ul>"+rec.map(x=>`<li>${x}</li>`).join("")+"</ul>") );
  }

  // Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª/Ø§Ù„Ø®Ø·ÙˆØ·
  const iso = document.getElementById('countrySelect').value;
  const cfg = HOSPITALS[iso];
  const card = document.getElementById('contactsCard');
  const list = document.getElementById('contactsList');
  const name = document.getElementById('ctryName');
  list.innerHTML="";
  if(cfg && cfg.contacts && cfg.contacts.length){
    name.textContent = cfg.name;
    cfg.contacts.forEach(c=>{
      const li=document.createElement('li');
      li.innerHTML = `<strong>${c.label}</strong> â€” <a href="tel:${c.tel.replace(/\s+/g,'')}" dir="ltr">${c.tel}</a>`;
      list.appendChild(li);
    });
    card.style.display='block';
  }else{
    name.textContent = cfg? cfg.name : "Ø§Ù„Ø¯ÙˆÙ„Ø©";
    list.innerHTML = "<li>Ù„Ù… ØªÙØ¶Ù Ø£Ø±Ù‚Ø§Ù… Ø¨Ø¹Ø¯ â€” Ø£Ø¶ÙÙÙ‡Ø§ Ù…Ù† ÙƒØ§Ø¦Ù† HOSPITALS ÙÙŠ Ø§Ù„ÙƒÙˆØ¯.</li>";
    card.style.display='block';
  }
});

/* ÙØªØ­ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø·ÙˆÙ‘Ø± Ø¨Ø­Ø°Ø± */
document.getElementById('devLink').addEventListener('click', function(){ setTimeout(()=>{ if(!document.hasFocus()) return; location.href=this.href; }, 100); });
</script>
</body>
</html>
