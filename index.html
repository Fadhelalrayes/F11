<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
  />
  <title>Ù‡ÙˆØ³ Ø¨Ø§Ù„Ø®Ù…Ø³</title>
  <style>
    /* Ø£Ø³Ø§Ø³ÙŠØ§Øª Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø§Ù„Ø¬ÙˆØ§Ù„ */
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0}
    :root{
      --bg:#fff; --text:#141b2d; --muted:#667085; --brand:#ff5a1f; --stroke:#e7e9f0;
      --radius:14px; --touch:48px; --shadow:0 6px 20px rgba(0,0,0,.08);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }
    body{background:var(--bg);color:var(--text);font:400 16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,"Noto Kufi Arabic",Tahoma,Arial;-webkit-tap-highlight-color:transparent}

    /* ØªØ±ÙˆÙŠØ³Ø© Ø¨Ø³ÙŠØ·Ø© Ø¨Ù„Ø§ Ø²Ø± Ø³Ù„Ø© */
    header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--stroke);z-index:20}
    .wrap{max-width:980px;margin:auto;padding:10px 16px}
    .row{display:flex;gap:10px;align-items:center}
    .grow{flex:1}
    h1{font-size:20px;margin:0}
    .search{display:flex;gap:8px;align-items:center;border:1px solid var(--stroke);border-radius:12px;background:#fff;padding:8px 10px}
    .search input{all:unset;direction:rtl;flex:1;min-height:var(--touch)}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;background:var(--brand);color:#fff;border:none;border-radius:12px;padding:0 16px;min-height:var(--touch);cursor:pointer}
    .btn.secondary{background:#f3f4f6;color:#1f2937;border:1px solid var(--stroke)}

    /* Ø¨Ø·Ø§Ù‚Ø§Øª ÙˆÙ‚Ø§Ø¦Ù…Ø© */
    main{padding:16px 16px calc(84px + var(--safe-bottom))}
    .grid{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:640px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:960px){.grid{grid-template-columns:repeat(3,1fr)}}
    .card{background:#fff;border:1px solid var(--stroke);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .rest{display:grid;grid-template-columns:80px 1fr auto;gap:12px;align-items:center;padding:12px}
    .rest .pic{width:80px;height:80px;border-radius:12px;background:#fff7f3;display:grid;place-items:center;font-size:26px}
    .muted{color:var(--muted);font-size:14px}
    .hidden{display:none !important}

    .menu-item{display:grid;grid-template-columns:60px 1fr auto;gap:10px;align-items:center;padding:12px;border-top:1px solid var(--stroke)}
    .menu-item .pic{width:60px;height:60px;border-radius:10px;background:#fff7f3;display:grid;place-items:center}

    .qty{display:inline-flex;align-items:center;border:1px solid var(--stroke);border-radius:12px}
    .qty button{all:unset;padding:12px;cursor:pointer}
    .qty span{min-width:36px;text-align:center}

    /* ØªØ¨ÙˆÙŠØ¨ Ø³ÙÙ„ÙŠ Ù…Ø¹ Ø´Ø§Ø±Ø© Ù„Ù„Ø³Ù„Ø© */
    footer.nav{position:fixed;inset-inline:0;bottom:0;background:#fff;border-top:1px solid var(--stroke);z-index:30;padding-bottom:var(--safe-bottom)}
    .tabs{max-width:980px;margin:auto;display:grid;grid-template-columns:repeat(3,1fr)}
    .tabs a{position:relative;padding:12px;text-align:center;color:#94a3b8;text-decoration:none}
    .tabs a.active{color:var(--brand);font-weight:700}
    .tabs a .badge{
      position:absolute;top:6px;left:50%;transform:translateX(-50%);
      background:var(--brand);color:#fff;border-radius:999px;padding:0 6px;font-size:12px;line-height:18px;min-width:18px
    }

    /* Ø¬Ø¯Ø§ÙˆÙ„ */
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid var(--stroke);text-align:right}
  </style>
</head>
<body>
  <header>
    <div class="wrap row">
      <h1>Ù‡ÙˆØ³ Ø¨Ø§Ù„Ø®Ù…Ø³</h1>
      <div class="grow search" role="search">
        <input id="q" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø·Ø¹Ù… Ø£Ùˆ Ø·Ø¨Ù‚â€¦" aria-label="Ø¨Ø­Ø«" />
        <button class="btn secondary" id="btnSearch">Ø¨Ø­Ø«</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <section id="home">
      <h2 style="margin:6px 0 10px">Ø§Ù„Ù…Ø·Ø§Ø¹Ù…</h2>
      <div id="restaurants" class="grid"></div>
    </section>

    <!-- ØµÙØ­Ø© Ù…Ø·Ø¹Ù… -->
    <section id="restaurantView" class="hidden">
      <div class="row" style="justify-content:space-between;margin:6px 0">
        <button class="btn secondary" id="backToList">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
        <strong id="restName"></strong>
      </div>
      <div id="menu"></div>
    </section>

    <!-- Ø§Ù„Ø³Ù„Ø© -->
    <section id="cartView" class="hidden">
      <h2 style="margin:6px 0 10px">Ø§Ù„Ø³Ù„Ø©</h2>
      <div id="cartEmpty" class="muted">Ø³Ù„ØªÙƒ ÙØ§Ø±ØºØ©.</div>
      <div id="cartFilled" class="hidden">
        <table>
          <thead><tr><th>Ø§Ù„Ù…Ù†ØªØ¬</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø±</th></tr></thead>
          <tbody id="cartRows"></tbody>
        </table>
        <div class="row" style="justify-content:space-between;margin-top:10px">
          <div class="muted">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
          <div id="cartTotalNum">0.00 Ø¯.Ø¨</div>
        </div>
        <div class="row" style="justify-content:flex-end;margin-top:10px">
          <button class="btn secondary" id="clearCart" style="margin-inline-start:8px">Ø¥ÙØ±Ø§Øº Ø§Ù„Ø³Ù„Ø©</button>
          <button class="btn" id="goCheckout">Ø§Ù„Ø¯ÙØ¹</button>
        </div>
      </div>
    </section>
  </main>

  <!-- ØªØ¨ÙˆÙŠØ¨ Ø³ÙÙ„ÙŠ: Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© / Ø§Ù„Ø³Ù„Ø© / Ø­Ø³Ø§Ø¨ÙŠ -->
  <footer class="nav" aria-label="Ø§Ù„ØªÙ†Ù‚Ù„">
    <div class="tabs">
      <a href="#" data-tab="home" class="active">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <a href="#" data-tab="cart">Ø§Ù„Ø³Ù„Ø© <span class="badge" id="count">0</span></a>
      <a href="#" data-tab="profile">Ø­Ø³Ø§Ø¨ÙŠ</a>
    </div>
  </footer>

<script>
(()=>{
  const $=(s,c=document)=>c.querySelector(s);
  const $$=(s,c=document)=>Array.from(c.querySelectorAll(s));
  const fmt=n=>(Math.round(n*100)/100).toFixed(2);

  const state={
    restaurants:[
      {id:'r1',name:'Ø¨ÙŠØªØ²Ø§ Ø±ÙˆÙ…Ø§',menu:[
        {id:'m1',name:'Ù…Ø§Ø±Ø¬Ø±ÙŠØªØ§',price:3.5},
        {id:'m2',name:'Ø¨ÙŠØ¨Ø±ÙˆÙ†ÙŠ',price:3.9}
      ]},
      {id:'r2',name:'Ø¨Ø±Ø¬Ø± Ø³ØªØ±ÙŠØª',menu:[
        {id:'m3',name:'ØªØ´ÙŠØ² Ø¨Ø±Ø¬Ø±',price:2.6},
        {id:'m4',name:'Ø¨Ø·Ø§Ø·Ø³ Ù…Ù‚Ù„ÙŠØ©',price:0.9}
      ]},
      {id:'r3',name:'Ù…Ø´ÙˆÙŠØ§Øª Ø§Ù„Ø³Ù„Ø·Ø§Ù†',menu:[
        {id:'m5',name:'ÙƒØ¨Ø§Ø¨ Ù„Ø­Ù…',price:4.2},
        {id:'m6',name:'Ø­Ù…Øµ',price:0.8}
      ]}
    ],
    cart:[]
  };

  /* Ø±Ø³Ù… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø·Ø§Ø¹Ù… */
  function renderList(){
    const cont=$('#restaurants'); cont.innerHTML='';
    state.restaurants.forEach(r=>{
      const card=document.createElement('article'); card.className='card';
      card.innerHTML=`
        <div class="rest">
          <div class="pic">ğŸ½ï¸</div>
          <div>
            <div><strong>${r.name}</strong></div>
            <div class="muted">â­ 4.5 â€¢ â±ï¸ 25 Ø¯</div>
          </div>
          <div><button class="btn secondary" data-open="${r.id}">Ø§ÙØªØ­</button></div>
        </div>`;
      cont.appendChild(card);
    });
    $$('#restaurants [data-open]').forEach(b=>b.onclick=()=>openRestaurant(b.dataset.open));
  }

  /* ØµÙØ­Ø© Ù…Ø·Ø¹Ù… */
  function openRestaurant(id){
    const r=state.restaurants.find(x=>x.id===id); if(!r) return;
    show('restaurantView'); $('#restName').textContent=r.name;
    const menu=$('#menu'); menu.innerHTML='';
    r.menu.forEach(m=>{
      const row=document.createElement('div'); row.className='menu-item';
      row.innerHTML=`
        <div class="pic">ğŸ•</div>
        <div>
          <div class="row" style="justify-content:space-between">
            <strong>${m.name}</strong><strong>${fmt(m.price)} Ø¯.Ø¨</strong>
          </div>
        </div>
        <div><button class="btn" data-add="${m.id}" data-rest="${id}">Ø£Ø¶ÙÙ</button></div>`;
      menu.appendChild(row);
    });
    $$('#menu [data-add]').forEach(btn=>btn.onclick=()=>addToCart(btn.dataset.rest, btn.dataset.add));
  }

  /* Ø§Ù„Ø³Ù„Ø© */
  function cartCount(){ return state.cart.reduce((a,i)=>a+i.qty,0); }
  function updateBadge(){ $('#count').textContent = cartCount(); }

  function addToCart(rid,mid){
    const r=state.restaurants.find(x=>x.id===rid); const m=r?.menu.find(x=>x.id===mid); if(!m) return;
    const f=state.cart.find(x=>x.id===mid);
    if(f) f.qty++; else state.cart.push({id:mid,name:m.name,price:m.price,qty:1});
    updateBadge();
  }

  function renderCart(){
    show('cartView');
    const empty = state.cart.length===0;
    $('#cartEmpty').classList.toggle('hidden',!empty);
    $('#cartFilled').classList.toggle('hidden',empty);
    if(empty) return;

    const tb=$('#cartRows'); tb.innerHTML='';
    state.cart.forEach(i=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`
        <td>${i.name}</td>
        <td>
          <span class="qty">
            <button data-d="-1" data-id="${i.id}">âˆ’</button>
            <span>${i.qty}</span>
            <button data-d="1" data-id="${i.id}">+</button>
          </span>
        </td>
        <td>${fmt(i.qty*i.price)} Ø¯.Ø¨</td>`;
      tb.appendChild(tr);
    });
    $$('#cartRows [data-d]').forEach(b=>b.onclick=()=>changeQty(b.dataset.id, Number(b.dataset.d)));
    const total=state.cart.reduce((a,i)=>a+i.qty*i.price,0);
    $('#cartTotalNum').textContent = fmt(total)+' Ø¯.Ø¨';
  }

  function changeQty(id,d){
    const it=state.cart.find(x=>x.id===id); if(!it) return;
    it.qty+=d; if(it.qty<=0) state.cart=state.cart.filter(x=>x.id!==id);
    updateBadge(); renderCart();
  }

  function clearCart(){ state.cart=[]; updateBadge(); renderCart(); }

  /* Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø£Ù‚Ø³Ø§Ù… */
  function show(which){
    ['home','restaurantView','cartView'].forEach(id=>$('#'+id).classList.toggle('hidden', id!==which));
    $$('.tabs a').forEach(a=>a.classList.toggle('active', a.dataset.tab===(
      which==='cartView'?'cart' : 'home'
    )));
  }

  /* Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
  $('#btnSearch').onclick=()=>renderList();
  $('#backToList').onclick=()=>show('home');
  $('#clearCart').onclick=()=>clearCart();
  $('#goCheckout').onclick=()=>alert('Ø¯ÙØ¹ ØªØ¬Ø±ÙŠØ¨ÙŠ â€” Ø£ÙƒÙ…Ù„ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¯ÙØ¹ Ù„Ø§Ø­Ù‚Ù‹Ø§');

  $$('.tabs a').forEach(a=>a.onclick=(e)=>{
    e.preventDefault();
    if(a.dataset.tab==='home') show('home');
    if(a.dataset.tab==='cart') renderCart();
    if(a.dataset.tab==='profile') alert('Ù…Ù„Ù Ø´Ø®ØµÙŠ ØªØ¬Ø±ÙŠØ¨ÙŠ');
  });

  /* ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ */
  renderList(); show('home'); updateBadge();

})();
</script>
</body>
</html>
