<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>مواقيت الصلاة وفق المذهب الجعفري</title>
<link href="https://fonts.googleapis.com/css2?family=Reem+Kufi:wght@500;700&family=Tajawal:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --ink:#0f172a; --muted:#6b7280;
    --bg:#f6f8fb; --surface:#fff; --border:#e5e7eb; --line:#e9edf3;
    --brand:#0ea5a6; --brand2:#2563eb; --gold:#c28b2c;
    --shadow:0 10px 28px rgba(2,6,23,.08);
    --r:16px; --rsm:12px; --gap:16px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; color:var(--ink); font-family:"Tajawal",sans-serif;
    background:var(--bg); padding:16px;
  }
  .container{width:min(1040px,100%); margin:auto; display:flex; flex-direction:column; gap:16px}

  /* ساعة صغيرة بالأعلى */
  .topClock{
    text-align:right; font-size:.95rem; font-weight:800;
    color:#084241; margin-bottom:6px;
  }

  /* مربع العنوان */
  .hero{
    background:#fff; border:1px solid var(--border); border-radius:18px;
    box-shadow:var(--shadow); padding:18px; text-align:center;
  }
  .heroTitle{
    margin:0; font-family:"Reem Kufi",sans-serif; font-weight:700;
    font-size:1.4rem; color:#0f172a;
  }
  .hero .sub{color:var(--muted); font-weight:700; font-size:.92rem; margin-top:4px}

  /* المكان */
  .locationBox{
    background:#fff; border:1px solid var(--border); border-radius:var(--r);
    box-shadow:var(--shadow); padding:12px 14px;
    display:flex; align-items:center; justify-content:space-between;
  }
  .place{font-weight:800}
  .changeBtn{
    border:1px solid var(--border); background:linear-gradient(135deg,#e9fbff,#eef2ff);
    color:#0b2749; border-radius:999px; padding:.55rem .9rem; font-weight:800; cursor:pointer;
  }

  /* التاريخ */
  .infoRow{display:grid; grid-template-columns:1fr 1fr; gap:16px}
  @media(max-width:720px){.infoRow{grid-template-columns:1fr}}
  .chip{background:#fff; border:1px solid var(--border); border-radius:12px;
    box-shadow:var(--shadow); padding:12px 14px; display:flex; gap:12px; align-items:center}
  .ico{width:34px; height:34px; border-radius:10px; display:grid; place-items:center;
    background:linear-gradient(135deg,#effaff,#fff); border:1px solid #d9e9ff; color:#0b5aa5}
  .stack{display:flex; flex-direction:column}
  .label{font-size:.86rem; color:var(--muted); font-weight:700}
  .value{font-weight:800; font-size:1.05rem; color:#0b213f}

  /* جدول المواقيت */
  .card{background:#fff; border:1px solid var(--border); border-radius:var(--r);
    box-shadow:var(--shadow); padding:12px}
  .card h3{margin:0 0 10px; font-size:1rem; font-weight:800}
  table{width:100%; border-collapse:collapse}
  th,td{padding:10px; border-bottom:1px solid #f0f2f5; text-align:right}
  th{background:#f9fafb; font-weight:700}
  tr:last-child td{border-bottom:none}
  .row{display:flex; align-items:center; gap:8px; font-weight:800}
  .dot{width:22px; height:22px; border-radius:8px; display:grid; place-items:center;
    background:linear-gradient(135deg,#ecfeff,#fff); border:1px solid #d9eef2; color:#0b5a64}
  tr.next td{background:linear-gradient(90deg,#0ea5a61a,transparent 40%)}
  tr.next td:first-child{border-inline-start:3px solid var(--brand)}

  /* صندوق الحديث */
  .hadith{background:#fff; border:1px solid var(--border); border-radius:14px;
    box-shadow:var(--shadow); padding:18px; position:relative}
  .hadith::before{
    content:"“"; position:absolute; top:10px; right:15px; font-size:60px; color:#e9eef6; font-weight:800;
  }
  .htext{margin:0; font-size:1.05rem; line-height:1.9}
  .hsrc{margin-top:8px; color:var(--muted); font-weight:700}

  footer{text-align:center; color:var(--muted); font-weight:700; margin-top:12px}
  .brand{color:var(--brand2)}
</style>
</head>
<body>
  <div class="container">
    <!-- ساعة صغيرة -->
    <div class="topClock" id="topClock">--:-- --</div>

    <!-- العنوان -->
    <section class="hero">
      <h1 class="heroTitle">مواقيت الصلاة وفق المذهب الجعفري</h1>
      <div class="sub">تحديث يومي</div>
    </section>

    <!-- المكان -->
    <div class="locationBox">
      <div class="place" id="place">المنامة، البحرين</div>
      <button class="changeBtn" id="openPicker" type="button">تغيير</button>
    </div>

    <!-- التاريخ -->
    <section class="infoRow">
      <div class="chip"><div class="ico">🗓</div><div class="stack"><div class="label">التاريخ الهجري</div><div class="value" id="hijri">--</div></div></div>
      <div class="chip"><div class="ico">📅</div><div class="stack"><div class="label">التاريخ الميلادي</div><div class="value" id="greg">--</div></div></div>
    </section>

    <!-- الجدول -->
    <section class="card">
      <h3>الجدول اليومي</h3>
      <table>
        <thead><tr><th>الوقت</th></tr></thead>
        <tbody id="times"><tr><td>جاري تحميل المواقيت…</td></tr></tbody>
      </table>
    </section>

    <!-- الحديث -->
    <section class="hadith">
      <p class="htext" id="hadithText"></p>
      <div class="hsrc" id="hadithSource"></div>
    </section>

    <footer>برمجة وتطوير <span class="brand">فاضل الريس</span></footer>
  </div>

<script>
const HADITHS=[
 {t:"قال الإمام الباقر (ع): إذا استقبل المصلي القبلة استقبل الرحمن بوجهه لا إله غيره.",s:"ميزان الحكمة"},
 {t:"قال الإمام علي (ع): إذا قام الرجل إلى الصلاة أقبل إبليس ينظر إليه حسداً.",s:"ميزان الحكمة"},
 {t:"قال الإمام الرضا (ع): الصلاة لها أربعة آلاف باب.",s:"ميزان الحكمة"},
 {t:"قال الإمام علي (ع): يا كميل! ليس الشأن أن تصلي وتصوم وتتصدق، إنما الشأن أن تكون الصلاة بقلب نقي وخشوع.",s:"ميزان الحكمة"},
];
let current={country:"Bahrain",city:"Manama",ar:"المنامة، البحرين",tz:"Asia/Bahrain"};

function to12h(t){if(!t)return"--";const [H,M]=t.split(":").map(Number);let h=H%12;if(h===0)h=12;return`${h}:${String(M).padStart(2,"0")} ${H<12?"AM":"PM"}`;}
function setHadith(){const h=HADITHS[Math.floor(Math.random()*HADITHS.length)];hadithText.textContent=h.t;hadithSource.textContent=h.s;}
function updateClock(){topClock.textContent=new Intl.DateTimeFormat('en-GB',{timeZone:current.tz,hour:'2-digit',minute:'2-digit',hour12:true}).format(new Date());}
function fmtGreg(){return new Intl.DateTimeFormat('ar',{timeZone:current.tz,weekday:'long',year:'numeric',month:'long',day:'numeric'}).format(new Date());}
function fmtHijri(){return new Intl.DateTimeFormat('ar-SA-u-ca-islamic',{timeZone:current.tz,weekday:'long',year:'numeric',month:'long',day:'numeric'}).format(new Date());}
async function load(){
  place.textContent=current.ar;
  hijri.textContent=fmtHijri();
  greg.textContent=fmtGreg();
  times.innerHTML="<tr><td>...</td></tr>";
  const url=`https://api.aladhan.com/v1/timingsByCity?city=${current.city}&country=${current.country}&method=0`;
  try{
    const r=await fetch(url); const j=await r.json(); const t=j.data.timings;
    const rows=[
      {l:"الإمساك",k:"Imsak",i:"🌙"},
      {l:"أذان الفجر",k:"Fajr",i:"🕌"},
      {l:"أذان الظهر",k:"Dhuhr",i:"☀️"},
      {l:"أذان العصر",k:"Asr",i:"🌤️"},
      {l:"أذان المغرب",k:"Maghrib",i:"🌆"},
      {l:"أذان العشاء",k:"Isha",i:"🌙"},
      {l:"منتصف الليل",k:"Midnight",i:"🌌"}
    ];
    times.innerHTML=rows.map(r=>`<tr><td>${r.i} ${r.l} — ${to12h((t[r.k]||"").split(" ")[0])}</td></tr>`).join("");
  }catch{times.innerHTML="<tr><td>تعذر جلب المواقيت</td></tr>";}
}
setHadith(); load(); updateClock(); setInterval(updateClock,1000);
</script>
</body>
</html>
